{"version":3,"file":"app.js","sources":["../../node_modules/page/page.mjs","../js/utils/trackUrl.js","../js/utils/setActiveMenu.js","../js/omniunits/components/Search.js","../js/utils/keywords.js","../js/omniunits/index.js","../js/dbbs/components/Search.js","../js/dbbs/index.js","../js/app.js","../js/home/index.js","../js/omniunits/components/Skeleton.js","../js/utils/request.js","../js/omniunit/index.js","../js/utils/setOgMeta.js","../js/dbbs/components/Skeleton.js","../js/notfound.js"],"sourcesContent":["var isarray = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n/**\n * Expose `pathToRegexp`.\n */\nvar pathToRegexp_1 = pathToRegexp;\nvar parse_1 = parse;\nvar compile_1 = compile;\nvar tokensToFunction_1 = tokensToFunction;\nvar tokensToRegExp_1 = tokensToRegExp;\n\n/**\n * The main path matching regexp utility.\n *\n * @type {RegExp}\n */\nvar PATH_REGEXP = new RegExp([\n  // Match escaped characters that would otherwise appear in future matches.\n  // This allows the user to escape special characters that won't transform.\n  '(\\\\\\\\.)',\n  // Match Express-style parameters and un-named parameters with a prefix\n  // and optional suffixes. Matches appear as:\n  //\n  // \"/:test(\\\\d+)?\" => [\"/\", \"test\", \"\\d+\", undefined, \"?\", undefined]\n  // \"/route(\\\\d+)\"  => [undefined, undefined, undefined, \"\\d+\", undefined, undefined]\n  // \"/*\"            => [\"/\", undefined, undefined, undefined, undefined, \"*\"]\n  '([\\\\/.])?(?:(?:\\\\:(\\\\w+)(?:\\\\(((?:\\\\\\\\.|[^()])+)\\\\))?|\\\\(((?:\\\\\\\\.|[^()])+)\\\\))([+*?])?|(\\\\*))'\n].join('|'), 'g');\n\n/**\n * Parse a string for the raw tokens.\n *\n * @param  {String} str\n * @return {Array}\n */\nfunction parse (str) {\n  var tokens = [];\n  var key = 0;\n  var index = 0;\n  var path = '';\n  var res;\n\n  while ((res = PATH_REGEXP.exec(str)) != null) {\n    var m = res[0];\n    var escaped = res[1];\n    var offset = res.index;\n    path += str.slice(index, offset);\n    index = offset + m.length;\n\n    // Ignore already escaped sequences.\n    if (escaped) {\n      path += escaped[1];\n      continue\n    }\n\n    // Push the current path onto the tokens.\n    if (path) {\n      tokens.push(path);\n      path = '';\n    }\n\n    var prefix = res[2];\n    var name = res[3];\n    var capture = res[4];\n    var group = res[5];\n    var suffix = res[6];\n    var asterisk = res[7];\n\n    var repeat = suffix === '+' || suffix === '*';\n    var optional = suffix === '?' || suffix === '*';\n    var delimiter = prefix || '/';\n    var pattern = capture || group || (asterisk ? '.*' : '[^' + delimiter + ']+?');\n\n    tokens.push({\n      name: name || key++,\n      prefix: prefix || '',\n      delimiter: delimiter,\n      optional: optional,\n      repeat: repeat,\n      pattern: escapeGroup(pattern)\n    });\n  }\n\n  // Match any characters still remaining.\n  if (index < str.length) {\n    path += str.substr(index);\n  }\n\n  // If the path exists, push it onto the end.\n  if (path) {\n    tokens.push(path);\n  }\n\n  return tokens\n}\n\n/**\n * Compile a string to a template function for the path.\n *\n * @param  {String}   str\n * @return {Function}\n */\nfunction compile (str) {\n  return tokensToFunction(parse(str))\n}\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nfunction tokensToFunction (tokens) {\n  // Compile all the tokens into regexps.\n  var matches = new Array(tokens.length);\n\n  // Compile all the patterns before compilation.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] === 'object') {\n      matches[i] = new RegExp('^' + tokens[i].pattern + '$');\n    }\n  }\n\n  return function (obj) {\n    var path = '';\n    var data = obj || {};\n\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i];\n\n      if (typeof token === 'string') {\n        path += token;\n\n        continue\n      }\n\n      var value = data[token.name];\n      var segment;\n\n      if (value == null) {\n        if (token.optional) {\n          continue\n        } else {\n          throw new TypeError('Expected \"' + token.name + '\" to be defined')\n        }\n      }\n\n      if (isarray(value)) {\n        if (!token.repeat) {\n          throw new TypeError('Expected \"' + token.name + '\" to not repeat, but received \"' + value + '\"')\n        }\n\n        if (value.length === 0) {\n          if (token.optional) {\n            continue\n          } else {\n            throw new TypeError('Expected \"' + token.name + '\" to not be empty')\n          }\n        }\n\n        for (var j = 0; j < value.length; j++) {\n          segment = encodeURIComponent(value[j]);\n\n          if (!matches[i].test(segment)) {\n            throw new TypeError('Expected all \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n          }\n\n          path += (j === 0 ? token.prefix : token.delimiter) + segment;\n        }\n\n        continue\n      }\n\n      segment = encodeURIComponent(value);\n\n      if (!matches[i].test(segment)) {\n        throw new TypeError('Expected \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n      }\n\n      path += token.prefix + segment;\n    }\n\n    return path\n  }\n}\n\n/**\n * Escape a regular expression string.\n *\n * @param  {String} str\n * @return {String}\n */\nfunction escapeString (str) {\n  return str.replace(/([.+*?=^!:${}()[\\]|\\/])/g, '\\\\$1')\n}\n\n/**\n * Escape the capturing group by escaping special characters and meaning.\n *\n * @param  {String} group\n * @return {String}\n */\nfunction escapeGroup (group) {\n  return group.replace(/([=!:$\\/()])/g, '\\\\$1')\n}\n\n/**\n * Attach the keys as a property of the regexp.\n *\n * @param  {RegExp} re\n * @param  {Array}  keys\n * @return {RegExp}\n */\nfunction attachKeys (re, keys) {\n  re.keys = keys;\n  return re\n}\n\n/**\n * Get the flags for a regexp from the options.\n *\n * @param  {Object} options\n * @return {String}\n */\nfunction flags (options) {\n  return options.sensitive ? '' : 'i'\n}\n\n/**\n * Pull out keys from a regexp.\n *\n * @param  {RegExp} path\n * @param  {Array}  keys\n * @return {RegExp}\n */\nfunction regexpToRegexp (path, keys) {\n  // Use a negative lookahead to match only capturing groups.\n  var groups = path.source.match(/\\((?!\\?)/g);\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name: i,\n        prefix: null,\n        delimiter: null,\n        optional: false,\n        repeat: false,\n        pattern: null\n      });\n    }\n  }\n\n  return attachKeys(path, keys)\n}\n\n/**\n * Transform an array into a regexp.\n *\n * @param  {Array}  path\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction arrayToRegexp (path, keys, options) {\n  var parts = [];\n\n  for (var i = 0; i < path.length; i++) {\n    parts.push(pathToRegexp(path[i], keys, options).source);\n  }\n\n  var regexp = new RegExp('(?:' + parts.join('|') + ')', flags(options));\n\n  return attachKeys(regexp, keys)\n}\n\n/**\n * Create a path regexp from string input.\n *\n * @param  {String} path\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction stringToRegexp (path, keys, options) {\n  var tokens = parse(path);\n  var re = tokensToRegExp(tokens, options);\n\n  // Attach keys back to the regexp.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] !== 'string') {\n      keys.push(tokens[i]);\n    }\n  }\n\n  return attachKeys(re, keys)\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n *\n * @param  {Array}  tokens\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction tokensToRegExp (tokens, options) {\n  options = options || {};\n\n  var strict = options.strict;\n  var end = options.end !== false;\n  var route = '';\n  var lastToken = tokens[tokens.length - 1];\n  var endsWithSlash = typeof lastToken === 'string' && /\\/$/.test(lastToken);\n\n  // Iterate over the tokens and create our regexp string.\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i];\n\n    if (typeof token === 'string') {\n      route += escapeString(token);\n    } else {\n      var prefix = escapeString(token.prefix);\n      var capture = token.pattern;\n\n      if (token.repeat) {\n        capture += '(?:' + prefix + capture + ')*';\n      }\n\n      if (token.optional) {\n        if (prefix) {\n          capture = '(?:' + prefix + '(' + capture + '))?';\n        } else {\n          capture = '(' + capture + ')?';\n        }\n      } else {\n        capture = prefix + '(' + capture + ')';\n      }\n\n      route += capture;\n    }\n  }\n\n  // In non-strict mode we allow a slash at the end of match. If the path to\n  // match already ends with a slash, we remove it for consistency. The slash\n  // is valid at the end of a path match, not in the middle. This is important\n  // in non-ending mode, where \"/test/\" shouldn't match \"/test//route\".\n  if (!strict) {\n    route = (endsWithSlash ? route.slice(0, -2) : route) + '(?:\\\\/(?=$))?';\n  }\n\n  if (end) {\n    route += '$';\n  } else {\n    // In non-ending mode, we need the capturing groups to match as much as\n    // possible by using a positive lookahead to the end or next path segment.\n    route += strict && endsWithSlash ? '' : '(?=\\\\/|$)';\n  }\n\n  return new RegExp('^' + route, flags(options))\n}\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n *\n * @param  {(String|RegExp|Array)} path\n * @param  {Array}                 [keys]\n * @param  {Object}                [options]\n * @return {RegExp}\n */\nfunction pathToRegexp (path, keys, options) {\n  keys = keys || [];\n\n  if (!isarray(keys)) {\n    options = keys;\n    keys = [];\n  } else if (!options) {\n    options = {};\n  }\n\n  if (path instanceof RegExp) {\n    return regexpToRegexp(path, keys, options)\n  }\n\n  if (isarray(path)) {\n    return arrayToRegexp(path, keys, options)\n  }\n\n  return stringToRegexp(path, keys, options)\n}\n\npathToRegexp_1.parse = parse_1;\npathToRegexp_1.compile = compile_1;\npathToRegexp_1.tokensToFunction = tokensToFunction_1;\npathToRegexp_1.tokensToRegExp = tokensToRegExp_1;\n\n/**\n   * Module dependencies.\n   */\n\n  \n\n  /**\n   * Short-cuts for global-object checks\n   */\n\n  var hasDocument = ('undefined' !== typeof document);\n  var hasWindow = ('undefined' !== typeof window);\n  var hasHistory = ('undefined' !== typeof history);\n  var hasProcess = typeof process !== 'undefined';\n\n  /**\n   * Detect click event\n   */\n  var clickEvent = hasDocument && document.ontouchstart ? 'touchstart' : 'click';\n\n  /**\n   * To work properly with the URL\n   * history.location generated polyfill in https://github.com/devote/HTML5-History-API\n   */\n\n  var isLocation = hasWindow && !!(window.history.location || window.location);\n\n  /**\n   * The page instance\n   * @api private\n   */\n  function Page() {\n    // public things\n    this.callbacks = [];\n    this.exits = [];\n    this.current = '';\n    this.len = 0;\n\n    // private things\n    this._decodeURLComponents = true;\n    this._base = '';\n    this._strict = false;\n    this._running = false;\n    this._hashbang = false;\n\n    // bound functions\n    this.clickHandler = this.clickHandler.bind(this);\n    this._onpopstate = this._onpopstate.bind(this);\n  }\n\n  /**\n   * Configure the instance of page. This can be called multiple times.\n   *\n   * @param {Object} options\n   * @api public\n   */\n\n  Page.prototype.configure = function(options) {\n    var opts = options || {};\n\n    this._window = opts.window || (hasWindow && window);\n    this._decodeURLComponents = opts.decodeURLComponents !== false;\n    this._popstate = opts.popstate !== false && hasWindow;\n    this._click = opts.click !== false && hasDocument;\n    this._hashbang = !!opts.hashbang;\n\n    var _window = this._window;\n    if(this._popstate) {\n      _window.addEventListener('popstate', this._onpopstate, false);\n    } else if(hasWindow) {\n      _window.removeEventListener('popstate', this._onpopstate, false);\n    }\n\n    if (this._click) {\n      _window.document.addEventListener(clickEvent, this.clickHandler, false);\n    } else if(hasDocument) {\n      _window.document.removeEventListener(clickEvent, this.clickHandler, false);\n    }\n\n    if(this._hashbang && hasWindow && !hasHistory) {\n      _window.addEventListener('hashchange', this._onpopstate, false);\n    } else if(hasWindow) {\n      _window.removeEventListener('hashchange', this._onpopstate, false);\n    }\n  };\n\n  /**\n   * Get or set basepath to `path`.\n   *\n   * @param {string} path\n   * @api public\n   */\n\n  Page.prototype.base = function(path) {\n    if (0 === arguments.length) return this._base;\n    this._base = path;\n  };\n\n  /**\n   * Gets the `base`, which depends on whether we are using History or\n   * hashbang routing.\n\n   * @api private\n   */\n  Page.prototype._getBase = function() {\n    var base = this._base;\n    if(!!base) return base;\n    var loc = hasWindow && this._window && this._window.location;\n\n    if(hasWindow && this._hashbang && loc && loc.protocol === 'file:') {\n      base = loc.pathname;\n    }\n\n    return base;\n  };\n\n  /**\n   * Get or set strict path matching to `enable`\n   *\n   * @param {boolean} enable\n   * @api public\n   */\n\n  Page.prototype.strict = function(enable) {\n    if (0 === arguments.length) return this._strict;\n    this._strict = enable;\n  };\n\n\n  /**\n   * Bind with the given `options`.\n   *\n   * Options:\n   *\n   *    - `click` bind to click events [true]\n   *    - `popstate` bind to popstate [true]\n   *    - `dispatch` perform initial dispatch [true]\n   *\n   * @param {Object} options\n   * @api public\n   */\n\n  Page.prototype.start = function(options) {\n    var opts = options || {};\n    this.configure(opts);\n\n    if (false === opts.dispatch) return;\n    this._running = true;\n\n    var url;\n    if(isLocation) {\n      var window = this._window;\n      var loc = window.location;\n\n      if(this._hashbang && ~loc.hash.indexOf('#!')) {\n        url = loc.hash.substr(2) + loc.search;\n      } else if (this._hashbang) {\n        url = loc.search + loc.hash;\n      } else {\n        url = loc.pathname + loc.search + loc.hash;\n      }\n    }\n\n    this.replace(url, null, true, opts.dispatch);\n  };\n\n  /**\n   * Unbind click and popstate event handlers.\n   *\n   * @api public\n   */\n\n  Page.prototype.stop = function() {\n    if (!this._running) return;\n    this.current = '';\n    this.len = 0;\n    this._running = false;\n\n    var window = this._window;\n    this._click && window.document.removeEventListener(clickEvent, this.clickHandler, false);\n    hasWindow && window.removeEventListener('popstate', this._onpopstate, false);\n    hasWindow && window.removeEventListener('hashchange', this._onpopstate, false);\n  };\n\n  /**\n   * Show `path` with optional `state` object.\n   *\n   * @param {string} path\n   * @param {Object=} state\n   * @param {boolean=} dispatch\n   * @param {boolean=} push\n   * @return {!Context}\n   * @api public\n   */\n\n  Page.prototype.show = function(path, state, dispatch, push) {\n    var ctx = new Context(path, state, this),\n      prev = this.prevContext;\n    this.prevContext = ctx;\n    this.current = ctx.path;\n    if (false !== dispatch) this.dispatch(ctx, prev);\n    if (false !== ctx.handled && false !== push) ctx.pushState();\n    return ctx;\n  };\n\n  /**\n   * Goes back in the history\n   * Back should always let the current route push state and then go back.\n   *\n   * @param {string} path - fallback path to go back if no more history exists, if undefined defaults to page.base\n   * @param {Object=} state\n   * @api public\n   */\n\n  Page.prototype.back = function(path, state) {\n    var page = this;\n    if (this.len > 0) {\n      var window = this._window;\n      // this may need more testing to see if all browsers\n      // wait for the next tick to go back in history\n      hasHistory && window.history.back();\n      this.len--;\n    } else if (path) {\n      setTimeout(function() {\n        page.show(path, state);\n      });\n    } else {\n      setTimeout(function() {\n        page.show(page._getBase(), state);\n      });\n    }\n  };\n\n  /**\n   * Register route to redirect from one path to other\n   * or just redirect to another route\n   *\n   * @param {string} from - if param 'to' is undefined redirects to 'from'\n   * @param {string=} to\n   * @api public\n   */\n  Page.prototype.redirect = function(from, to) {\n    var inst = this;\n\n    // Define route from a path to another\n    if ('string' === typeof from && 'string' === typeof to) {\n      page.call(this, from, function(e) {\n        setTimeout(function() {\n          inst.replace(/** @type {!string} */ (to));\n        }, 0);\n      });\n    }\n\n    // Wait for the push state and replace it with another\n    if ('string' === typeof from && 'undefined' === typeof to) {\n      setTimeout(function() {\n        inst.replace(from);\n      }, 0);\n    }\n  };\n\n  /**\n   * Replace `path` with optional `state` object.\n   *\n   * @param {string} path\n   * @param {Object=} state\n   * @param {boolean=} init\n   * @param {boolean=} dispatch\n   * @return {!Context}\n   * @api public\n   */\n\n\n  Page.prototype.replace = function(path, state, init, dispatch) {\n    var ctx = new Context(path, state, this),\n      prev = this.prevContext;\n    this.prevContext = ctx;\n    this.current = ctx.path;\n    ctx.init = init;\n    ctx.save(); // save before dispatching, which may redirect\n    if (false !== dispatch) this.dispatch(ctx, prev);\n    return ctx;\n  };\n\n  /**\n   * Dispatch the given `ctx`.\n   *\n   * @param {Context} ctx\n   * @api private\n   */\n\n  Page.prototype.dispatch = function(ctx, prev) {\n    var i = 0, j = 0, page = this;\n\n    function nextExit() {\n      var fn = page.exits[j++];\n      if (!fn) return nextEnter();\n      fn(prev, nextExit);\n    }\n\n    function nextEnter() {\n      var fn = page.callbacks[i++];\n\n      if (ctx.path !== page.current) {\n        ctx.handled = false;\n        return;\n      }\n      if (!fn) return unhandled.call(page, ctx);\n      fn(ctx, nextEnter);\n    }\n\n    if (prev) {\n      nextExit();\n    } else {\n      nextEnter();\n    }\n  };\n\n  /**\n   * Register an exit route on `path` with\n   * callback `fn()`, which will be called\n   * on the previous context when a new\n   * page is visited.\n   */\n  Page.prototype.exit = function(path, fn) {\n    if (typeof path === 'function') {\n      return this.exit('*', path);\n    }\n\n    var route = new Route(path, null, this);\n    for (var i = 1; i < arguments.length; ++i) {\n      this.exits.push(route.middleware(arguments[i]));\n    }\n  };\n\n  /**\n   * Handle \"click\" events.\n   */\n\n  /* jshint +W054 */\n  Page.prototype.clickHandler = function(e) {\n    if (1 !== this._which(e)) return;\n\n    if (e.metaKey || e.ctrlKey || e.shiftKey) return;\n    if (e.defaultPrevented) return;\n\n    // ensure link\n    // use shadow dom when available if not, fall back to composedPath()\n    // for browsers that only have shady\n    var el = e.target;\n    var eventPath = e.path || (e.composedPath ? e.composedPath() : null);\n\n    if(eventPath) {\n      for (var i = 0; i < eventPath.length; i++) {\n        if (!eventPath[i].nodeName) continue;\n        if (eventPath[i].nodeName.toUpperCase() !== 'A') continue;\n        if (!eventPath[i].href) continue;\n\n        el = eventPath[i];\n        break;\n      }\n    }\n\n    // continue ensure link\n    // el.nodeName for svg links are 'a' instead of 'A'\n    while (el && 'A' !== el.nodeName.toUpperCase()) el = el.parentNode;\n    if (!el || 'A' !== el.nodeName.toUpperCase()) return;\n\n    // check if link is inside an svg\n    // in this case, both href and target are always inside an object\n    var svg = (typeof el.href === 'object') && el.href.constructor.name === 'SVGAnimatedString';\n\n    // Ignore if tag has\n    // 1. \"download\" attribute\n    // 2. rel=\"external\" attribute\n    if (el.hasAttribute('download') || el.getAttribute('rel') === 'external') return;\n\n    // ensure non-hash for the same path\n    var link = el.getAttribute('href');\n    if(!this._hashbang && this._samePath(el) && (el.hash || '#' === link)) return;\n\n    // Check for mailto: in the href\n    if (link && link.indexOf('mailto:') > -1) return;\n\n    // check target\n    // svg target is an object and its desired value is in .baseVal property\n    if (svg ? el.target.baseVal : el.target) return;\n\n    // x-origin\n    // note: svg links that are not relative don't call click events (and skip page.js)\n    // consequently, all svg links tested inside page.js are relative and in the same origin\n    if (!svg && !this.sameOrigin(el.href)) return;\n\n    // rebuild path\n    // There aren't .pathname and .search properties in svg links, so we use href\n    // Also, svg href is an object and its desired value is in .baseVal property\n    var path = svg ? el.href.baseVal : (el.pathname + el.search + (el.hash || ''));\n\n    path = path[0] !== '/' ? '/' + path : path;\n\n    // strip leading \"/[drive letter]:\" on NW.js on Windows\n    if (hasProcess && path.match(/^\\/[a-zA-Z]:\\//)) {\n      path = path.replace(/^\\/[a-zA-Z]:\\//, '/');\n    }\n\n    // same page\n    var orig = path;\n    var pageBase = this._getBase();\n\n    if (path.indexOf(pageBase) === 0) {\n      path = path.substr(pageBase.length);\n    }\n\n    if (this._hashbang) path = path.replace('#!', '');\n\n    if (pageBase && orig === path && (!isLocation || this._window.location.protocol !== 'file:')) {\n      return;\n    }\n\n    e.preventDefault();\n    this.show(orig);\n  };\n\n  /**\n   * Handle \"populate\" events.\n   * @api private\n   */\n\n  Page.prototype._onpopstate = (function () {\n    var loaded = false;\n    if ( ! hasWindow ) {\n      return function () {};\n    }\n    if (hasDocument && document.readyState === 'complete') {\n      loaded = true;\n    } else {\n      window.addEventListener('load', function() {\n        setTimeout(function() {\n          loaded = true;\n        }, 0);\n      });\n    }\n    return function onpopstate(e) {\n      if (!loaded) return;\n      var page = this;\n      if (e.state) {\n        var path = e.state.path;\n        page.replace(path, e.state);\n      } else if (isLocation) {\n        var loc = page._window.location;\n        page.show(loc.pathname + loc.search + loc.hash, undefined, undefined, false);\n      }\n    };\n  })();\n\n  /**\n   * Event button.\n   */\n  Page.prototype._which = function(e) {\n    e = e || (hasWindow && this._window.event);\n    return null == e.which ? e.button : e.which;\n  };\n\n  /**\n   * Convert to a URL object\n   * @api private\n   */\n  Page.prototype._toURL = function(href) {\n    var window = this._window;\n    if(typeof URL === 'function' && isLocation) {\n      return new URL(href, window.location.toString());\n    } else if (hasDocument) {\n      var anc = window.document.createElement('a');\n      anc.href = href;\n      return anc;\n    }\n  };\n\n  /**\n   * Check if `href` is the same origin.\n   * @param {string} href\n   * @api public\n   */\n  Page.prototype.sameOrigin = function(href) {\n    if(!href || !isLocation) return false;\n\n    var url = this._toURL(href);\n    var window = this._window;\n\n    var loc = window.location;\n\n    /*\n       When the port is the default http port 80 for http, or 443 for\n       https, internet explorer 11 returns an empty string for loc.port,\n       so we need to compare loc.port with an empty string if url.port\n       is the default port 80 or 443.\n       Also the comparition with `port` is changed from `===` to `==` because\n       `port` can be a string sometimes. This only applies to ie11.\n    */\n    return loc.protocol === url.protocol &&\n      loc.hostname === url.hostname &&\n      (loc.port === url.port || loc.port === '' && (url.port == 80 || url.port == 443)); // jshint ignore:line\n  };\n\n  /**\n   * @api private\n   */\n  Page.prototype._samePath = function(url) {\n    if(!isLocation) return false;\n    var window = this._window;\n    var loc = window.location;\n    return url.pathname === loc.pathname &&\n      url.search === loc.search;\n  };\n\n  /**\n   * Remove URL encoding from the given `str`.\n   * Accommodates whitespace in both x-www-form-urlencoded\n   * and regular percent-encoded form.\n   *\n   * @param {string} val - URL component to decode\n   * @api private\n   */\n  Page.prototype._decodeURLEncodedURIComponent = function(val) {\n    if (typeof val !== 'string') { return val; }\n    return this._decodeURLComponents ? decodeURIComponent(val.replace(/\\+/g, ' ')) : val;\n  };\n\n  /**\n   * Create a new `page` instance and function\n   */\n  function createPage() {\n    var pageInstance = new Page();\n\n    function pageFn(/* args */) {\n      return page.apply(pageInstance, arguments);\n    }\n\n    // Copy all of the things over. In 2.0 maybe we use setPrototypeOf\n    pageFn.callbacks = pageInstance.callbacks;\n    pageFn.exits = pageInstance.exits;\n    pageFn.base = pageInstance.base.bind(pageInstance);\n    pageFn.strict = pageInstance.strict.bind(pageInstance);\n    pageFn.start = pageInstance.start.bind(pageInstance);\n    pageFn.stop = pageInstance.stop.bind(pageInstance);\n    pageFn.show = pageInstance.show.bind(pageInstance);\n    pageFn.back = pageInstance.back.bind(pageInstance);\n    pageFn.redirect = pageInstance.redirect.bind(pageInstance);\n    pageFn.replace = pageInstance.replace.bind(pageInstance);\n    pageFn.dispatch = pageInstance.dispatch.bind(pageInstance);\n    pageFn.exit = pageInstance.exit.bind(pageInstance);\n    pageFn.configure = pageInstance.configure.bind(pageInstance);\n    pageFn.sameOrigin = pageInstance.sameOrigin.bind(pageInstance);\n    pageFn.clickHandler = pageInstance.clickHandler.bind(pageInstance);\n\n    pageFn.create = createPage;\n\n    Object.defineProperty(pageFn, 'len', {\n      get: function(){\n        return pageInstance.len;\n      },\n      set: function(val) {\n        pageInstance.len = val;\n      }\n    });\n\n    Object.defineProperty(pageFn, 'current', {\n      get: function(){\n        return pageInstance.current;\n      },\n      set: function(val) {\n        pageInstance.current = val;\n      }\n    });\n\n    // In 2.0 these can be named exports\n    pageFn.Context = Context;\n    pageFn.Route = Route;\n\n    return pageFn;\n  }\n\n  /**\n   * Register `path` with callback `fn()`,\n   * or route `path`, or redirection,\n   * or `page.start()`.\n   *\n   *   page(fn);\n   *   page('*', fn);\n   *   page('/user/:id', load, user);\n   *   page('/user/' + user.id, { some: 'thing' });\n   *   page('/user/' + user.id);\n   *   page('/from', '/to')\n   *   page();\n   *\n   * @param {string|!Function|!Object} path\n   * @param {Function=} fn\n   * @api public\n   */\n\n  function page(path, fn) {\n    // <callback>\n    if ('function' === typeof path) {\n      return page.call(this, '*', path);\n    }\n\n    // route <path> to <callback ...>\n    if ('function' === typeof fn) {\n      var route = new Route(/** @type {string} */ (path), null, this);\n      for (var i = 1; i < arguments.length; ++i) {\n        this.callbacks.push(route.middleware(arguments[i]));\n      }\n      // show <path> with [state]\n    } else if ('string' === typeof path) {\n      this['string' === typeof fn ? 'redirect' : 'show'](path, fn);\n      // start [options]\n    } else {\n      this.start(path);\n    }\n  }\n\n  /**\n   * Unhandled `ctx`. When it's not the initial\n   * popstate then redirect. If you wish to handle\n   * 404s on your own use `page('*', callback)`.\n   *\n   * @param {Context} ctx\n   * @api private\n   */\n  function unhandled(ctx) {\n    if (ctx.handled) return;\n    var current;\n    var page = this;\n    var window = page._window;\n\n    if (page._hashbang) {\n      current = isLocation && this._getBase() + window.location.hash.replace('#!', '');\n    } else {\n      current = isLocation && window.location.pathname + window.location.search;\n    }\n\n    if (current === ctx.canonicalPath) return;\n    page.stop();\n    ctx.handled = false;\n    isLocation && (window.location.href = ctx.canonicalPath);\n  }\n\n  /**\n   * Escapes RegExp characters in the given string.\n   *\n   * @param {string} s\n   * @api private\n   */\n  function escapeRegExp(s) {\n    return s.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, '\\\\$1');\n  }\n\n  /**\n   * Initialize a new \"request\" `Context`\n   * with the given `path` and optional initial `state`.\n   *\n   * @constructor\n   * @param {string} path\n   * @param {Object=} state\n   * @api public\n   */\n\n  function Context(path, state, pageInstance) {\n    var _page = this.page = pageInstance || page;\n    var window = _page._window;\n    var hashbang = _page._hashbang;\n\n    var pageBase = _page._getBase();\n    if ('/' === path[0] && 0 !== path.indexOf(pageBase)) path = pageBase + (hashbang ? '#!' : '') + path;\n    var i = path.indexOf('?');\n\n    this.canonicalPath = path;\n    var re = new RegExp('^' + escapeRegExp(pageBase));\n    this.path = path.replace(re, '') || '/';\n    if (hashbang) this.path = this.path.replace('#!', '') || '/';\n\n    this.title = (hasDocument && window.document.title);\n    this.state = state || {};\n    this.state.path = path;\n    this.querystring = ~i ? _page._decodeURLEncodedURIComponent(path.slice(i + 1)) : '';\n    this.pathname = _page._decodeURLEncodedURIComponent(~i ? path.slice(0, i) : path);\n    this.params = {};\n\n    // fragment\n    this.hash = '';\n    if (!hashbang) {\n      if (!~this.path.indexOf('#')) return;\n      var parts = this.path.split('#');\n      this.path = this.pathname = parts[0];\n      this.hash = _page._decodeURLEncodedURIComponent(parts[1]) || '';\n      this.querystring = this.querystring.split('#')[0];\n    }\n  }\n\n  /**\n   * Push state.\n   *\n   * @api private\n   */\n\n  Context.prototype.pushState = function() {\n    var page = this.page;\n    var window = page._window;\n    var hashbang = page._hashbang;\n\n    page.len++;\n    if (hasHistory) {\n        window.history.pushState(this.state, this.title,\n          hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n    }\n  };\n\n  /**\n   * Save the context state.\n   *\n   * @api public\n   */\n\n  Context.prototype.save = function() {\n    var page = this.page;\n    if (hasHistory) {\n        page._window.history.replaceState(this.state, this.title,\n          page._hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n    }\n  };\n\n  /**\n   * Initialize `Route` with the given HTTP `path`,\n   * and an array of `callbacks` and `options`.\n   *\n   * Options:\n   *\n   *   - `sensitive`    enable case-sensitive routes\n   *   - `strict`       enable strict matching for trailing slashes\n   *\n   * @constructor\n   * @param {string} path\n   * @param {Object=} options\n   * @api private\n   */\n\n  function Route(path, options, page) {\n    var _page = this.page = page || globalPage;\n    var opts = options || {};\n    opts.strict = opts.strict || _page._strict;\n    this.path = (path === '*') ? '(.*)' : path;\n    this.method = 'GET';\n    this.regexp = pathToRegexp_1(this.path, this.keys = [], opts);\n  }\n\n  /**\n   * Return route middleware with\n   * the given callback `fn()`.\n   *\n   * @param {Function} fn\n   * @return {Function}\n   * @api public\n   */\n\n  Route.prototype.middleware = function(fn) {\n    var self = this;\n    return function(ctx, next) {\n      if (self.match(ctx.path, ctx.params)) {\n        ctx.routePath = self.path;\n        return fn(ctx, next);\n      }\n      next();\n    };\n  };\n\n  /**\n   * Check if this route matches `path`, if so\n   * populate `params`.\n   *\n   * @param {string} path\n   * @param {Object} params\n   * @return {boolean}\n   * @api private\n   */\n\n  Route.prototype.match = function(path, params) {\n    var keys = this.keys,\n      qsIndex = path.indexOf('?'),\n      pathname = ~qsIndex ? path.slice(0, qsIndex) : path,\n      m = this.regexp.exec(decodeURIComponent(pathname));\n\n    if (!m) return false;\n\n    delete params[0];\n\n    for (var i = 1, len = m.length; i < len; ++i) {\n      var key = keys[i - 1];\n      var val = this.page._decodeURLEncodedURIComponent(m[i]);\n      if (val !== undefined || !(hasOwnProperty.call(params, key.name))) {\n        params[key.name] = val;\n      }\n    }\n\n    return true;\n  };\n\n\n  /**\n   * Module exports.\n   */\n\n  var globalPage = createPage();\n  var page_js = globalPage;\n  var default_1 = globalPage;\n\npage_js.default = default_1;\n\nexport default page_js;\n","export default function(ctx) {\n  if (window.ga !== undefined) {\n    ga('set', {\n      page: ctx.canonicalPath,\n      title: document.title\n    });\n    ga('send', 'pageview');\n  }\n}","export default function(path) {\n  Array.from(document.querySelectorAll(`.navigation-list li a`)).forEach(el => {\n    if (el.getAttribute('href') === path) {\n      el.classList.add('active');\n    } else {\n      el.classList.remove('active');\n    }\n  });\n}","import page from \"page\";\n\nexport function SearchForm() {\n  return document.createRange().createContextualFragment(`\n  <form method=\"GET\" class=\"form\">\n  <div class=\"relative mb-4\">\n    <select id=\"searchOmniUnitElement\" class=\"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline\">\n      <option value=\"\">Element</option>\n      <option value=\"Fire\">Fire</option>\n      <option value=\"Water\">Water</option>\n      <option value=\"Earth\">Earth</option>\n      <option value=\"Thunder\">Thunder</option>\n      <option value=\"Light\">Light</option>\n      <option value=\"Dark\">Dark</option>\n    </select>\n    <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\n      <svg class=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"/></svg>\n    </div>\n  </div>\n  <div class=\"relative mb-4\">\n    <select multiple id=\"searchOmniUnitKeywords\" class=\"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline\">\n      <option value=\"\">Keywords</option>\n    </select>\n  </div>\n  <div class=\"relative mb-4\">\n    <span>\n      <input class=\"focus:outline-0 bg-transparent border-b border-gray-500 focus:border-green-500 placeholder-gray-600 py-2 pr-4 pl-10 w-full appearance-none leading-normal\" type=\"text\" placeholder=\"Omni unit name\" id=\"searchOmniUnitName\">\n    </span>\n    <div class=\"pointer-events-none absolute inset-y-0 left-0 pl-4 flex items-center\">\n      <svg class=\"fill-current pointer-events-none text-gray-600 w-4 h-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z\"></path></svg>\n    </div>\n  </div>\n</form>\n  `);\n}\n\n\nconst formData = new FormData();\nexport function Search() {\n  document.getElementById('searchOmniUnitName').addEventListener('keydown', (e) => {\n    if (e.key === 'Enter') {\n      if (e.target.value !== \"\") {\n        if (formData.has('name')) {\n          formData.delete('name');\n        }\n        formData.append('name', e.target.value);  \n      } else {\n        formData.delete('name');\n      }\n      e.preventDefault();\n      showSearchResult(formData); \n    }\n  });\n\n  document.getElementById('searchOmniUnitElement').onchange = (e) => {\n    if (e.target.value !== \"\") {\n      if (formData.has('element')) {\n        formData.delete('element');\n      }\n      formData.append('element', e.target.value);\n    } else {\n      formData.delete('element');\n    }\n    e.preventDefault();\n    showSearchResult(formData);\n  }\n\n  document.getElementById('searchOmniUnitKeywords').onchange = (e) => {\n    var opts = [], opt, optValue;\n\n    for (let i = 0; i < e.target.options.length; i++) {\n      opt = e.target.options[i];\n      optValue = opt.value;\n      if (opt.selected) {\n        opts.push(optValue);\n      }\n    }\n\n    if (Array.isArray(opts) && opts.length > 0) {\n      if (formData.has('keywords')) {\n        formData.delete('keywords');\n      }\n      formData.append('keywords', encodeURIComponent(opts.join(\",\")));\n    } else {\n      formData.delete('keywords');\n    }\n\n    e.preventDefault();\n    showSearchResult(formData);\n  }\n}\n\nfunction showSearchResult(formData) {\n  const queryString = new URLSearchParams(formData).toString();\n  if (queryString) {\n    page.show(`${window.location.pathname}?${queryString}`);\n  } else {\n    page.show(`${window.location.pathname}`);\n  }\n  // Set previous page position Y to 0 when searching\n  if (window.previousOmniUnitsPage) {\n    window.previousOmniUnitsPage = 0;\n  }\n}","export function getOmniUnitKeywords() {\n    const omniUnitKeywords = [\"extra action\", \"evasion\", \"activates BB/SBB/UBB twice\",\n        \"DoT mitigation\", \"negate all status ailments\",\n        \"negates all status ailments\",\n        \"negates all status ailments for all allies\",\n        \"Stealth\", \"normal attacks may hit all foes\",\n        \"raises normal hit amount\", \"status ailment removal\",\n        \"def ignoring effect\",\n        \"reduces BB gauge required\",\n        \"reduction to BB activation cost\",\n        \"fills OD gauge\",\n        \"boosts OD gauge\",\n        \"status ailments infliction\",\n        \"resistance against KO attack\",\n        \"resistance against 1 KO attack\",\n        \"resistance against 2 KO attacks\",\n        \"Adds Doom effect purge from self to BB/UBB\",\n        \"purges Doom\",\n        \"raises allies from KO\",\n        \"purges LS and ES Lock\",\n        \"boost to Summoner Avatar EXP gained\",\n        \"boost to Summoner EXP gained\",\n        \"boost to EXP gained\",\n        \"removes all status ailments\",\n        \"boosts ABP and CBP gain\",\n        \"elemental damage reduction\"\n    ];\n    return omniUnitKeywords.map(keyword => {\n        return {\n            value: keyword,\n            label: keyword,\n            id: keyword\n        }\n    });\n}\n\nexport function getDbbKeywords () {\n    const dbbKeywords = [\n        \"100% evasion\",\n        \"80% evasion\",\n        \"OD gauge\",\n        \"activates BB/SBB/UBB twice\",\n        \"purges LS and ES Lock\",\n        \"100% DoT reduction\",\n        \"raises normal hit amount\",\n        \"adds status ailment infliction to attack\",\n        \"raises allies from KO\",\n        \"KO resistance\",\n        \"perform 1 extra action within the same turn\"\n    ];\n\n    return dbbKeywords.map(keyword => {\n        return {\n            value: keyword,\n            label: keyword,\n            id: keyword\n        }\n    });\n}","import { SearchForm, Search } from \"./components/Search.js\";\nimport Skeleton from \"./components/Skeleton.js\";\nimport { getOmniUnitKeywords } from \"../utils/keywords.js\";\nimport setActiveMenu from \"../utils/setActiveMenu.js\";\nimport trackUrl from \"../utils/trackUrl.js\";\nimport { requestOmniUnits } from \"../utils/request.js\";\n\nlet searchOmniUnitKeywordsEl;\nexport default function (ctx) {\n  trackUrl(ctx);\n  setActiveMenu(ctx.path);\n  document.title = ctx.title = 'Brave Frontier Wiki';\n  document.querySelector('main').textContent = '';\n  document.querySelector('main').appendChild(SearchForm());\n  document.querySelector('main').appendChild(Skeleton());\n  searchOmniUnitKeywordsEl = new Choices(document.getElementById('searchOmniUnitKeywords'), {\n    items: getOmniUnitKeywords(),\n    choices: getOmniUnitKeywords(),\n    removeItemButton: true,\n    maxItemCount: 3,\n    maxItemText: (maxItemCount) => {\n      return `Only ${maxItemCount} values can be added`;\n    }\n  });\n  let filteredOmniUnits;\n  if (ctx.state.omniunits) {\n    filteredOmniUnits = filterOmniUnits(ctx);\n    import(\"./components/Content.js\").then(module => {\n      module.default(filteredOmniUnits);\n      Search();\n    });\n  } else {\n    requestOmniUnits().then(data => {\n      ctx.state.omniunits = data;\n      ctx.save();\n      filteredOmniUnits = filterOmniUnits(ctx);\n      import(\"./components/Content.js\").then(module => {\n        module.default(filteredOmniUnits);\n        Search();\n      });\n    });\n  }\n}\n\nfunction filterOmniUnits(ctx) {\n  let filteredOmniUnits;\n  if (ctx.querystring) {\n    const searchParams = new URLSearchParams(ctx.querystring);\n    const searchName = searchParams.get('name');\n    const searchElement = searchParams.get('element');\n    const searchKeywords = searchParams.get('keywords');\n    const selectedKeywords = (searchKeywords) ? searchKeywords.split(\",\") : [];\n    if (searchName && searchElement && searchKeywords) {\n      document.getElementById('searchOmniUnitName').value = searchName;\n      document.getElementById('searchOmniUnitElement').value = searchElement;\n      searchOmniUnitKeywordsEl.setChoiceByValue(selectedKeywords);\n      filteredOmniUnits = ctx.state.omniunits.filter(omniunit => {\n        let unitName = omniunit.name.toLowerCase();\n        let unitElement = omniunit.element;\n        if (unitName.includes(searchName.toLowerCase()) && unitElement === searchElement) {\n          for (let keyword of omniunit.keywords) {\n            if (selectedKeywords.includes(keyword)) {\n              return omniunit;\n            }\n          }\n        }\n      });\n    } else if (searchName && searchKeywords) {\n      document.getElementById('searchOmniUnitName').value = searchName;\n      searchOmniUnitKeywordsEl.setChoiceByValue(selectedKeywords);\n      filteredOmniUnits = ctx.state.omniunits.filter(omniunit => {\n        let unitName = omniunit.name.toLowerCase();\n        if (unitName.includes(searchName.toLowerCase())) {\n          for (let keyword of omniunit.keywords) {\n            if (selectedKeywords.includes(keyword)) {\n              return omniunit;\n            }\n          }\n        }\n      });\n    } else if (searchElement && searchKeywords) {\n      document.getElementById('searchOmniUnitElement').value = searchElement;\n      searchOmniUnitKeywordsEl.setChoiceByValue(selectedKeywords);\n      filteredOmniUnits = ctx.state.omniunits.filter(omniunit => {\n        let unitElement = omniunit.element;\n        if (unitElement === searchElement) {\n          for (let keyword of omniunit.keywords) {\n            if (selectedKeywords.includes(keyword)) {\n              return omniunit;\n            }\n          }\n        }\n      });\n    } else if (searchName) {\n      document.getElementById('searchOmniUnitName').value = searchName;\n      filteredOmniUnits = ctx.state.omniunits.filter(omniunit => {\n        if (omniunit.name.toLowerCase().includes(searchName.toLowerCase())) {\n          return omniunit;\n        }\n      });\n    } else if (searchElement) {\n      document.getElementById('searchOmniUnitElement').value = searchElement;\n      filteredOmniUnits = ctx.state.omniunits.filter(omniunit => {\n        if (omniunit.element === searchElement) {\n          return omniunit;\n        }\n      });\n    } else if (searchKeywords) {\n      searchOmniUnitKeywordsEl.setChoiceByValue(selectedKeywords);\n      filteredOmniUnits = ctx.state.omniunits.filter(omniunit => {\n        for (let keyword of omniunit.keywords) {\n          if (selectedKeywords.includes(keyword)) {\n            return omniunit;\n          }\n        }\n      });\n    }\n  } else {\n    filteredOmniUnits = ctx.state.omniunits;\n  }\n\n  window.omniunits = filteredOmniUnits;\n  let end = 99;\n  if (window.selectedOmniUnitIndex && window.selectedOmniUnitIndex > end) {\n    end = window.selectedOmniUnitIndex + 5;\n  }\n\n  return (filteredOmniUnits) ? filteredOmniUnits.slice(0, end) : [].slice(0, end);\n}","import page from \"page\";\n\nexport function SearchForm() {\n  return document.createRange().createContextualFragment(`\n    <form method=\"GET\" class=\"form\">\n    <div class=\"relative mb-4\">\n      <select id=\"searchElementalSynergy\" class=\"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline\">\n        <option value=\"\">Elemental Synergy</option>\n        <option value=\"Abyss\">Abyss</option>\n        <option value=\"Aurora\">Aurora</option>\n        <option value=\"Blast\">Blast</option>\n        <option value=\"Blaze\">Blaze</option>\n        <option value=\"Cyclone\">Cyclone</option>\n        <option value=\"Eruption\">Eruption</option>\n        <option value=\"Magma\">Magma</option>\n        <option value=\"Miasma\">Miasma</option>\n        <option value=\"Mist\">Mist</option>\n        <option value=\"Obsidian\">Obsidian</option>\n        <option value=\"Nova\">Nova</option>\n        <option value=\"Plasma\">Plasma</option>\n        <option value=\"Prism\">Prism</option>\n        <option value=\"Pyre\">Pyre</option>\n        <option value=\"Quagmire\">Quagmire</option>\n        <option value=\"Radiance\">Radiance</option>\n        <option value=\"Steam\">Steam</option>\n        <option value=\"Tempest\">Tempest</option>\n        <option value=\"Tremor\">Tremor</option>\n        <option value=\"Tsunami\">Tsunami</option>\n        <option value=\"Twilight\">Twilight</option>\n      </select>\n      <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\n        <svg class=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"/></svg>\n      </div>\n    </div>\n    <div class=\"mb-4\">\n      <select multiple id=\"searchDbbKeywords\" class=\"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline\">\n        <option value=\"\">Keywords</option>\n      </select>\n    </div>\n    <div class=\"relative mb-4\">\n      <span>\n        <input class=\"focus:outline-0 bg-transparent border-b border-gray-500 focus:border-green-500 placeholder-gray-600 py-2 pr-4 pl-10 w-full appearance-none leading-normal\" type=\"text\" placeholder=\"Omni unit name\" id=\"searchOmniUnitName\">\n      </span>\n      <div class=\"pointer-events-none absolute inset-y-0 left-0 pl-4 flex items-center\">\n        <svg class=\"fill-current pointer-events-none text-gray-600 w-4 h-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z\"></path></svg>\n      </div>\n    </div>\n  </form>\n    `);\n}\n\nconst formData = new FormData();\nexport function Search () {\n  document.getElementById('searchOmniUnitName').addEventListener('keydown', (e) => {\n    if (e.key === 'Enter') {\n      if (e.target.value !== \"\") {\n        if (formData.has('name')) {\n          formData.delete('name');\n        }\n        formData.append('name', e.target.value);\n      } else {\n        formData.delete('name');\n      }\n      e.preventDefault();\n      showSearchResult(formData);\n    }\n  });\n\n  document.getElementById('searchElementalSynergy').onchange = (e) => {\n    if (e.target.value !== \"\") {\n      if (formData.has('esname')) {\n        formData.delete('esname');\n      }\n      formData.append('esname', e.target.value);\n    } else {\n      formData.delete('esname');\n    }\n    e.preventDefault();\n    showSearchResult(formData);\n  }\n\n  document.getElementById('searchDbbKeywords').onchange = (e) => {\n    var opts = [], opt, optValue;\n\n    for (let i = 0; i < e.target.options.length; i++) {\n      opt = e.target.options[i];\n      optValue = opt.value;\n      if (opt.selected) {\n        opts.push(optValue);\n      }\n    }\n\n    if (Array.isArray(opts) && opts.length > 0) {\n      if (formData.has('keywords')) {\n        formData.delete('keywords');\n      }\n      formData.append('keywords', encodeURIComponent(opts.join(\",\")));\n    } else {\n      formData.delete('keywords');\n    }\n\n    e.preventDefault();\n    showSearchResult(formData);\n  }\n}\n\nfunction showSearchResult(formData) {\n  const queryString = new URLSearchParams(formData).toString();\n  if (queryString) {\n    page.show(`${window.location.pathname}?${queryString}`);\n  } else {\n    page.show(`${window.location.pathname}`);\n  }\n  // Set previous page position Y to 0 when searching\n  if (window.previousOmniUnitsPage) {\n    window.previousOmniUnitsPage = 0;\n  }\n}","import Skeleton from \"./components/Skeleton.js\";\nimport { SearchForm, Search } from \"./components/Search.js\";\nimport setActiveMenu from \"../utils/setActiveMenu.js\";\nimport trackUrl from \"../utils/trackUrl.js\";\nimport { requestDbbs } from \"../utils/request.js\";\nimport { getDbbKeywords } from \"../utils/keywords.js\";\n\nlet searchDbbKeywordsEl;\n\nexport default function (ctx) {\n    trackUrl(ctx);\n    setActiveMenu(ctx.path);\n    document.title = ctx.title = 'Brave Frontier Wiki';\n    document.querySelector('main').textContent = '';\n    document.querySelector('main').appendChild(SearchForm());\n    document.querySelector('main').appendChild(Skeleton());\n    searchDbbKeywordsEl = new Choices(document.getElementById('searchDbbKeywords'), {\n        items: getDbbKeywords(),\n        choices: getDbbKeywords(),\n        removeItemButton: true,\n        maxItemCount: 3,\n        maxItemText: (maxItemCount) => {\n            return `Only ${maxItemCount} values can be added`;\n        }\n    });\n    let filteredDbbs;\n    requestDbbs().then(data => {\n        ctx.state.dbbs = data;\n        ctx.save();\n        filteredDbbs = filterDbbs(ctx);\n        import(\"./components/Content.js\").then(module => {\n            module.default(filteredDbbs);\n            Search();\n        });\n    });\n    // Scroll to the top page.\n    window.scrollTo(0, 0);\n}\n\nfunction filterDbbs(ctx) {\n    let filteredDbbs;\n    if (ctx.querystring) {\n        const searchParams = new URLSearchParams(ctx.querystring);\n        const searchName = searchParams.get('name');\n        const searchEsName = searchParams.get('esname');\n        const searchKeywords = searchParams.get('keywords');\n        const selectedKeywords = (searchKeywords) ? searchKeywords.split(\",\") : [];\n        if (searchName && searchEsName && searchKeywords) {\n            document.getElementById('searchOmniUnitName').value = searchName;\n            document.getElementById('searchElementalSynergy').value = searchEsName;\n            searchDbbKeywordsEl.setChoiceByValue(selectedKeywords);\n            filteredDbbs = ctx.state.dbbs.filter(dbb => {\n                let firstUnitName = dbb.firstUnitName.toLowerCase();\n                let secondUnitName = dbb.secondUnitName.toLowerCase();\n                let esName = dbb.elementalSynergyName;\n                if (firstUnitName.includes(searchName.toLowerCase()) || secondUnitName.includes(searchName.toLocaleLowerCase())) {\n                    if (esName === searchEsName) {\n                        for (let keyword of dbb.keywords) {\n                            if (selectedKeywords.includes(keyword)) {\n                                return dbb;\n                            }\n                        }\n                    }\n                }\n            });\n        } else if (searchName && searchKeywords) {\n            document.getElementById('searchOmniUnitName').value = searchName;\n            searchDbbKeywordsEl.setChoiceByValue(selectedKeywords);\n            filteredDbbs = ctx.state.dbbs.filter(dbb => {\n                let firstUnitName = dbb.firstUnitName.toLowerCase();\n                let secondUnitName = dbb.secondUnitName.toLowerCase();\n                if (firstUnitName.includes(searchName.toLowerCase()) || secondUnitName.includes(searchName.toLocaleLowerCase())) {\n                    for (let keyword of dbb.keywords) {\n                        if (selectedKeywords.includes(keyword)) {\n                            return dbb;\n                        }\n                    }\n                }\n            });\n        } else if (searchName && searchEsName) {\n            document.getElementById('searchOmniUnitName').value = searchName;\n            document.getElementById('searchElementalSynergy').value = searchEsName;\n            filteredDbbs = ctx.state.dbbs.filter(dbb => {\n                let firstUnitName = dbb.firstUnitName.toLowerCase();\n                let secondUnitName = dbb.secondUnitName.toLowerCase();\n                let esName = dbb.elementalSynergyName;\n                if (firstUnitName.includes(searchName.toLowerCase()) || secondUnitName.includes(searchName.toLocaleLowerCase())) {\n                    if (esName === searchEsName) {\n                        return dbb;\n                    }\n                }\n            });\n        } else if (searchEsName && searchKeywords) {\n            document.getElementById('searchElementalSynergy').value = searchEsName;\n            searchDbbKeywordsEl.setChoiceByValue(selectedKeywords);\n            filteredDbbs = ctx.state.dbbs.filter(dbb => {\n                let esName = dbb.elementalSynergyName;\n                if (esName === searchEsName) {\n                    for (let keyword of dbb.keywords) {\n                        if (selectedKeywords.includes(keyword)) {\n                            return dbb;\n                        }\n                    }\n                }\n            });\n        } else if (searchName) {\n            document.getElementById('searchOmniUnitName').value = searchName;\n            filteredDbbs = ctx.state.dbbs.filter(dbb => {\n                let firstUnitName = dbb.firstUnitName.toLowerCase();\n                let secondUnitName = dbb.secondUnitName.toLowerCase();\n                if (firstUnitName.includes(searchName.toLowerCase()) || secondUnitName.includes(searchName.toLocaleLowerCase())) {\n                    return dbb;\n                }\n            });\n        } else if (searchEsName) {\n            document.getElementById('searchElementalSynergy').value = searchEsName;\n            filteredDbbs = ctx.state.dbbs.filter(dbb => {\n                let esName = dbb.elementalSynergyName;\n                if (esName === searchEsName) {\n                    return dbb;\n                }\n            });\n        } else if (searchKeywords) {\n            searchDbbKeywordsEl.setChoiceByValue(selectedKeywords);\n            filteredDbbs = ctx.state.dbbs.filter(dbb => {\n              for (let keyword of dbb.keywords) {\n                if (selectedKeywords.includes(keyword)) {\n                  return dbb;\n                }\n              }\n            });\n        }\n    } else {\n        filteredDbbs = ctx.state.dbbs;\n    }\n    window.dbbs = filteredDbbs;\n    let end = 49;\n    return (filteredDbbs) ? filteredDbbs.slice(0, end) : [].slice(0, end);\n}","import page from \"page\";\nimport Home from \"./home/index.js\";\nimport OmniUnits from \"./omniunits/index.js\";\nimport { loadOmniUnit, showOmniUnit } from \"./omniunit/index.js\";\nimport Dbbs from \"./dbbs/index.js\";\nimport NotFound from \"./notfound.js\";\n\npage('/', Home);\npage('/omniunits', OmniUnits);\npage('/omniunits/:omniunit', loadOmniUnit, showOmniUnit);\npage('/dbbs', Dbbs);\npage('*', NotFound);\n// Call it!\npage();\n\nwindow.prerenderReady = true;","import trackUrl from \"../utils/trackUrl.js\";\nimport setActiveMenu from \"../utils/setActiveMenu.js\";\n\nexport default function (ctx) {\n  if (document.body.classList.contains('bg-gray-300')) {\n    document.body.classList.remove('bg-gray-300');\n    document.body.classList.add('bg-white');\n  }\n  trackUrl(ctx);\n  setActiveMenu(ctx.path);\n  document.title = ctx.title = `Brave Frontier Wiki | Unofficial`;\n  import('./components/Home.js').then(module => {\n    document.querySelector('main').textContent = '';\n    document.querySelector('main').appendChild(module.default());\n    document.querySelector('button').addEventListener('click', () => {\n      document.getElementById('banner').style.display = \"none\";\n    });\n  });\n}","export default function () {\n    const fragement = document.createDocumentFragment();\n    const $ul = document.createElement('ul');\n    $ul.setAttribute('id', 'omniunit-list');\n    for (let index = 0; index < 100; index++) {\n        fragement.appendChild(document.createRange().createContextualFragment(`\n        <li class=\"omniunit-card\"></li>\n        `));\n    }\n    $ul.appendChild(fragement);\n    return $ul;\n}","export const requestOmniUnits = async (querystring = '') => {\n  const URL = 'https://bravefrontier.satyakresna.io/api/v1/omniunits';\n  const response = await fetch(`${URL}${querystring ? `?${querystring}` : ''}`);\n  const json = await response.json();\n  return json;\n}\n\nexport const requestOmniUnit = async (name) => {\n  const URL = `https://bravefrontier.satyakresna.io/api/v1/omniunits/${name}`;\n  const response = await fetch(URL);\n  const json = await response.json();\n  return json;\n}\n\nexport const requestDbbs = async (querystring = '') => {\n  const URL = 'https://bravefrontier.satyakresna.io/api/v1/dbbs';\n  const response = await fetch(`${URL}${querystring ? `?${querystring}` : ''}`);\n  const json = await response.json();\n  return json;\n}","import { requestOmniUnit } from \"../utils/request.js\";\nimport trackUrl from \"../utils/trackUrl.js\";\nimport setOgMeta from \"../utils/setOgMeta.js\";\n\nexport function loadOmniUnit(ctx, next) {\n  // check if we have .state.omniunit already available\n  // this could for example be a cached html fragment.\n  if (ctx.state.omniunit) {\n    ctx.omniunit = ctx.state.omniunit;\n    next();\n    return;\n  }\n  NProgress.start();\n  requestOmniUnit(encodeURIComponent(ctx.params.omniunit)).then(data => {\n    ctx.state.omniunit = data;\n    ctx.save();\n    next();\n  })\n  .catch(error => {\n    console.log(error);\n    const $p = document.createElement('p');\n    $p.setAttribute('class', 'text-center m-auto font-bold');\n    $p.textContent = 'Opps, failed to get detail of unit. Please try again in 3 minutes...';\n    document.querySelector('main').appendChild($p);\n  });\n}\n\nexport function showOmniUnit(ctx) {\n  window.previousOmniUnitsPage = window.scrollY;\n  trackUrl(ctx);\n  document.title = ctx.title = `${ctx.state.omniunit.name} - Brave Frontier Wiki`;\n  setOgMeta({\n    title: ctx.state.omniunit.name,\n    description: `${ctx.state.omniunit.name}'s Profile`,\n    image: `${ctx.state.omniunit.artwork}`,\n    url: window.location.href\n  });\n  if (window.omniunits) {\n    window.selectedOmniUnitIndex = window.omniunits.findIndex((unit) => {\n      return unit.name === ctx.state.omniunit.name;\n    });\n  }\n  import(\"./components/Profile.js\").then(({ default: OmniUnitProfile }) => {\n    document.querySelector('main').textContent = '';\n    document.querySelector('main').appendChild(OmniUnitProfile(ctx.state.omniunit));\n    document.getElementById('shareBtn').addEventListener('click', async (e) => {\n      e.preventDefault();\n      try {\n        const module = await import(\"./components/Share.js\");\n        module.default(ctx.state.omniunit);\n      } catch (error) {\n        console.log(error);\n      }\n    });\n    // Scroll to the top page.\n    window.scrollTo(0, 0);\n    NProgress.done();\n  })\n  .catch(error => console.log(error));\n}","export default function (params) {\n    document.querySelector('meta[property=\"og:title\"]').setAttribute('content', params.title);\n    document.querySelector('meta[property=\"og:description\"]').setAttribute('content', params.description);\n    document.querySelector('meta[property=\"og:image\"]').setAttribute('content', params.image);\n    document.querySelector('meta[property=\"og:url\"]').setAttribute('content', params.url);\n}","export default function () {\n    const fragement = document.createDocumentFragment();\n    const $ul = document.createElement('ul');\n    $ul.setAttribute('id', 'dbb-list');\n    for (let index = 0; index < 100; index++) {\n        fragement.appendChild(document.createRange().createContextualFragment(`\n        <li class=\"dbb-card\"></li>\n        `));\n    }\n    $ul.appendChild(fragement);\n    return $ul;\n}","export default function () {\n  document.querySelector('main').textContent = 'Not found';\n}"],"names":["isarray","Array","isArray","arr","Object","prototype","toString","call","pathToRegexp_1","pathToRegexp","parse_1","parse","compile_1","str","tokensToFunction","tokensToFunction_1","tokensToRegExp_1","tokensToRegExp","PATH_REGEXP","RegExp","join","res","tokens","key","index","path","exec","m","escaped","offset","slice","length","push","prefix","name","capture","group","suffix","asterisk","repeat","optional","delimiter","pattern","escapeGroup","substr","matches","i","obj","data","token","segment","value","TypeError","j","encodeURIComponent","test","escapeString","replace","attachKeys","re","keys","flags","options","sensitive","strict","end","route","lastToken","endsWithSlash","groups","source","match","regexpToRegexp","parts","arrayToRegexp","stringToRegexp","compile","loaded","hasDocument","document","hasWindow","window","hasHistory","history","hasProcess","process","clickEvent","ontouchstart","isLocation","location","Page","this","callbacks","exits","current","len","_decodeURLComponents","_base","_strict","_running","_hashbang","clickHandler","bind","_onpopstate","page","fn","Route","arguments","middleware","start","unhandled","ctx","handled","_window","_getBase","hash","pathname","search","canonicalPath","stop","href","Context","state","pageInstance","_page","hashbang","pageBase","indexOf","title","querystring","_decodeURLEncodedURIComponent","params","split","globalPage","opts","method","regexp","configure","decodeURLComponents","_popstate","popstate","_click","click","addEventListener","removeEventListener","base","loc","protocol","enable","dispatch","url","show","prev","prevContext","pushState","back","setTimeout","redirect","from","to","inst","e","init","save","nextEnter","nextExit","exit","_which","metaKey","ctrlKey","shiftKey","defaultPrevented","el","target","eventPath","composedPath","nodeName","toUpperCase","parentNode","svg","constructor","hasAttribute","getAttribute","link","_samePath","baseVal","sameOrigin","orig","preventDefault","readyState","undefined","event","which","button","_toURL","URL","anc","createElement","hostname","port","val","decodeURIComponent","replaceState","self","next","routePath","qsIndex","hasOwnProperty","createPage","pageFn","apply","create","defineProperty","get","set","page_js","default_1","ga","querySelectorAll","forEach","classList","add","remove","default","formData","FormData","Search","getElementById","has","delete","append","showSearchResult","onchange","opt","optValue","selected","queryString","URLSearchParams","previousOmniUnitsPage","getOmniUnitKeywords","map","keyword","label","id","getDbbKeywords","searchOmniUnitKeywordsEl","filterOmniUnits","filteredOmniUnits","searchParams","searchName","searchElement","searchKeywords","selectedKeywords","setChoiceByValue","omniunits","filter","omniunit","unitName","toLowerCase","unitElement","element","includes","keywords","selectedOmniUnitIndex","searchDbbKeywordsEl","body","contains","trackUrl","setActiveMenu","import","then","module","querySelector","textContent","appendChild","style","display","createRange","createContextualFragment","fragement","createDocumentFragment","$ul","setAttribute","Skeleton","Choices","items","choices","removeItemButton","maxItemCount","maxItemText","async","response","fetch","json","requestOmniUnits","NProgress","requestOmniUnit","catch","error","console","log","$p","scrollY","description","image","artwork","findIndex","unit","OmniUnitProfile","scrollTo","done","filteredDbbs","requestDbbs","dbbs","searchEsName","dbb","firstUnitName","secondUnitName","esName","elementalSynergyName","toLocaleLowerCase","filterDbbs","prerenderReady"],"mappings":"AAAA,IAAIA,EAAUC,MAAMC,SAAW,SAAUC,GACvC,MAA8C,kBAAvCC,OAAOC,UAAUC,SAASC,KAAKJ,IAMpCK,EAAiBC,EACjBC,EAAUC,EACVC,EA+FJ,SAAkBC,GAChB,OAAOC,EAAiBH,EAAME,KA/F5BE,EAAqBD,EACrBE,EAAmBC,EAOnBC,EAAc,IAAIC,OAAO,CAG3B,UAOA,kGACAC,KAAK,KAAM,KAQb,SAAST,EAAOE,GAOd,IANA,IAIIQ,EAJAC,EAAS,GACTC,EAAM,EACNC,EAAQ,EACRC,EAAO,GAG6B,OAAhCJ,EAAMH,EAAYQ,KAAKb,KAAe,CAC5C,IAAIc,EAAIN,EAAI,GACRO,EAAUP,EAAI,GACdQ,EAASR,EAAIG,MAKjB,GAJAC,GAAQZ,EAAIiB,MAAMN,EAAOK,GACzBL,EAAQK,EAASF,EAAEI,OAGfH,EACFH,GAAQG,EAAQ,OADlB,CAMIH,IACFH,EAAOU,KAAKP,GACZA,EAAO,IAGT,IAAIQ,EAASZ,EAAI,GACba,EAAOb,EAAI,GACXc,EAAUd,EAAI,GACde,EAAQf,EAAI,GACZgB,EAAShB,EAAI,GACbiB,EAAWjB,EAAI,GAEfkB,EAAoB,MAAXF,GAA6B,MAAXA,EAC3BG,EAAsB,MAAXH,GAA6B,MAAXA,EAC7BI,EAAYR,GAAU,IACtBS,EAAUP,GAAWC,IAAUE,EAAW,KAAO,KAAOG,EAAY,OAExEnB,EAAOU,KAAK,CACVE,KAAMA,GAAQX,IACdU,OAAQA,GAAU,GAClBQ,UAAWA,EACXD,SAAUA,EACVD,OAAQA,EACRG,QAASC,EAAYD,MAczB,OATIlB,EAAQX,EAAIkB,SACdN,GAAQZ,EAAI+B,OAAOpB,IAIjBC,GACFH,EAAOU,KAAKP,GAGPH,EAgBT,SAASR,EAAkBQ,GAKzB,IAHA,IAAIuB,EAAU,IAAI5C,MAAMqB,EAAOS,QAGtBe,EAAI,EAAGA,EAAIxB,EAAOS,OAAQe,IACR,iBAAdxB,EAAOwB,KAChBD,EAAQC,GAAK,IAAI3B,OAAO,IAAMG,EAAOwB,GAAGJ,QAAU,MAItD,OAAO,SAAUK,GAIf,IAHA,IAAItB,EAAO,GACPuB,EAAOD,GAAO,GAETD,EAAI,EAAGA,EAAIxB,EAAOS,OAAQe,IAAK,CACtC,IAAIG,EAAQ3B,EAAOwB,GAEnB,GAAqB,iBAAVG,EAAX,CAMA,IACIC,EADAC,EAAQH,EAAKC,EAAMf,MAGvB,GAAa,MAATiB,EAAe,CACjB,GAAIF,EAAMT,SACR,SAEA,MAAM,IAAIY,UAAU,aAAeH,EAAMf,KAAO,mBAIpD,GAAIlC,EAAQmD,GAAZ,CACE,IAAKF,EAAMV,OACT,MAAM,IAAIa,UAAU,aAAeH,EAAMf,KAAO,kCAAoCiB,EAAQ,KAG9F,GAAqB,IAAjBA,EAAMpB,OAAc,CACtB,GAAIkB,EAAMT,SACR,SAEA,MAAM,IAAIY,UAAU,aAAeH,EAAMf,KAAO,qBAIpD,IAAK,IAAImB,EAAI,EAAGA,EAAIF,EAAMpB,OAAQsB,IAAK,CAGrC,GAFAH,EAAUI,mBAAmBH,EAAME,KAE9BR,EAAQC,GAAGS,KAAKL,GACnB,MAAM,IAAIE,UAAU,iBAAmBH,EAAMf,KAAO,eAAiBe,EAAMP,QAAU,oBAAsBQ,EAAU,KAGvHzB,IAAe,IAAN4B,EAAUJ,EAAMhB,OAASgB,EAAMR,WAAaS,OApBzD,CA4BA,GAFAA,EAAUI,mBAAmBH,IAExBN,EAAQC,GAAGS,KAAKL,GACnB,MAAM,IAAIE,UAAU,aAAeH,EAAMf,KAAO,eAAiBe,EAAMP,QAAU,oBAAsBQ,EAAU,KAGnHzB,GAAQwB,EAAMhB,OAASiB,QAhDrBzB,GAAQwB,EAmDZ,OAAOxB,GAUX,SAAS+B,EAAc3C,GACrB,OAAOA,EAAI4C,QAAQ,2BAA4B,QASjD,SAASd,EAAaP,GACpB,OAAOA,EAAMqB,QAAQ,gBAAiB,QAUxC,SAASC,EAAYC,EAAIC,GAEvB,OADAD,EAAGC,KAAOA,EACHD,EAST,SAASE,EAAOC,GACd,OAAOA,EAAQC,UAAY,GAAK,IAgFlC,SAAS9C,EAAgBK,EAAQwC,GAU/B,IAPA,IAAIE,GAFJF,EAAUA,GAAW,IAEAE,OACjBC,GAAsB,IAAhBH,EAAQG,IACdC,EAAQ,GACRC,EAAY7C,EAAOA,EAAOS,OAAS,GACnCqC,EAAqC,iBAAdD,GAA0B,MAAMZ,KAAKY,GAGvDrB,EAAI,EAAGA,EAAIxB,EAAOS,OAAQe,IAAK,CACtC,IAAIG,EAAQ3B,EAAOwB,GAEnB,GAAqB,iBAAVG,EACTiB,GAASV,EAAaP,OACjB,CACL,IAAIhB,EAASuB,EAAaP,EAAMhB,QAC5BE,EAAUc,EAAMP,QAEhBO,EAAMV,SACRJ,GAAW,MAAQF,EAASE,EAAU,MAaxC+B,GARI/B,EAFAc,EAAMT,SACJP,EACQ,MAAQA,EAAS,IAAME,EAAU,MAEjC,IAAMA,EAAU,KAGlBF,EAAS,IAAME,EAAU,KAuBzC,OAZK6B,IACHE,GAASE,EAAgBF,EAAMpC,MAAM,GAAI,GAAKoC,GAAS,iBAIvDA,GADED,EACO,IAIAD,GAAUI,EAAgB,GAAK,YAGnC,IAAIjD,OAAO,IAAM+C,EAAOL,EAAMC,IAevC,SAASrD,EAAcgB,EAAMmC,EAAME,GAUjC,OAPK9D,EAFL4D,EAAOA,GAAQ,IAKHE,IACVA,EAAU,KAHVA,EAAUF,EACVA,EAAO,IAKLnC,aAAgBN,OApJtB,SAAyBM,EAAMmC,GAE7B,IAAIS,EAAS5C,EAAK6C,OAAOC,MAAM,aAE/B,GAAIF,EACF,IAAK,IAAIvB,EAAI,EAAGA,EAAIuB,EAAOtC,OAAQe,IACjCc,EAAK5B,KAAK,CACRE,KAAMY,EACNb,OAAQ,KACRQ,UAAW,KACXD,UAAU,EACVD,QAAQ,EACRG,QAAS,OAKf,OAAOgB,EAAWjC,EAAMmC,GAoIfY,CAAe/C,EAAMmC,GAG1B5D,EAAQyB,GA5Hd,SAAwBA,EAAMmC,EAAME,GAGlC,IAFA,IAAIW,EAAQ,GAEH3B,EAAI,EAAGA,EAAIrB,EAAKM,OAAQe,IAC/B2B,EAAMzC,KAAKvB,EAAagB,EAAKqB,GAAIc,EAAME,GAASQ,QAKlD,OAAOZ,EAFM,IAAIvC,OAAO,MAAQsD,EAAMrD,KAAK,KAAO,IAAKyC,EAAMC,IAEnCF,GAoHjBc,CAAcjD,EAAMmC,EAAME,GAzGrC,SAAyBrC,EAAMmC,EAAME,GAKnC,IAJA,IAAIxC,EAASX,EAAMc,GACfkC,EAAK1C,EAAeK,EAAQwC,GAGvBhB,EAAI,EAAGA,EAAIxB,EAAOS,OAAQe,IACR,iBAAdxB,EAAOwB,IAChBc,EAAK5B,KAAKV,EAAOwB,IAIrB,OAAOY,EAAWC,EAAIC,GAiGfe,CAAelD,EAAMmC,EAAME,GAGpCtD,EAAeG,MAAQD,EACvBF,EAAeoE,QAAUhE,EACzBJ,EAAeM,iBAAmBC,EAClCP,EAAeS,eAAiBD,EAY9B,IAmaM6D,EAnaFC,EAAe,oBAAuBC,SACtCC,EAAa,oBAAuBC,OACpCC,EAAc,oBAAuBC,QACrCC,EAAgC,oBAAZC,QAKpBC,EAAaR,GAAeC,SAASQ,aAAe,aAAe,QAOnEC,EAAaR,MAAgBC,OAAOE,QAAQM,WAAYR,OAAOQ,UAMnE,SAASC,IAEPC,KAAKC,UAAY,GACjBD,KAAKE,MAAQ,GACbF,KAAKG,QAAU,GACfH,KAAKI,IAAM,EAGXJ,KAAKK,sBAAuB,EAC5BL,KAAKM,MAAQ,GACbN,KAAKO,SAAU,EACfP,KAAKQ,UAAW,EAChBR,KAAKS,WAAY,EAGjBT,KAAKU,aAAeV,KAAKU,aAAaC,KAAKX,MAC3CA,KAAKY,YAAcZ,KAAKY,YAAYD,KAAKX,MAyiB3C,SAASa,EAAK/E,EAAMgF,GAElB,GAAI,mBAAsBhF,EACxB,OAAO+E,EAAKjG,KAAKoF,KAAM,IAAKlE,GAI9B,GAAI,mBAAsBgF,EAExB,IADA,IAAIvC,EAAQ,IAAIwC,IAAoC,KAAMf,MACjD7C,EAAI,EAAGA,EAAI6D,UAAU5E,SAAUe,EACtC6C,KAAKC,UAAU5D,KAAKkC,EAAM0C,WAAWD,UAAU7D,SAGxC,iBAAoBrB,EAC7BkE,KAAK,iBAAoBc,EAAK,WAAa,QAAQhF,EAAMgF,GAGzDd,KAAKkB,MAAMpF,GAYf,SAASqF,EAAUC,GACjB,IAAIA,EAAIC,QAAR,CACA,IACIR,EAAOb,KACPV,EAASuB,EAAKS,SAEdT,EAAKJ,UACGZ,GAAcG,KAAKuB,WAAajC,EAAOQ,SAAS0B,KAAK1D,QAAQ,KAAM,IAEnE+B,GAAcP,EAAOQ,SAAS2B,SAAWnC,EAAOQ,SAAS4B,UAGrDN,EAAIO,gBACpBd,EAAKe,OACLR,EAAIC,SAAU,EACdxB,IAAeP,EAAOQ,SAAS+B,KAAOT,EAAIO,iBAuB5C,SAASG,EAAQhG,EAAMiG,EAAOC,GAC5B,IAAIC,EAAQjC,KAAKa,KAAOmB,GAAgBnB,EACpCvB,EAAS2C,EAAMX,QACfY,EAAWD,EAAMxB,UAEjB0B,EAAWF,EAAMV,WACjB,MAAQzF,EAAK,IAAM,IAAMA,EAAKsG,QAAQD,KAAWrG,EAAOqG,GAAYD,EAAW,KAAO,IAAMpG,GAChG,IAAIqB,EAAIrB,EAAKsG,QAAQ,KAErBpC,KAAK2B,cAAgB7F,EACrB,IAAIkC,EAAK,IAAIxC,OAAO,IAAmB2G,EAvB9BrE,QAAQ,4BAA6B,SAoC9C,GAZAkC,KAAKlE,KAAOA,EAAKgC,QAAQE,EAAI,KAAO,IAChCkE,IAAUlC,KAAKlE,KAAOkE,KAAKlE,KAAKgC,QAAQ,KAAM,KAAO,KAEzDkC,KAAKqC,MAASlD,GAAeG,EAAOF,SAASiD,MAC7CrC,KAAK+B,MAAQA,GAAS,GACtB/B,KAAK+B,MAAMjG,KAAOA,EAClBkE,KAAKsC,aAAenF,EAAI8E,EAAMM,8BAA8BzG,EAAKK,MAAMgB,EAAI,IAAM,GACjF6C,KAAKyB,SAAWQ,EAAMM,+BAA+BpF,EAAIrB,EAAKK,MAAM,EAAGgB,GAAKrB,GAC5EkE,KAAKwC,OAAS,GAGdxC,KAAKwB,KAAO,IACPU,EAAU,CACb,KAAMlC,KAAKlE,KAAKsG,QAAQ,KAAM,OAC9B,IAAItD,EAAQkB,KAAKlE,KAAK2G,MAAM,KAC5BzC,KAAKlE,KAAOkE,KAAKyB,SAAW3C,EAAM,GAClCkB,KAAKwB,KAAOS,EAAMM,8BAA8BzD,EAAM,KAAO,GAC7DkB,KAAKsC,YAActC,KAAKsC,YAAYG,MAAM,KAAK,IAmDnD,SAAS1B,EAAMjF,EAAMqC,EAAS0C,GAC5B,IAAIoB,EAAQjC,KAAKa,KAAOA,GAAQ6B,EAC5BC,EAAOxE,GAAW,GACtBwE,EAAKtE,OAASsE,EAAKtE,QAAU4D,EAAM1B,QACnCP,KAAKlE,KAAiB,MAATA,EAAgB,OAASA,EACtCkE,KAAK4C,OAAS,MACd5C,KAAK6C,OAAShI,EAAemF,KAAKlE,KAAMkE,KAAK/B,KAAO,GAAI0E,GAvrB1D5C,EAAKrF,UAAUoI,UAAY,SAAS3E,GAClC,IAAIwE,EAAOxE,GAAW,GAEtB6B,KAAKsB,QAAUqB,EAAKrD,QAAWD,GAAaC,OAC5CU,KAAKK,sBAAoD,IAA7BsC,EAAKI,oBACjC/C,KAAKgD,WAA8B,IAAlBL,EAAKM,UAAsB5D,EAC5CW,KAAKkD,QAAwB,IAAfP,EAAKQ,OAAmBhE,EACtCa,KAAKS,YAAckC,EAAKT,SAExB,IAAIZ,EAAUtB,KAAKsB,QAChBtB,KAAKgD,UACN1B,EAAQ8B,iBAAiB,WAAYpD,KAAKY,aAAa,GAC/CvB,GACRiC,EAAQ+B,oBAAoB,WAAYrD,KAAKY,aAAa,GAGxDZ,KAAKkD,OACP5B,EAAQlC,SAASgE,iBAAiBzD,EAAYK,KAAKU,cAAc,GACzDvB,GACRmC,EAAQlC,SAASiE,oBAAoB1D,EAAYK,KAAKU,cAAc,GAGnEV,KAAKS,WAAapB,IAAcE,EACjC+B,EAAQ8B,iBAAiB,aAAcpD,KAAKY,aAAa,GACjDvB,GACRiC,EAAQ+B,oBAAoB,aAAcrD,KAAKY,aAAa,IAWhEb,EAAKrF,UAAU4I,KAAO,SAASxH,GAC7B,GAAI,IAAMkF,UAAU5E,OAAQ,OAAO4D,KAAKM,MACxCN,KAAKM,MAAQxE,GASfiE,EAAKrF,UAAU6G,SAAW,WACxB,IAAI+B,EAAOtD,KAAKM,MAChB,GAAKgD,EAAM,OAAOA,EAClB,IAAIC,EAAMlE,GAAaW,KAAKsB,SAAWtB,KAAKsB,QAAQxB,SAMpD,OAJGT,GAAaW,KAAKS,WAAa8C,GAAwB,UAAjBA,EAAIC,WAC3CF,EAAOC,EAAI9B,UAGN6B,GAUTvD,EAAKrF,UAAU2D,OAAS,SAASoF,GAC/B,GAAI,IAAMzC,UAAU5E,OAAQ,OAAO4D,KAAKO,QACxCP,KAAKO,QAAUkD,GAiBjB1D,EAAKrF,UAAUwG,MAAQ,SAAS/C,GAC9B,IAAIwE,EAAOxE,GAAW,GAGtB,GAFA6B,KAAK8C,UAAUH,IAEX,IAAUA,EAAKe,SAAnB,CAGA,IAAIC,EACJ,GAHA3D,KAAKQ,UAAW,EAGbX,EAAY,CACb,IACI0D,EADSvD,KAAKsB,QACDxB,SAGf6D,EADC3D,KAAKS,YAAc8C,EAAI/B,KAAKY,QAAQ,MAC/BmB,EAAI/B,KAAKvE,OAAO,GAAKsG,EAAI7B,OACtB1B,KAAKS,UACR8C,EAAI7B,OAAS6B,EAAI/B,KAEjB+B,EAAI9B,SAAW8B,EAAI7B,OAAS6B,EAAI/B,KAI1CxB,KAAKlC,QAAQ6F,EAAK,MAAM,EAAMhB,EAAKe,YASrC3D,EAAKrF,UAAUkH,KAAO,WACpB,GAAK5B,KAAKQ,SAAV,CACAR,KAAKG,QAAU,GACfH,KAAKI,IAAM,EACXJ,KAAKQ,UAAW,EAEhB,IAAIlB,EAASU,KAAKsB,QAClBtB,KAAKkD,QAAU5D,EAAOF,SAASiE,oBAAoB1D,EAAYK,KAAKU,cAAc,GAClFrB,GAAaC,EAAO+D,oBAAoB,WAAYrD,KAAKY,aAAa,GACtEvB,GAAaC,EAAO+D,oBAAoB,aAAcrD,KAAKY,aAAa,KAc1Eb,EAAKrF,UAAUkJ,KAAO,SAAS9H,EAAMiG,EAAO2B,EAAUrH,GACpD,IAAI+E,EAAM,IAAIU,EAAQhG,EAAMiG,EAAO/B,MACjC6D,EAAO7D,KAAK8D,YAKd,OAJA9D,KAAK8D,YAAc1C,EACnBpB,KAAKG,QAAUiB,EAAItF,MACf,IAAU4H,GAAU1D,KAAK0D,SAAStC,EAAKyC,IACvC,IAAUzC,EAAIC,UAAW,IAAUhF,GAAM+E,EAAI2C,YAC1C3C,GAYTrB,EAAKrF,UAAUsJ,KAAO,SAASlI,EAAMiG,GACnC,IAAIlB,EAAOb,KACX,GAAIA,KAAKI,IAAM,EAAG,CAChB,IAAId,EAASU,KAAKsB,QAGlB/B,GAAcD,EAAOE,QAAQwE,OAC7BhE,KAAKI,WACItE,EACTmI,YAAW,WACTpD,EAAK+C,KAAK9H,EAAMiG,MAGlBkC,YAAW,WACTpD,EAAK+C,KAAK/C,EAAKU,WAAYQ,OAajChC,EAAKrF,UAAUwJ,SAAW,SAASC,EAAMC,GACvC,IAAIC,EAAOrE,KAGP,iBAAoBmE,GAAQ,iBAAoBC,GAClDvD,EAAKjG,KAAKoF,KAAMmE,GAAM,SAASG,GAC7BL,YAAW,WACTI,EAAKvG,aACJ,MAKH,iBAAoBqG,QAAQ,IAAuBC,GACrDH,YAAW,WACTI,EAAKvG,QAAQqG,KACZ,IAgBPpE,EAAKrF,UAAUoD,QAAU,SAAShC,EAAMiG,EAAOwC,EAAMb,GACnD,IAAItC,EAAM,IAAIU,EAAQhG,EAAMiG,EAAO/B,MACjC6D,EAAO7D,KAAK8D,YAMd,OALA9D,KAAK8D,YAAc1C,EACnBpB,KAAKG,QAAUiB,EAAItF,KACnBsF,EAAImD,KAAOA,EACXnD,EAAIoD,QACA,IAAUd,GAAU1D,KAAK0D,SAAStC,EAAKyC,GACpCzC,GAUTrB,EAAKrF,UAAUgJ,SAAW,SAAStC,EAAKyC,GACtC,IAAI1G,EAAI,EAAGO,EAAI,EAAGmD,EAAOb,KAQzB,SAASyE,IACP,IAAI3D,EAAKD,EAAKZ,UAAU9C,KAExB,GAAIiE,EAAItF,OAAS+E,EAAKV,QAItB,OAAKW,OACLA,EAAGM,EAAKqD,GADQtD,EAAUvG,KAAKiG,EAAMO,GAHnCA,EAAIC,SAAU,EAOdwC,EAjBJ,SAASa,IACP,IAAI5D,EAAKD,EAAKX,MAAMxC,KACpB,IAAKoD,EAAI,OAAO2D,IAChB3D,EAAG+C,EAAMa,GAeTA,GAEAD,KAUJ1E,EAAKrF,UAAUiK,KAAO,SAAS7I,EAAMgF,GACnC,GAAoB,mBAAThF,EACT,OAAOkE,KAAK2E,KAAK,IAAK7I,GAIxB,IADA,IAAIyC,EAAQ,IAAIwC,EAAMjF,EAAM,KAAMkE,MACzB7C,EAAI,EAAGA,EAAI6D,UAAU5E,SAAUe,EACtC6C,KAAKE,MAAM7D,KAAKkC,EAAM0C,WAAWD,UAAU7D,MAS/C4C,EAAKrF,UAAUgG,aAAe,SAAS4D,GACrC,GAAI,IAAMtE,KAAK4E,OAAON,MAElBA,EAAEO,SAAWP,EAAEQ,SAAWR,EAAES,UAC5BT,EAAEU,kBAAN,CAKA,IAAIC,EAAKX,EAAEY,OACPC,EAAYb,EAAExI,OAASwI,EAAEc,aAAed,EAAEc,eAAiB,MAE/D,GAAGD,EACD,IAAK,IAAIhI,EAAI,EAAGA,EAAIgI,EAAU/I,OAAQe,IACpC,GAAKgI,EAAUhI,GAAGkI,UAC0B,MAAxCF,EAAUhI,GAAGkI,SAASC,eACrBH,EAAUhI,GAAG0E,KAAlB,CAEAoD,EAAKE,EAAUhI,GACf,MAMJ,KAAO8H,GAAM,MAAQA,EAAGI,SAASC,eAAeL,EAAKA,EAAGM,WACxD,GAAKN,GAAM,MAAQA,EAAGI,SAASC,cAA/B,CAIA,IAAIE,EAA0B,iBAAZP,EAAGpD,MAAmD,sBAA7BoD,EAAGpD,KAAK4D,YAAYlJ,KAK/D,IAAI0I,EAAGS,aAAa,aAA0C,aAA3BT,EAAGU,aAAa,OAAnD,CAGA,IAAIC,EAAOX,EAAGU,aAAa,QAC3B,IAAI3F,KAAKS,YAAaT,KAAK6F,UAAUZ,KAAQA,EAAGzD,MAAQ,MAAQoE,MAG5DA,GAAQA,EAAKxD,QAAQ,YAAc,MAInCoD,EAAMP,EAAGC,OAAOY,QAAUb,EAAGC,UAK5BM,GAAQxF,KAAK+F,WAAWd,EAAGpD,OAAhC,CAKA,IAAI/F,EAAO0J,EAAMP,EAAGpD,KAAKiE,QAAWb,EAAGxD,SAAWwD,EAAGvD,QAAUuD,EAAGzD,MAAQ,IAE1E1F,EAAmB,MAAZA,EAAK,GAAa,IAAMA,EAAOA,EAGlC2D,GAAc3D,EAAK8C,MAAM,oBAC3B9C,EAAOA,EAAKgC,QAAQ,iBAAkB,MAIxC,IAAIkI,EAAOlK,EACPqG,EAAWnC,KAAKuB,WAEW,IAA3BzF,EAAKsG,QAAQD,KACfrG,EAAOA,EAAKmB,OAAOkF,EAAS/F,SAG1B4D,KAAKS,YAAW3E,EAAOA,EAAKgC,QAAQ,KAAM,OAE1CqE,GAAY6D,IAASlK,GAAU+D,GAAiD,UAAnCG,KAAKsB,QAAQxB,SAAS0D,YAIvEc,EAAE2B,iBACFjG,KAAK4D,KAAKoC,SAQZjG,EAAKrF,UAAUkG,aACT1B,GAAS,EACNG,GAGHF,GAAuC,aAAxBC,SAAS8G,WAC1BhH,GAAS,EAETI,OAAO8D,iBAAiB,QAAQ,WAC9Ba,YAAW,WACT/E,GAAS,IACR,MAGA,SAAoBoF,GACzB,GAAKpF,EAAL,CACA,IAAI2B,EAAOb,KACX,GAAIsE,EAAEvC,MAAO,CACX,IAAIjG,EAAOwI,EAAEvC,MAAMjG,KACnB+E,EAAK/C,QAAQhC,EAAMwI,EAAEvC,YAChB,GAAIlC,EAAY,CACrB,IAAI0D,EAAM1C,EAAKS,QAAQxB,SACvBe,EAAK+C,KAAKL,EAAI9B,SAAW8B,EAAI7B,OAAS6B,EAAI/B,UAAM2E,OAAWA,GAAW,OAnBjE,cA2BXpG,EAAKrF,UAAUkK,OAAS,SAASN,GAE/B,OAAO,OADPA,EAAIA,GAAMjF,GAAaW,KAAKsB,QAAQ8E,OACnBC,MAAQ/B,EAAEgC,OAAShC,EAAE+B,OAOxCtG,EAAKrF,UAAU6L,OAAS,SAAS1E,GAC/B,IAAIvC,EAASU,KAAKsB,QAClB,GAAkB,mBAARkF,KAAsB3G,EAC9B,OAAO,IAAI2G,IAAI3E,EAAMvC,EAAOQ,SAASnF,YAChC,GAAIwE,EAAa,CACtB,IAAIsH,EAAMnH,EAAOF,SAASsH,cAAc,KAExC,OADAD,EAAI5E,KAAOA,EACJ4E,IASX1G,EAAKrF,UAAUqL,WAAa,SAASlE,GACnC,IAAIA,IAAShC,EAAY,OAAO,EAEhC,IAAI8D,EAAM3D,KAAKuG,OAAO1E,GAGlB0B,EAFSvD,KAAKsB,QAEDxB,SAUjB,OAAOyD,EAAIC,WAAaG,EAAIH,UAC1BD,EAAIoD,WAAahD,EAAIgD,WACpBpD,EAAIqD,OAASjD,EAAIiD,MAAqB,KAAbrD,EAAIqD,OAA4B,IAAZjD,EAAIiD,MAA0B,KAAZjD,EAAIiD,QAMxE7G,EAAKrF,UAAUmL,UAAY,SAASlC,GAClC,IAAI9D,EAAY,OAAO,EACvB,IACI0D,EADSvD,KAAKsB,QACDxB,SACjB,OAAO6D,EAAIlC,WAAa8B,EAAI9B,UAC1BkC,EAAIjC,SAAW6B,EAAI7B,QAWvB3B,EAAKrF,UAAU6H,8BAAgC,SAASsE,GACtD,MAAmB,iBAARA,EAA2BA,EAC/B7G,KAAKK,qBAAuByG,mBAAmBD,EAAI/I,QAAQ,MAAO,MAAQ+I,GAoLnF/E,EAAQpH,UAAUqJ,UAAY,WAC5B,IAAIlD,EAAOb,KAAKa,KACZvB,EAASuB,EAAKS,QACdY,EAAWrB,EAAKJ,UAEpBI,EAAKT,MACDb,GACAD,EAAOE,QAAQuE,UAAU/D,KAAK+B,MAAO/B,KAAKqC,MACxCH,GAA0B,MAAdlC,KAAKlE,KAAe,KAAOkE,KAAKlE,KAAOkE,KAAK2B,gBAUhEG,EAAQpH,UAAU8J,KAAO,WACvB,IAAI3D,EAAOb,KAAKa,KACZtB,GACAsB,EAAKS,QAAQ9B,QAAQuH,aAAa/G,KAAK+B,MAAO/B,KAAKqC,MACjDxB,EAAKJ,WAA2B,MAAdT,KAAKlE,KAAe,KAAOkE,KAAKlE,KAAOkE,KAAK2B,gBAqCtEZ,EAAMrG,UAAUuG,WAAa,SAASH,GACpC,IAAIkG,EAAOhH,KACX,OAAO,SAASoB,EAAK6F,GACnB,GAAID,EAAKpI,MAAMwC,EAAItF,KAAMsF,EAAIoB,QAE3B,OADApB,EAAI8F,UAAYF,EAAKlL,KACdgF,EAAGM,EAAK6F,GAEjBA,MAcJlG,EAAMrG,UAAUkE,MAAQ,SAAS9C,EAAM0G,GACrC,IAAIvE,EAAO+B,KAAK/B,KACdkJ,EAAUrL,EAAKsG,QAAQ,KACvBX,GAAY0F,EAAUrL,EAAKK,MAAM,EAAGgL,GAAWrL,EAC/CE,EAAIgE,KAAK6C,OAAO9G,KAAK+K,mBAAmBrF,IAE1C,IAAKzF,EAAG,OAAO,SAERwG,EAAO,GAEd,IAAK,IAAIrF,EAAI,EAAGiD,EAAMpE,EAAEI,OAAQe,EAAIiD,IAAOjD,EAAG,CAC5C,IAAIvB,EAAMqC,EAAKd,EAAI,GACf0J,EAAM7G,KAAKa,KAAK0B,8BAA8BvG,EAAEmB,SACxCgJ,IAARU,GAAuBO,eAAexM,KAAK4H,EAAQ5G,EAAIW,QACzDiG,EAAO5G,EAAIW,MAAQsK,GAIvB,OAAO,GAQT,IAAInE,EAxRJ,SAAS2E,IACP,IAAIrF,EAAe,IAAIjC,EAEvB,SAASuH,IACP,OAAOzG,EAAK0G,MAAMvF,EAAchB,WA4ClC,OAxCAsG,EAAOrH,UAAY+B,EAAa/B,UAChCqH,EAAOpH,MAAQ8B,EAAa9B,MAC5BoH,EAAOhE,KAAOtB,EAAasB,KAAK3C,KAAKqB,GACrCsF,EAAOjJ,OAAS2D,EAAa3D,OAAOsC,KAAKqB,GACzCsF,EAAOpG,MAAQc,EAAad,MAAMP,KAAKqB,GACvCsF,EAAO1F,KAAOI,EAAaJ,KAAKjB,KAAKqB,GACrCsF,EAAO1D,KAAO5B,EAAa4B,KAAKjD,KAAKqB,GACrCsF,EAAOtD,KAAOhC,EAAagC,KAAKrD,KAAKqB,GACrCsF,EAAOpD,SAAWlC,EAAakC,SAASvD,KAAKqB,GAC7CsF,EAAOxJ,QAAUkE,EAAalE,QAAQ6C,KAAKqB,GAC3CsF,EAAO5D,SAAW1B,EAAa0B,SAAS/C,KAAKqB,GAC7CsF,EAAO3C,KAAO3C,EAAa2C,KAAKhE,KAAKqB,GACrCsF,EAAOxE,UAAYd,EAAac,UAAUnC,KAAKqB,GAC/CsF,EAAOvB,WAAa/D,EAAa+D,WAAWpF,KAAKqB,GACjDsF,EAAO5G,aAAesB,EAAatB,aAAaC,KAAKqB,GAErDsF,EAAOE,OAASH,EAEhB5M,OAAOgN,eAAeH,EAAQ,MAAO,CACnCI,IAAK,WACH,OAAO1F,EAAa5B,KAEtBuH,IAAK,SAASd,GACZ7E,EAAa5B,IAAMyG,KAIvBpM,OAAOgN,eAAeH,EAAQ,UAAW,CACvCI,IAAK,WACH,OAAO1F,EAAa7B,SAEtBwH,IAAK,SAASd,GACZ7E,EAAa7B,QAAU0G,KAK3BS,EAAOxF,QAAUA,EACjBwF,EAAOvG,MAAQA,EAERuG,EAwOQD,GACbO,EAAUlF,EACVmF,EAAYnF,EC3rCH,WAAStB,QACJ+E,IAAd7G,OAAOwI,KACTA,GAAG,MAAO,CACRjH,KAAMO,EAAIO,cACVU,MAAOjD,SAASiD,QAElByF,GAAG,OAAQ,aCNA,WAAShM,GACtBxB,MAAM6J,KAAK/E,SAAS2I,iBAAiB,0BAA0BC,SAAQ/C,IACjEA,EAAGU,aAAa,UAAY7J,EAC9BmJ,EAAGgD,UAAUC,IAAI,UAEjBjD,EAAGgD,UAAUE,OAAO,aFwrC1BP,EAAQQ,QAAUP,EGxpClB,MAAMQ,EAAW,IAAIC,SACd,SAASC,IACdnJ,SAASoJ,eAAe,sBAAsBpF,iBAAiB,WAAYkB,IAC3D,UAAVA,EAAE1I,MACmB,KAAnB0I,EAAEY,OAAO1H,OACP6K,EAASI,IAAI,SACfJ,EAASK,OAAO,QAElBL,EAASM,OAAO,OAAQrE,EAAEY,OAAO1H,QAEjC6K,EAASK,OAAO,QAElBpE,EAAE2B,iBACF2C,EAAiBP,OAIrBjJ,SAASoJ,eAAe,yBAAyBK,SAAYvE,IACpC,KAAnBA,EAAEY,OAAO1H,OACP6K,EAASI,IAAI,YACfJ,EAASK,OAAO,WAElBL,EAASM,OAAO,UAAWrE,EAAEY,OAAO1H,QAEpC6K,EAASK,OAAO,WAElBpE,EAAE2B,iBACF2C,EAAiBP,IAGnBjJ,SAASoJ,eAAe,0BAA0BK,SAAYvE,IAC5D,IAAewE,EAAKC,EAAhBpG,EAAO,GAEX,IAAK,IAAIxF,EAAI,EAAGA,EAAImH,EAAEY,OAAO/G,QAAQ/B,OAAQe,IAE3C4L,GADAD,EAAMxE,EAAEY,OAAO/G,QAAQhB,IACRK,MACXsL,EAAIE,UACNrG,EAAKtG,KAAK0M,GAIVzO,MAAMC,QAAQoI,IAASA,EAAKvG,OAAS,GACnCiM,EAASI,IAAI,aACfJ,EAASK,OAAO,YAElBL,EAASM,OAAO,WAAYhL,mBAAmBgF,EAAKlH,KAAK,QAEzD4M,EAASK,OAAO,YAGlBpE,EAAE2B,iBACF2C,EAAiBP,IAIrB,SAASO,EAAiBP,GACxB,MAAMY,EAAc,IAAIC,gBAAgBb,GAAU1N,WAC9CsO,EACFpI,EAAK+C,KAAK,GAAGtE,OAAOQ,SAAS2B,YAAYwH,KAEzCpI,EAAK+C,KAAK,GAAGtE,OAAOQ,SAAS2B,YAG3BnC,OAAO6J,wBACT7J,OAAO6J,sBAAwB,GCrG5B,SAASC,IA2BZ,MA1ByB,CAAC,eAAgB,UAAW,6BACjD,iBAAkB,6BAClB,8BACA,6CACA,UAAW,kCACX,2BAA4B,yBAC5B,sBACA,4BACA,kCACA,iBACA,kBACA,6BACA,+BACA,iCACA,kCACA,6CACA,cACA,wBACA,wBACA,sCACA,+BACA,sBACA,8BACA,0BACA,8BAEoBC,KAAIC,IACjB,CACH9L,MAAO8L,EACPC,MAAOD,EACPE,GAAIF,MAKT,SAASG,IAeZ,MAdoB,CAChB,eACA,cACA,WACA,6BACA,wBACA,qBACA,2BACA,2CACA,wBACA,gBACA,+CAGeJ,KAAIC,IACZ,CACH9L,MAAO8L,EACPC,MAAOD,EACPE,GAAIF,MChDhB,IAAII,EAqCJ,SAASC,EAAgBvI,GACvB,IAAIwI,EACJ,GAAIxI,EAAIkB,YAAa,CACnB,MAAMuH,EAAe,IAAIX,gBAAgB9H,EAAIkB,aACvCwH,EAAaD,EAAanC,IAAI,QAC9BqC,EAAgBF,EAAanC,IAAI,WACjCsC,EAAiBH,EAAanC,IAAI,YAClCuC,EAAmB,EAAmBD,EAAevH,MAAM,KAAO,GACpEqH,GAAcC,GAAiBC,GACjC5K,SAASoJ,eAAe,sBAAsBhL,MAAQsM,EACtD1K,SAASoJ,eAAe,yBAAyBhL,MAAQuM,EACzDL,EAAyBQ,iBAAiBD,GAC1CL,EAAoBxI,EAAIW,MAAMoI,UAAUC,QAAOC,IAC7C,IAAIC,EAAWD,EAAS9N,KAAKgO,cACzBC,EAAcH,EAASI,QAC3B,GAAIH,EAASI,SAASZ,EAAWS,gBAAkBC,IAAgBT,EACjE,IAAK,IAAIT,KAAWe,EAASM,SAC3B,GAAIV,EAAiBS,SAASpB,GAC5B,OAAOe,MAKNP,GAAcE,GACvB5K,SAASoJ,eAAe,sBAAsBhL,MAAQsM,EACtDJ,EAAyBQ,iBAAiBD,GAC1CL,EAAoBxI,EAAIW,MAAMoI,UAAUC,QAAOC,IAE7C,GADeA,EAAS9N,KAAKgO,cAChBG,SAASZ,EAAWS,eAC/B,IAAK,IAAIjB,KAAWe,EAASM,SAC3B,GAAIV,EAAiBS,SAASpB,GAC5B,OAAOe,MAKNN,GAAiBC,GAC1B5K,SAASoJ,eAAe,yBAAyBhL,MAAQuM,EACzDL,EAAyBQ,iBAAiBD,GAC1CL,EAAoBxI,EAAIW,MAAMoI,UAAUC,QAAOC,IAE7C,GADkBA,EAASI,UACPV,EAClB,IAAK,IAAIT,KAAWe,EAASM,SAC3B,GAAIV,EAAiBS,SAASpB,GAC5B,OAAOe,MAKNP,GACT1K,SAASoJ,eAAe,sBAAsBhL,MAAQsM,EACtDF,EAAoBxI,EAAIW,MAAMoI,UAAUC,QAAOC,IAC7C,GAAIA,EAAS9N,KAAKgO,cAAcG,SAASZ,EAAWS,eAClD,OAAOF,MAGFN,GACT3K,SAASoJ,eAAe,yBAAyBhL,MAAQuM,EACzDH,EAAoBxI,EAAIW,MAAMoI,UAAUC,QAAOC,IAC7C,GAAIA,EAASI,UAAYV,EACvB,OAAOM,MAGFL,IACTN,EAAyBQ,iBAAiBD,GAC1CL,EAAoBxI,EAAIW,MAAMoI,UAAUC,QAAOC,IAC7C,IAAK,IAAIf,KAAWe,EAASM,SAC3B,GAAIV,EAAiBS,SAASpB,GAC5B,OAAOe,WAMfT,EAAoBxI,EAAIW,MAAMoI,UAGhC7K,OAAO6K,UAAYP,EACnB,IAAItL,EAAM,GAKV,OAJIgB,OAAOsL,uBAAyBtL,OAAOsL,sBAAwBtM,IACjEA,EAAMgB,OAAOsL,sBAAwB,GAGhC,EAAsBhB,EAAkBzN,MAAM,EAAGmC,GAAO,GAAGnC,MAAM,EAAGmC,GC5E7E,MAAM+J,EAAW,IAAIC,SAuDrB,SAASM,EAAiBP,GACxB,MAAMY,EAAc,IAAIC,gBAAgBb,GAAU1N,WAC9CsO,EACFpI,EAAK+C,KAAK,GAAGtE,OAAOQ,SAAS2B,YAAYwH,KAEzCpI,EAAK+C,KAAK,GAAGtE,OAAOQ,SAAS2B,YAG3BnC,OAAO6J,wBACT7J,OAAO6J,sBAAwB,GC5GnC,IAAI0B,ECAJhK,EAAK,KCJU,SAAUO,GACnBhC,SAAS0L,KAAK7C,UAAU8C,SAAS,iBACnC3L,SAAS0L,KAAK7C,UAAUE,OAAO,eAC/B/I,SAAS0L,KAAK7C,UAAUC,IAAI,aAE9B8C,EAAS5J,GACT6J,EAAc7J,EAAItF,MAClBsD,SAASiD,MAAQjB,EAAIiB,MAAQ,mCAC7B6I,OAAO,sBAAwBC,MAAKC,IAClChM,SAASiM,cAAc,QAAQC,YAAc,GAC7ClM,SAASiM,cAAc,QAAQE,YAAYH,EAAOhD,WAClDhJ,SAASiM,cAAc,UAAUjI,iBAAiB,SAAS,KACzDhE,SAASoJ,eAAe,UAAUgD,MAAMC,QAAU,gBDPxD5K,EAAK,cHAU,SAAUO,GAgBvB,IAAIwI,EAfJoB,EAAS5J,GACT6J,EAAc7J,EAAItF,MAClBsD,SAASiD,MAAQjB,EAAIiB,MAAQ,sBAC7BjD,SAASiM,cAAc,QAAQC,YAAc,GAC7ClM,SAASiM,cAAc,QAAQE,YFVxBnM,SAASsM,cAAcC,yBAAyB,+3DEWvDvM,SAASiM,cAAc,QAAQE,YKdlB,WACX,MAAMK,EAAYxM,SAASyM,yBACrBC,EAAM1M,SAASsH,cAAc,MACnCoF,EAAIC,aAAa,KAAM,iBACvB,IAAK,IAAIlQ,EAAQ,EAAGA,EAAQ,IAAKA,IAC7B+P,EAAUL,YAAYnM,SAASsM,cAAcC,yBAAyB,wDAK1E,OADAG,EAAIP,YAAYK,GACTE,ELIkCE,IAC3CtC,EAA2B,IAAIuC,QAAQ7M,SAASoJ,eAAe,0BAA2B,CACxF0D,MAAO9C,IACP+C,QAAS/C,IACTgD,kBAAkB,EAClBC,aAAc,EACdC,YAAcD,GACL,QAAQA,0BAIfjL,EAAIW,MAAMoI,WACZP,EAAoBD,EAAgBvI,GACpC8J,OAAO,yBAA2BC,MAAKC,IACrCA,EAAOhD,QAAQwB,GACfrB,QM7B0BgE,OAAOjK,EAAc,MACnD,MACMkK,QAAiBC,MAAM,yDAASnK,EAAc,IAAIA,IAAgB,KAExE,aADmBkK,EAASE,QN6B1BC,GAAmBxB,MAAK9N,IACtB+D,EAAIW,MAAMoI,UAAY9M,EACtB+D,EAAIoD,OACJoF,EAAoBD,EAAgBvI,GACpC8J,OAAO,yBAA2BC,MAAKC,IACrCA,EAAOhD,QAAQwB,GACfrB,aG7BR1H,EAAK,wBILE,SAAsBO,EAAK6F,GAGhC,GAAI7F,EAAIW,MAAMsI,SAGZ,OAFAjJ,EAAIiJ,SAAWjJ,EAAIW,MAAMsI,cACzBpD,IAGF2F,UAAU1L,QDLmBqL,OAAOhQ,IACpC,MAAMiK,EAAM,yDAAyDjK,IAC/DiQ,QAAiBC,MAAMjG,GAE7B,aADmBgG,EAASE,QCG5BG,CAAgBlP,mBAAmByD,EAAIoB,OAAO6H,WAAWc,MAAK9N,IAC5D+D,EAAIW,MAAMsI,SAAWhN,EACrB+D,EAAIoD,OACJyC,OAED6F,OAAMC,IACLC,QAAQC,IAAIF,GACZ,MAAMG,EAAK9N,SAASsH,cAAc,KAClCwG,EAAGnB,aAAa,QAAS,gCACzBmB,EAAG5B,YAAc,uEACjBlM,SAASiM,cAAc,QAAQE,YAAY2B,SAIxC,SAAsB9L,GC3Bd,IAAUoB,ED4BvBlD,OAAO6J,sBAAwB7J,OAAO6N,QACtCnC,EAAS5J,GACThC,SAASiD,MAAQjB,EAAIiB,MAAQ,GAAGjB,EAAIW,MAAMsI,SAAS9N,6BC9B5BiG,ED+Bb,CACRH,MAAOjB,EAAIW,MAAMsI,SAAS9N,KAC1B6Q,YAAa,GAAGhM,EAAIW,MAAMsI,SAAS9N,iBACnC8Q,MAAO,GAAGjM,EAAIW,MAAMsI,SAASiD,UAC7B3J,IAAKrE,OAAOQ,SAAS+B,MClCrBzC,SAASiM,cAAc,6BAA6BU,aAAa,UAAWvJ,EAAOH,OACnFjD,SAASiM,cAAc,mCAAmCU,aAAa,UAAWvJ,EAAO4K,aACzFhO,SAASiM,cAAc,6BAA6BU,aAAa,UAAWvJ,EAAO6K,OACnFjO,SAASiM,cAAc,2BAA2BU,aAAa,UAAWvJ,EAAOmB,KDiC/ErE,OAAO6K,YACT7K,OAAOsL,sBAAwBtL,OAAO6K,UAAUoD,WAAWC,GAClDA,EAAKjR,OAAS6E,EAAIW,MAAMsI,SAAS9N,QAG5C2O,OAAO,yBAA2BC,MAAK,EAAG/C,QAASqF,MACjDrO,SAASiM,cAAc,QAAQC,YAAc,GAC7ClM,SAASiM,cAAc,QAAQE,YAAYkC,EAAgBrM,EAAIW,MAAMsI,WACrEjL,SAASoJ,eAAe,YAAYpF,iBAAiB,SAASmJ,MAAOjI,IACnEA,EAAE2B,iBACF,WACuBiF,OAAO,wBACrB9C,QAAQhH,EAAIW,MAAMsI,UACzB,MAAO0C,GACPC,QAAQC,IAAIF,OAIhBzN,OAAOoO,SAAS,EAAG,GACnBd,UAAUe,UAEXb,OAAMC,GAASC,QAAQC,IAAIF,QJhD9BlM,EAAK,SDDU,SAAUO,GAgBrB,IAAIwM,EAfJ5C,EAAS5J,GACT6J,EAAc7J,EAAItF,MAClBsD,SAASiD,MAAQjB,EAAIiB,MAAQ,sBAC7BjD,SAASiM,cAAc,QAAQC,YAAc,GAC7ClM,SAASiM,cAAc,QAAQE,YDX1BnM,SAASsM,cAAcC,yBAAyB,spFCYrDvM,SAASiM,cAAc,QAAQE,YOfpB,WACX,MAAMK,EAAYxM,SAASyM,yBACrBC,EAAM1M,SAASsH,cAAc,MACnCoF,EAAIC,aAAa,KAAM,YACvB,IAAK,IAAIlQ,EAAQ,EAAGA,EAAQ,IAAKA,IAC7B+P,EAAUL,YAAYnM,SAASsM,cAAcC,yBAAyB,mDAK1E,OADAG,EAAIP,YAAYK,GACTE,EPKoCE,IAC3CnB,EAAsB,IAAIoB,QAAQ7M,SAASoJ,eAAe,qBAAsB,CAC5E0D,MAAOzC,IACP0C,QAAS1C,IACT2C,kBAAkB,EAClBC,aAAc,EACdC,YAAcD,GACH,QAAQA,0BIRAE,OAAOjK,EAAc,MAC9C,MACMkK,QAAiBC,MAAM,oDAASnK,EAAc,IAAIA,IAAgB,KAExE,aADmBkK,EAASE,QJS1BmB,GAAc1C,MAAK9N,IACf+D,EAAIW,MAAM+L,KAAOzQ,EACjB+D,EAAIoD,OACJoJ,EAUR,SAAoBxM,GAChB,IAAIwM,EACJ,GAAIxM,EAAIkB,YAAa,CACjB,MAAMuH,EAAe,IAAIX,gBAAgB9H,EAAIkB,aACvCwH,EAAaD,EAAanC,IAAI,QAC9BqG,EAAelE,EAAanC,IAAI,UAChCsC,EAAiBH,EAAanC,IAAI,YAClCuC,EAAmB,EAAmBD,EAAevH,MAAM,KAAO,GACpEqH,GAAciE,GAAgB/D,GAC9B5K,SAASoJ,eAAe,sBAAsBhL,MAAQsM,EACtD1K,SAASoJ,eAAe,0BAA0BhL,MAAQuQ,EAC1DlD,EAAoBX,iBAAiBD,GACrC2D,EAAexM,EAAIW,MAAM+L,KAAK1D,QAAO4D,IACjC,IAAIC,EAAgBD,EAAIC,cAAc1D,cAClC2D,EAAiBF,EAAIE,eAAe3D,cACpC4D,EAASH,EAAII,qBACjB,IAAIH,EAAcvD,SAASZ,EAAWS,gBAAkB2D,EAAexD,SAASZ,EAAWuE,uBACnFF,IAAWJ,EACX,IAAK,IAAIzE,KAAW0E,EAAIrD,SACpB,GAAIV,EAAiBS,SAASpB,GAC1B,OAAO0E,MAMpBlE,GAAcE,GACrB5K,SAASoJ,eAAe,sBAAsBhL,MAAQsM,EACtDe,EAAoBX,iBAAiBD,GACrC2D,EAAexM,EAAIW,MAAM+L,KAAK1D,QAAO4D,IACjC,IAAIC,EAAgBD,EAAIC,cAAc1D,cAClC2D,EAAiBF,EAAIE,eAAe3D,cACxC,GAAI0D,EAAcvD,SAASZ,EAAWS,gBAAkB2D,EAAexD,SAASZ,EAAWuE,qBACvF,IAAK,IAAI/E,KAAW0E,EAAIrD,SACpB,GAAIV,EAAiBS,SAASpB,GAC1B,OAAO0E,MAKhBlE,GAAciE,GACrB3O,SAASoJ,eAAe,sBAAsBhL,MAAQsM,EACtD1K,SAASoJ,eAAe,0BAA0BhL,MAAQuQ,EAC1DH,EAAexM,EAAIW,MAAM+L,KAAK1D,QAAO4D,IACjC,IAAIC,EAAgBD,EAAIC,cAAc1D,cAClC2D,EAAiBF,EAAIE,eAAe3D,cACpC4D,EAASH,EAAII,qBACjB,IAAIH,EAAcvD,SAASZ,EAAWS,gBAAkB2D,EAAexD,SAASZ,EAAWuE,uBACnFF,IAAWJ,EACX,OAAOC,MAIZD,GAAgB/D,GACvB5K,SAASoJ,eAAe,0BAA0BhL,MAAQuQ,EAC1DlD,EAAoBX,iBAAiBD,GACrC2D,EAAexM,EAAIW,MAAM+L,KAAK1D,QAAO4D,IAEjC,GADaA,EAAII,uBACFL,EACX,IAAK,IAAIzE,KAAW0E,EAAIrD,SACpB,GAAIV,EAAiBS,SAASpB,GAC1B,OAAO0E,MAKhBlE,GACP1K,SAASoJ,eAAe,sBAAsBhL,MAAQsM,EACtD8D,EAAexM,EAAIW,MAAM+L,KAAK1D,QAAO4D,IACjC,IAAIC,EAAgBD,EAAIC,cAAc1D,cAClC2D,EAAiBF,EAAIE,eAAe3D,cACxC,GAAI0D,EAAcvD,SAASZ,EAAWS,gBAAkB2D,EAAexD,SAASZ,EAAWuE,qBACvF,OAAOL,MAGRD,GACP3O,SAASoJ,eAAe,0BAA0BhL,MAAQuQ,EAC1DH,EAAexM,EAAIW,MAAM+L,KAAK1D,QAAO4D,IAEjC,GADaA,EAAII,uBACFL,EACX,OAAOC,MAGRhE,IACPa,EAAoBX,iBAAiBD,GACrC2D,EAAexM,EAAIW,MAAM+L,KAAK1D,QAAO4D,IACnC,IAAK,IAAI1E,KAAW0E,EAAIrD,SACtB,GAAIV,EAAiBS,SAASpB,GAC5B,OAAO0E,WAMjBJ,EAAexM,EAAIW,MAAM+L,KAE7BxO,OAAOwO,KAAOF,EACd,IAAItP,EAAM,GACV,OAAO,EAAiBsP,EAAazR,MAAM,EAAGmC,GAAO,GAAGnC,MAAM,EAAGmC,GA5G9CgQ,CAAWlN,GAC1B8J,OAAO,yBAA2BC,MAAKC,IACnCA,EAAOhD,QAAQwF,GDsBzBxO,SAASoJ,eAAe,sBAAsBpF,iBAAiB,WAAYkB,IAC3D,UAAVA,EAAE1I,MACmB,KAAnB0I,EAAEY,OAAO1H,OACP6K,EAASI,IAAI,SACfJ,EAASK,OAAO,QAElBL,EAASM,OAAO,OAAQrE,EAAEY,OAAO1H,QAEjC6K,EAASK,OAAO,QAElBpE,EAAE2B,iBACF2C,EAAiBP,OAIrBjJ,SAASoJ,eAAe,0BAA0BK,SAAYvE,IACrC,KAAnBA,EAAEY,OAAO1H,OACP6K,EAASI,IAAI,WACfJ,EAASK,OAAO,UAElBL,EAASM,OAAO,SAAUrE,EAAEY,OAAO1H,QAEnC6K,EAASK,OAAO,UAElBpE,EAAE2B,iBACF2C,EAAiBP,IAGnBjJ,SAASoJ,eAAe,qBAAqBK,SAAYvE,IACvD,IAAewE,EAAKC,EAAhBpG,EAAO,GAEX,IAAK,IAAIxF,EAAI,EAAGA,EAAImH,EAAEY,OAAO/G,QAAQ/B,OAAQe,IAE3C4L,GADAD,EAAMxE,EAAEY,OAAO/G,QAAQhB,IACRK,MACXsL,EAAIE,UACNrG,EAAKtG,KAAK0M,GAIVzO,MAAMC,QAAQoI,IAASA,EAAKvG,OAAS,GACnCiM,EAASI,IAAI,aACfJ,EAASK,OAAO,YAElBL,EAASM,OAAO,WAAYhL,mBAAmBgF,EAAKlH,KAAK,QAEzD4M,EAASK,OAAO,YAGlBpE,EAAE2B,iBACF2C,EAAiBP,UClEjB/I,OAAOoO,SAAS,EAAG,MCzBvB7M,EAAK,KOXU,WACbzB,SAASiM,cAAc,QAAQC,YAAc,ePY/CzK,IAEAvB,OAAOiP,gBAAiB"}