{"version":3,"file":"bundle.js","sources":["../node_modules/page/page.mjs","js/utils/trackUrl.js","js/utils/setActiveMenu.js","js/omniunits/components/Search.js","js/utils/keywords.js","js/omniunits/index.js","js/dbbs/components/Search.js","js/dbbs/index.js","js/app.js","js/home/index.js","js/omniunits/components/Skeleton.js","js/utils/request.js","js/omniunit/index.js","js/utils/setOgMeta.js","js/dbbs/components/Skeleton.js","js/notfound.js","js/home/components/Home.js","js/omniunits/components/Card.js","js/omniunits/components/Content.js","../node_modules/notyf/notyf.es.js","js/omniunit/components/Profile.js","js/omniunit/components/Enhancements.js","js/omniunit/components/SPRecommendation.js","js/omniunit/components/Share.js","js/dbbs/components/Card.js","js/dbbs/components/Content.js"],"sourcesContent":["var isarray = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n/**\n * Expose `pathToRegexp`.\n */\nvar pathToRegexp_1 = pathToRegexp;\nvar parse_1 = parse;\nvar compile_1 = compile;\nvar tokensToFunction_1 = tokensToFunction;\nvar tokensToRegExp_1 = tokensToRegExp;\n\n/**\n * The main path matching regexp utility.\n *\n * @type {RegExp}\n */\nvar PATH_REGEXP = new RegExp([\n  // Match escaped characters that would otherwise appear in future matches.\n  // This allows the user to escape special characters that won't transform.\n  '(\\\\\\\\.)',\n  // Match Express-style parameters and un-named parameters with a prefix\n  // and optional suffixes. Matches appear as:\n  //\n  // \"/:test(\\\\d+)?\" => [\"/\", \"test\", \"\\d+\", undefined, \"?\", undefined]\n  // \"/route(\\\\d+)\"  => [undefined, undefined, undefined, \"\\d+\", undefined, undefined]\n  // \"/*\"            => [\"/\", undefined, undefined, undefined, undefined, \"*\"]\n  '([\\\\/.])?(?:(?:\\\\:(\\\\w+)(?:\\\\(((?:\\\\\\\\.|[^()])+)\\\\))?|\\\\(((?:\\\\\\\\.|[^()])+)\\\\))([+*?])?|(\\\\*))'\n].join('|'), 'g');\n\n/**\n * Parse a string for the raw tokens.\n *\n * @param  {String} str\n * @return {Array}\n */\nfunction parse (str) {\n  var tokens = [];\n  var key = 0;\n  var index = 0;\n  var path = '';\n  var res;\n\n  while ((res = PATH_REGEXP.exec(str)) != null) {\n    var m = res[0];\n    var escaped = res[1];\n    var offset = res.index;\n    path += str.slice(index, offset);\n    index = offset + m.length;\n\n    // Ignore already escaped sequences.\n    if (escaped) {\n      path += escaped[1];\n      continue\n    }\n\n    // Push the current path onto the tokens.\n    if (path) {\n      tokens.push(path);\n      path = '';\n    }\n\n    var prefix = res[2];\n    var name = res[3];\n    var capture = res[4];\n    var group = res[5];\n    var suffix = res[6];\n    var asterisk = res[7];\n\n    var repeat = suffix === '+' || suffix === '*';\n    var optional = suffix === '?' || suffix === '*';\n    var delimiter = prefix || '/';\n    var pattern = capture || group || (asterisk ? '.*' : '[^' + delimiter + ']+?');\n\n    tokens.push({\n      name: name || key++,\n      prefix: prefix || '',\n      delimiter: delimiter,\n      optional: optional,\n      repeat: repeat,\n      pattern: escapeGroup(pattern)\n    });\n  }\n\n  // Match any characters still remaining.\n  if (index < str.length) {\n    path += str.substr(index);\n  }\n\n  // If the path exists, push it onto the end.\n  if (path) {\n    tokens.push(path);\n  }\n\n  return tokens\n}\n\n/**\n * Compile a string to a template function for the path.\n *\n * @param  {String}   str\n * @return {Function}\n */\nfunction compile (str) {\n  return tokensToFunction(parse(str))\n}\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nfunction tokensToFunction (tokens) {\n  // Compile all the tokens into regexps.\n  var matches = new Array(tokens.length);\n\n  // Compile all the patterns before compilation.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] === 'object') {\n      matches[i] = new RegExp('^' + tokens[i].pattern + '$');\n    }\n  }\n\n  return function (obj) {\n    var path = '';\n    var data = obj || {};\n\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i];\n\n      if (typeof token === 'string') {\n        path += token;\n\n        continue\n      }\n\n      var value = data[token.name];\n      var segment;\n\n      if (value == null) {\n        if (token.optional) {\n          continue\n        } else {\n          throw new TypeError('Expected \"' + token.name + '\" to be defined')\n        }\n      }\n\n      if (isarray(value)) {\n        if (!token.repeat) {\n          throw new TypeError('Expected \"' + token.name + '\" to not repeat, but received \"' + value + '\"')\n        }\n\n        if (value.length === 0) {\n          if (token.optional) {\n            continue\n          } else {\n            throw new TypeError('Expected \"' + token.name + '\" to not be empty')\n          }\n        }\n\n        for (var j = 0; j < value.length; j++) {\n          segment = encodeURIComponent(value[j]);\n\n          if (!matches[i].test(segment)) {\n            throw new TypeError('Expected all \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n          }\n\n          path += (j === 0 ? token.prefix : token.delimiter) + segment;\n        }\n\n        continue\n      }\n\n      segment = encodeURIComponent(value);\n\n      if (!matches[i].test(segment)) {\n        throw new TypeError('Expected \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n      }\n\n      path += token.prefix + segment;\n    }\n\n    return path\n  }\n}\n\n/**\n * Escape a regular expression string.\n *\n * @param  {String} str\n * @return {String}\n */\nfunction escapeString (str) {\n  return str.replace(/([.+*?=^!:${}()[\\]|\\/])/g, '\\\\$1')\n}\n\n/**\n * Escape the capturing group by escaping special characters and meaning.\n *\n * @param  {String} group\n * @return {String}\n */\nfunction escapeGroup (group) {\n  return group.replace(/([=!:$\\/()])/g, '\\\\$1')\n}\n\n/**\n * Attach the keys as a property of the regexp.\n *\n * @param  {RegExp} re\n * @param  {Array}  keys\n * @return {RegExp}\n */\nfunction attachKeys (re, keys) {\n  re.keys = keys;\n  return re\n}\n\n/**\n * Get the flags for a regexp from the options.\n *\n * @param  {Object} options\n * @return {String}\n */\nfunction flags (options) {\n  return options.sensitive ? '' : 'i'\n}\n\n/**\n * Pull out keys from a regexp.\n *\n * @param  {RegExp} path\n * @param  {Array}  keys\n * @return {RegExp}\n */\nfunction regexpToRegexp (path, keys) {\n  // Use a negative lookahead to match only capturing groups.\n  var groups = path.source.match(/\\((?!\\?)/g);\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name: i,\n        prefix: null,\n        delimiter: null,\n        optional: false,\n        repeat: false,\n        pattern: null\n      });\n    }\n  }\n\n  return attachKeys(path, keys)\n}\n\n/**\n * Transform an array into a regexp.\n *\n * @param  {Array}  path\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction arrayToRegexp (path, keys, options) {\n  var parts = [];\n\n  for (var i = 0; i < path.length; i++) {\n    parts.push(pathToRegexp(path[i], keys, options).source);\n  }\n\n  var regexp = new RegExp('(?:' + parts.join('|') + ')', flags(options));\n\n  return attachKeys(regexp, keys)\n}\n\n/**\n * Create a path regexp from string input.\n *\n * @param  {String} path\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction stringToRegexp (path, keys, options) {\n  var tokens = parse(path);\n  var re = tokensToRegExp(tokens, options);\n\n  // Attach keys back to the regexp.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] !== 'string') {\n      keys.push(tokens[i]);\n    }\n  }\n\n  return attachKeys(re, keys)\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n *\n * @param  {Array}  tokens\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction tokensToRegExp (tokens, options) {\n  options = options || {};\n\n  var strict = options.strict;\n  var end = options.end !== false;\n  var route = '';\n  var lastToken = tokens[tokens.length - 1];\n  var endsWithSlash = typeof lastToken === 'string' && /\\/$/.test(lastToken);\n\n  // Iterate over the tokens and create our regexp string.\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i];\n\n    if (typeof token === 'string') {\n      route += escapeString(token);\n    } else {\n      var prefix = escapeString(token.prefix);\n      var capture = token.pattern;\n\n      if (token.repeat) {\n        capture += '(?:' + prefix + capture + ')*';\n      }\n\n      if (token.optional) {\n        if (prefix) {\n          capture = '(?:' + prefix + '(' + capture + '))?';\n        } else {\n          capture = '(' + capture + ')?';\n        }\n      } else {\n        capture = prefix + '(' + capture + ')';\n      }\n\n      route += capture;\n    }\n  }\n\n  // In non-strict mode we allow a slash at the end of match. If the path to\n  // match already ends with a slash, we remove it for consistency. The slash\n  // is valid at the end of a path match, not in the middle. This is important\n  // in non-ending mode, where \"/test/\" shouldn't match \"/test//route\".\n  if (!strict) {\n    route = (endsWithSlash ? route.slice(0, -2) : route) + '(?:\\\\/(?=$))?';\n  }\n\n  if (end) {\n    route += '$';\n  } else {\n    // In non-ending mode, we need the capturing groups to match as much as\n    // possible by using a positive lookahead to the end or next path segment.\n    route += strict && endsWithSlash ? '' : '(?=\\\\/|$)';\n  }\n\n  return new RegExp('^' + route, flags(options))\n}\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n *\n * @param  {(String|RegExp|Array)} path\n * @param  {Array}                 [keys]\n * @param  {Object}                [options]\n * @return {RegExp}\n */\nfunction pathToRegexp (path, keys, options) {\n  keys = keys || [];\n\n  if (!isarray(keys)) {\n    options = keys;\n    keys = [];\n  } else if (!options) {\n    options = {};\n  }\n\n  if (path instanceof RegExp) {\n    return regexpToRegexp(path, keys, options)\n  }\n\n  if (isarray(path)) {\n    return arrayToRegexp(path, keys, options)\n  }\n\n  return stringToRegexp(path, keys, options)\n}\n\npathToRegexp_1.parse = parse_1;\npathToRegexp_1.compile = compile_1;\npathToRegexp_1.tokensToFunction = tokensToFunction_1;\npathToRegexp_1.tokensToRegExp = tokensToRegExp_1;\n\n/**\n   * Module dependencies.\n   */\n\n  \n\n  /**\n   * Short-cuts for global-object checks\n   */\n\n  var hasDocument = ('undefined' !== typeof document);\n  var hasWindow = ('undefined' !== typeof window);\n  var hasHistory = ('undefined' !== typeof history);\n  var hasProcess = typeof process !== 'undefined';\n\n  /**\n   * Detect click event\n   */\n  var clickEvent = hasDocument && document.ontouchstart ? 'touchstart' : 'click';\n\n  /**\n   * To work properly with the URL\n   * history.location generated polyfill in https://github.com/devote/HTML5-History-API\n   */\n\n  var isLocation = hasWindow && !!(window.history.location || window.location);\n\n  /**\n   * The page instance\n   * @api private\n   */\n  function Page() {\n    // public things\n    this.callbacks = [];\n    this.exits = [];\n    this.current = '';\n    this.len = 0;\n\n    // private things\n    this._decodeURLComponents = true;\n    this._base = '';\n    this._strict = false;\n    this._running = false;\n    this._hashbang = false;\n\n    // bound functions\n    this.clickHandler = this.clickHandler.bind(this);\n    this._onpopstate = this._onpopstate.bind(this);\n  }\n\n  /**\n   * Configure the instance of page. This can be called multiple times.\n   *\n   * @param {Object} options\n   * @api public\n   */\n\n  Page.prototype.configure = function(options) {\n    var opts = options || {};\n\n    this._window = opts.window || (hasWindow && window);\n    this._decodeURLComponents = opts.decodeURLComponents !== false;\n    this._popstate = opts.popstate !== false && hasWindow;\n    this._click = opts.click !== false && hasDocument;\n    this._hashbang = !!opts.hashbang;\n\n    var _window = this._window;\n    if(this._popstate) {\n      _window.addEventListener('popstate', this._onpopstate, false);\n    } else if(hasWindow) {\n      _window.removeEventListener('popstate', this._onpopstate, false);\n    }\n\n    if (this._click) {\n      _window.document.addEventListener(clickEvent, this.clickHandler, false);\n    } else if(hasDocument) {\n      _window.document.removeEventListener(clickEvent, this.clickHandler, false);\n    }\n\n    if(this._hashbang && hasWindow && !hasHistory) {\n      _window.addEventListener('hashchange', this._onpopstate, false);\n    } else if(hasWindow) {\n      _window.removeEventListener('hashchange', this._onpopstate, false);\n    }\n  };\n\n  /**\n   * Get or set basepath to `path`.\n   *\n   * @param {string} path\n   * @api public\n   */\n\n  Page.prototype.base = function(path) {\n    if (0 === arguments.length) return this._base;\n    this._base = path;\n  };\n\n  /**\n   * Gets the `base`, which depends on whether we are using History or\n   * hashbang routing.\n\n   * @api private\n   */\n  Page.prototype._getBase = function() {\n    var base = this._base;\n    if(!!base) return base;\n    var loc = hasWindow && this._window && this._window.location;\n\n    if(hasWindow && this._hashbang && loc && loc.protocol === 'file:') {\n      base = loc.pathname;\n    }\n\n    return base;\n  };\n\n  /**\n   * Get or set strict path matching to `enable`\n   *\n   * @param {boolean} enable\n   * @api public\n   */\n\n  Page.prototype.strict = function(enable) {\n    if (0 === arguments.length) return this._strict;\n    this._strict = enable;\n  };\n\n\n  /**\n   * Bind with the given `options`.\n   *\n   * Options:\n   *\n   *    - `click` bind to click events [true]\n   *    - `popstate` bind to popstate [true]\n   *    - `dispatch` perform initial dispatch [true]\n   *\n   * @param {Object} options\n   * @api public\n   */\n\n  Page.prototype.start = function(options) {\n    var opts = options || {};\n    this.configure(opts);\n\n    if (false === opts.dispatch) return;\n    this._running = true;\n\n    var url;\n    if(isLocation) {\n      var window = this._window;\n      var loc = window.location;\n\n      if(this._hashbang && ~loc.hash.indexOf('#!')) {\n        url = loc.hash.substr(2) + loc.search;\n      } else if (this._hashbang) {\n        url = loc.search + loc.hash;\n      } else {\n        url = loc.pathname + loc.search + loc.hash;\n      }\n    }\n\n    this.replace(url, null, true, opts.dispatch);\n  };\n\n  /**\n   * Unbind click and popstate event handlers.\n   *\n   * @api public\n   */\n\n  Page.prototype.stop = function() {\n    if (!this._running) return;\n    this.current = '';\n    this.len = 0;\n    this._running = false;\n\n    var window = this._window;\n    this._click && window.document.removeEventListener(clickEvent, this.clickHandler, false);\n    hasWindow && window.removeEventListener('popstate', this._onpopstate, false);\n    hasWindow && window.removeEventListener('hashchange', this._onpopstate, false);\n  };\n\n  /**\n   * Show `path` with optional `state` object.\n   *\n   * @param {string} path\n   * @param {Object=} state\n   * @param {boolean=} dispatch\n   * @param {boolean=} push\n   * @return {!Context}\n   * @api public\n   */\n\n  Page.prototype.show = function(path, state, dispatch, push) {\n    var ctx = new Context(path, state, this),\n      prev = this.prevContext;\n    this.prevContext = ctx;\n    this.current = ctx.path;\n    if (false !== dispatch) this.dispatch(ctx, prev);\n    if (false !== ctx.handled && false !== push) ctx.pushState();\n    return ctx;\n  };\n\n  /**\n   * Goes back in the history\n   * Back should always let the current route push state and then go back.\n   *\n   * @param {string} path - fallback path to go back if no more history exists, if undefined defaults to page.base\n   * @param {Object=} state\n   * @api public\n   */\n\n  Page.prototype.back = function(path, state) {\n    var page = this;\n    if (this.len > 0) {\n      var window = this._window;\n      // this may need more testing to see if all browsers\n      // wait for the next tick to go back in history\n      hasHistory && window.history.back();\n      this.len--;\n    } else if (path) {\n      setTimeout(function() {\n        page.show(path, state);\n      });\n    } else {\n      setTimeout(function() {\n        page.show(page._getBase(), state);\n      });\n    }\n  };\n\n  /**\n   * Register route to redirect from one path to other\n   * or just redirect to another route\n   *\n   * @param {string} from - if param 'to' is undefined redirects to 'from'\n   * @param {string=} to\n   * @api public\n   */\n  Page.prototype.redirect = function(from, to) {\n    var inst = this;\n\n    // Define route from a path to another\n    if ('string' === typeof from && 'string' === typeof to) {\n      page.call(this, from, function(e) {\n        setTimeout(function() {\n          inst.replace(/** @type {!string} */ (to));\n        }, 0);\n      });\n    }\n\n    // Wait for the push state and replace it with another\n    if ('string' === typeof from && 'undefined' === typeof to) {\n      setTimeout(function() {\n        inst.replace(from);\n      }, 0);\n    }\n  };\n\n  /**\n   * Replace `path` with optional `state` object.\n   *\n   * @param {string} path\n   * @param {Object=} state\n   * @param {boolean=} init\n   * @param {boolean=} dispatch\n   * @return {!Context}\n   * @api public\n   */\n\n\n  Page.prototype.replace = function(path, state, init, dispatch) {\n    var ctx = new Context(path, state, this),\n      prev = this.prevContext;\n    this.prevContext = ctx;\n    this.current = ctx.path;\n    ctx.init = init;\n    ctx.save(); // save before dispatching, which may redirect\n    if (false !== dispatch) this.dispatch(ctx, prev);\n    return ctx;\n  };\n\n  /**\n   * Dispatch the given `ctx`.\n   *\n   * @param {Context} ctx\n   * @api private\n   */\n\n  Page.prototype.dispatch = function(ctx, prev) {\n    var i = 0, j = 0, page = this;\n\n    function nextExit() {\n      var fn = page.exits[j++];\n      if (!fn) return nextEnter();\n      fn(prev, nextExit);\n    }\n\n    function nextEnter() {\n      var fn = page.callbacks[i++];\n\n      if (ctx.path !== page.current) {\n        ctx.handled = false;\n        return;\n      }\n      if (!fn) return unhandled.call(page, ctx);\n      fn(ctx, nextEnter);\n    }\n\n    if (prev) {\n      nextExit();\n    } else {\n      nextEnter();\n    }\n  };\n\n  /**\n   * Register an exit route on `path` with\n   * callback `fn()`, which will be called\n   * on the previous context when a new\n   * page is visited.\n   */\n  Page.prototype.exit = function(path, fn) {\n    if (typeof path === 'function') {\n      return this.exit('*', path);\n    }\n\n    var route = new Route(path, null, this);\n    for (var i = 1; i < arguments.length; ++i) {\n      this.exits.push(route.middleware(arguments[i]));\n    }\n  };\n\n  /**\n   * Handle \"click\" events.\n   */\n\n  /* jshint +W054 */\n  Page.prototype.clickHandler = function(e) {\n    if (1 !== this._which(e)) return;\n\n    if (e.metaKey || e.ctrlKey || e.shiftKey) return;\n    if (e.defaultPrevented) return;\n\n    // ensure link\n    // use shadow dom when available if not, fall back to composedPath()\n    // for browsers that only have shady\n    var el = e.target;\n    var eventPath = e.path || (e.composedPath ? e.composedPath() : null);\n\n    if(eventPath) {\n      for (var i = 0; i < eventPath.length; i++) {\n        if (!eventPath[i].nodeName) continue;\n        if (eventPath[i].nodeName.toUpperCase() !== 'A') continue;\n        if (!eventPath[i].href) continue;\n\n        el = eventPath[i];\n        break;\n      }\n    }\n\n    // continue ensure link\n    // el.nodeName for svg links are 'a' instead of 'A'\n    while (el && 'A' !== el.nodeName.toUpperCase()) el = el.parentNode;\n    if (!el || 'A' !== el.nodeName.toUpperCase()) return;\n\n    // check if link is inside an svg\n    // in this case, both href and target are always inside an object\n    var svg = (typeof el.href === 'object') && el.href.constructor.name === 'SVGAnimatedString';\n\n    // Ignore if tag has\n    // 1. \"download\" attribute\n    // 2. rel=\"external\" attribute\n    if (el.hasAttribute('download') || el.getAttribute('rel') === 'external') return;\n\n    // ensure non-hash for the same path\n    var link = el.getAttribute('href');\n    if(!this._hashbang && this._samePath(el) && (el.hash || '#' === link)) return;\n\n    // Check for mailto: in the href\n    if (link && link.indexOf('mailto:') > -1) return;\n\n    // check target\n    // svg target is an object and its desired value is in .baseVal property\n    if (svg ? el.target.baseVal : el.target) return;\n\n    // x-origin\n    // note: svg links that are not relative don't call click events (and skip page.js)\n    // consequently, all svg links tested inside page.js are relative and in the same origin\n    if (!svg && !this.sameOrigin(el.href)) return;\n\n    // rebuild path\n    // There aren't .pathname and .search properties in svg links, so we use href\n    // Also, svg href is an object and its desired value is in .baseVal property\n    var path = svg ? el.href.baseVal : (el.pathname + el.search + (el.hash || ''));\n\n    path = path[0] !== '/' ? '/' + path : path;\n\n    // strip leading \"/[drive letter]:\" on NW.js on Windows\n    if (hasProcess && path.match(/^\\/[a-zA-Z]:\\//)) {\n      path = path.replace(/^\\/[a-zA-Z]:\\//, '/');\n    }\n\n    // same page\n    var orig = path;\n    var pageBase = this._getBase();\n\n    if (path.indexOf(pageBase) === 0) {\n      path = path.substr(pageBase.length);\n    }\n\n    if (this._hashbang) path = path.replace('#!', '');\n\n    if (pageBase && orig === path && (!isLocation || this._window.location.protocol !== 'file:')) {\n      return;\n    }\n\n    e.preventDefault();\n    this.show(orig);\n  };\n\n  /**\n   * Handle \"populate\" events.\n   * @api private\n   */\n\n  Page.prototype._onpopstate = (function () {\n    var loaded = false;\n    if ( ! hasWindow ) {\n      return function () {};\n    }\n    if (hasDocument && document.readyState === 'complete') {\n      loaded = true;\n    } else {\n      window.addEventListener('load', function() {\n        setTimeout(function() {\n          loaded = true;\n        }, 0);\n      });\n    }\n    return function onpopstate(e) {\n      if (!loaded) return;\n      var page = this;\n      if (e.state) {\n        var path = e.state.path;\n        page.replace(path, e.state);\n      } else if (isLocation) {\n        var loc = page._window.location;\n        page.show(loc.pathname + loc.search + loc.hash, undefined, undefined, false);\n      }\n    };\n  })();\n\n  /**\n   * Event button.\n   */\n  Page.prototype._which = function(e) {\n    e = e || (hasWindow && this._window.event);\n    return null == e.which ? e.button : e.which;\n  };\n\n  /**\n   * Convert to a URL object\n   * @api private\n   */\n  Page.prototype._toURL = function(href) {\n    var window = this._window;\n    if(typeof URL === 'function' && isLocation) {\n      return new URL(href, window.location.toString());\n    } else if (hasDocument) {\n      var anc = window.document.createElement('a');\n      anc.href = href;\n      return anc;\n    }\n  };\n\n  /**\n   * Check if `href` is the same origin.\n   * @param {string} href\n   * @api public\n   */\n  Page.prototype.sameOrigin = function(href) {\n    if(!href || !isLocation) return false;\n\n    var url = this._toURL(href);\n    var window = this._window;\n\n    var loc = window.location;\n\n    /*\n       When the port is the default http port 80 for http, or 443 for\n       https, internet explorer 11 returns an empty string for loc.port,\n       so we need to compare loc.port with an empty string if url.port\n       is the default port 80 or 443.\n       Also the comparition with `port` is changed from `===` to `==` because\n       `port` can be a string sometimes. This only applies to ie11.\n    */\n    return loc.protocol === url.protocol &&\n      loc.hostname === url.hostname &&\n      (loc.port === url.port || loc.port === '' && (url.port == 80 || url.port == 443)); // jshint ignore:line\n  };\n\n  /**\n   * @api private\n   */\n  Page.prototype._samePath = function(url) {\n    if(!isLocation) return false;\n    var window = this._window;\n    var loc = window.location;\n    return url.pathname === loc.pathname &&\n      url.search === loc.search;\n  };\n\n  /**\n   * Remove URL encoding from the given `str`.\n   * Accommodates whitespace in both x-www-form-urlencoded\n   * and regular percent-encoded form.\n   *\n   * @param {string} val - URL component to decode\n   * @api private\n   */\n  Page.prototype._decodeURLEncodedURIComponent = function(val) {\n    if (typeof val !== 'string') { return val; }\n    return this._decodeURLComponents ? decodeURIComponent(val.replace(/\\+/g, ' ')) : val;\n  };\n\n  /**\n   * Create a new `page` instance and function\n   */\n  function createPage() {\n    var pageInstance = new Page();\n\n    function pageFn(/* args */) {\n      return page.apply(pageInstance, arguments);\n    }\n\n    // Copy all of the things over. In 2.0 maybe we use setPrototypeOf\n    pageFn.callbacks = pageInstance.callbacks;\n    pageFn.exits = pageInstance.exits;\n    pageFn.base = pageInstance.base.bind(pageInstance);\n    pageFn.strict = pageInstance.strict.bind(pageInstance);\n    pageFn.start = pageInstance.start.bind(pageInstance);\n    pageFn.stop = pageInstance.stop.bind(pageInstance);\n    pageFn.show = pageInstance.show.bind(pageInstance);\n    pageFn.back = pageInstance.back.bind(pageInstance);\n    pageFn.redirect = pageInstance.redirect.bind(pageInstance);\n    pageFn.replace = pageInstance.replace.bind(pageInstance);\n    pageFn.dispatch = pageInstance.dispatch.bind(pageInstance);\n    pageFn.exit = pageInstance.exit.bind(pageInstance);\n    pageFn.configure = pageInstance.configure.bind(pageInstance);\n    pageFn.sameOrigin = pageInstance.sameOrigin.bind(pageInstance);\n    pageFn.clickHandler = pageInstance.clickHandler.bind(pageInstance);\n\n    pageFn.create = createPage;\n\n    Object.defineProperty(pageFn, 'len', {\n      get: function(){\n        return pageInstance.len;\n      },\n      set: function(val) {\n        pageInstance.len = val;\n      }\n    });\n\n    Object.defineProperty(pageFn, 'current', {\n      get: function(){\n        return pageInstance.current;\n      },\n      set: function(val) {\n        pageInstance.current = val;\n      }\n    });\n\n    // In 2.0 these can be named exports\n    pageFn.Context = Context;\n    pageFn.Route = Route;\n\n    return pageFn;\n  }\n\n  /**\n   * Register `path` with callback `fn()`,\n   * or route `path`, or redirection,\n   * or `page.start()`.\n   *\n   *   page(fn);\n   *   page('*', fn);\n   *   page('/user/:id', load, user);\n   *   page('/user/' + user.id, { some: 'thing' });\n   *   page('/user/' + user.id);\n   *   page('/from', '/to')\n   *   page();\n   *\n   * @param {string|!Function|!Object} path\n   * @param {Function=} fn\n   * @api public\n   */\n\n  function page(path, fn) {\n    // <callback>\n    if ('function' === typeof path) {\n      return page.call(this, '*', path);\n    }\n\n    // route <path> to <callback ...>\n    if ('function' === typeof fn) {\n      var route = new Route(/** @type {string} */ (path), null, this);\n      for (var i = 1; i < arguments.length; ++i) {\n        this.callbacks.push(route.middleware(arguments[i]));\n      }\n      // show <path> with [state]\n    } else if ('string' === typeof path) {\n      this['string' === typeof fn ? 'redirect' : 'show'](path, fn);\n      // start [options]\n    } else {\n      this.start(path);\n    }\n  }\n\n  /**\n   * Unhandled `ctx`. When it's not the initial\n   * popstate then redirect. If you wish to handle\n   * 404s on your own use `page('*', callback)`.\n   *\n   * @param {Context} ctx\n   * @api private\n   */\n  function unhandled(ctx) {\n    if (ctx.handled) return;\n    var current;\n    var page = this;\n    var window = page._window;\n\n    if (page._hashbang) {\n      current = isLocation && this._getBase() + window.location.hash.replace('#!', '');\n    } else {\n      current = isLocation && window.location.pathname + window.location.search;\n    }\n\n    if (current === ctx.canonicalPath) return;\n    page.stop();\n    ctx.handled = false;\n    isLocation && (window.location.href = ctx.canonicalPath);\n  }\n\n  /**\n   * Escapes RegExp characters in the given string.\n   *\n   * @param {string} s\n   * @api private\n   */\n  function escapeRegExp(s) {\n    return s.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, '\\\\$1');\n  }\n\n  /**\n   * Initialize a new \"request\" `Context`\n   * with the given `path` and optional initial `state`.\n   *\n   * @constructor\n   * @param {string} path\n   * @param {Object=} state\n   * @api public\n   */\n\n  function Context(path, state, pageInstance) {\n    var _page = this.page = pageInstance || page;\n    var window = _page._window;\n    var hashbang = _page._hashbang;\n\n    var pageBase = _page._getBase();\n    if ('/' === path[0] && 0 !== path.indexOf(pageBase)) path = pageBase + (hashbang ? '#!' : '') + path;\n    var i = path.indexOf('?');\n\n    this.canonicalPath = path;\n    var re = new RegExp('^' + escapeRegExp(pageBase));\n    this.path = path.replace(re, '') || '/';\n    if (hashbang) this.path = this.path.replace('#!', '') || '/';\n\n    this.title = (hasDocument && window.document.title);\n    this.state = state || {};\n    this.state.path = path;\n    this.querystring = ~i ? _page._decodeURLEncodedURIComponent(path.slice(i + 1)) : '';\n    this.pathname = _page._decodeURLEncodedURIComponent(~i ? path.slice(0, i) : path);\n    this.params = {};\n\n    // fragment\n    this.hash = '';\n    if (!hashbang) {\n      if (!~this.path.indexOf('#')) return;\n      var parts = this.path.split('#');\n      this.path = this.pathname = parts[0];\n      this.hash = _page._decodeURLEncodedURIComponent(parts[1]) || '';\n      this.querystring = this.querystring.split('#')[0];\n    }\n  }\n\n  /**\n   * Push state.\n   *\n   * @api private\n   */\n\n  Context.prototype.pushState = function() {\n    var page = this.page;\n    var window = page._window;\n    var hashbang = page._hashbang;\n\n    page.len++;\n    if (hasHistory) {\n        window.history.pushState(this.state, this.title,\n          hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n    }\n  };\n\n  /**\n   * Save the context state.\n   *\n   * @api public\n   */\n\n  Context.prototype.save = function() {\n    var page = this.page;\n    if (hasHistory) {\n        page._window.history.replaceState(this.state, this.title,\n          page._hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n    }\n  };\n\n  /**\n   * Initialize `Route` with the given HTTP `path`,\n   * and an array of `callbacks` and `options`.\n   *\n   * Options:\n   *\n   *   - `sensitive`    enable case-sensitive routes\n   *   - `strict`       enable strict matching for trailing slashes\n   *\n   * @constructor\n   * @param {string} path\n   * @param {Object=} options\n   * @api private\n   */\n\n  function Route(path, options, page) {\n    var _page = this.page = page || globalPage;\n    var opts = options || {};\n    opts.strict = opts.strict || _page._strict;\n    this.path = (path === '*') ? '(.*)' : path;\n    this.method = 'GET';\n    this.regexp = pathToRegexp_1(this.path, this.keys = [], opts);\n  }\n\n  /**\n   * Return route middleware with\n   * the given callback `fn()`.\n   *\n   * @param {Function} fn\n   * @return {Function}\n   * @api public\n   */\n\n  Route.prototype.middleware = function(fn) {\n    var self = this;\n    return function(ctx, next) {\n      if (self.match(ctx.path, ctx.params)) {\n        ctx.routePath = self.path;\n        return fn(ctx, next);\n      }\n      next();\n    };\n  };\n\n  /**\n   * Check if this route matches `path`, if so\n   * populate `params`.\n   *\n   * @param {string} path\n   * @param {Object} params\n   * @return {boolean}\n   * @api private\n   */\n\n  Route.prototype.match = function(path, params) {\n    var keys = this.keys,\n      qsIndex = path.indexOf('?'),\n      pathname = ~qsIndex ? path.slice(0, qsIndex) : path,\n      m = this.regexp.exec(decodeURIComponent(pathname));\n\n    if (!m) return false;\n\n    delete params[0];\n\n    for (var i = 1, len = m.length; i < len; ++i) {\n      var key = keys[i - 1];\n      var val = this.page._decodeURLEncodedURIComponent(m[i]);\n      if (val !== undefined || !(hasOwnProperty.call(params, key.name))) {\n        params[key.name] = val;\n      }\n    }\n\n    return true;\n  };\n\n\n  /**\n   * Module exports.\n   */\n\n  var globalPage = createPage();\n  var page_js = globalPage;\n  var default_1 = globalPage;\n\npage_js.default = default_1;\n\nexport default page_js;\n","export default function(ctx) {\n  if (window.ga !== undefined) {\n    ga('set', {\n      page: ctx.canonicalPath,\n      title: document.title\n    });\n    ga('send', 'pageview');\n  }\n}","export default function(path) {\n  Array.from(document.querySelectorAll(`.navigation-list li a`)).forEach(el => {\n    if (el.getAttribute('href') === path) {\n      el.classList.add('active');\n    } else {\n      el.classList.remove('active');\n    }\n  });\n}","import page from \"page\";\n\nexport function SearchForm() {\n  return document.createRange().createContextualFragment(`\n  <form method=\"GET\" class=\"form\">\n  <div class=\"relative mb-4\">\n    <select id=\"searchOmniUnitElement\" class=\"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline\">\n      <option value=\"\">Element</option>\n      <option value=\"Fire\">Fire</option>\n      <option value=\"Water\">Water</option>\n      <option value=\"Earth\">Earth</option>\n      <option value=\"Thunder\">Thunder</option>\n      <option value=\"Light\">Light</option>\n      <option value=\"Dark\">Dark</option>\n    </select>\n    <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\n      <svg class=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"/></svg>\n    </div>\n  </div>\n  <div class=\"relative mb-4\">\n    <select multiple id=\"searchOmniUnitKeywords\" class=\"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline\">\n      <option value=\"\">Keywords</option>\n    </select>\n  </div>\n  <div class=\"relative mb-4\">\n    <span>\n      <input class=\"focus:outline-0 bg-transparent border-b border-gray-500 focus:border-green-500 placeholder-gray-600 py-2 pr-4 pl-10 w-full appearance-none leading-normal\" type=\"text\" placeholder=\"Omni unit name\" id=\"searchOmniUnitName\">\n    </span>\n    <div class=\"pointer-events-none absolute inset-y-0 left-0 pl-4 flex items-center\">\n      <svg class=\"fill-current pointer-events-none text-gray-600 w-4 h-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z\"></path></svg>\n    </div>\n  </div>\n</form>\n  `);\n}\n\n\nconst formData = new FormData();\nexport function Search() {\n  document.getElementById('searchOmniUnitName').addEventListener('keydown', (e) => {\n    if (e.key === 'Enter') {\n      if (e.target.value !== \"\") {\n        if (formData.has('name')) {\n          formData.delete('name');\n        }\n        formData.append('name', e.target.value);  \n      } else {\n        formData.delete('name');\n      }\n      e.preventDefault();\n      showSearchResult(formData); \n    }\n  });\n\n  document.getElementById('searchOmniUnitElement').onchange = (e) => {\n    if (e.target.value !== \"\") {\n      if (formData.has('element')) {\n        formData.delete('element');\n      }\n      formData.append('element', e.target.value);\n    } else {\n      formData.delete('element');\n    }\n    e.preventDefault();\n    showSearchResult(formData);\n  }\n\n  document.getElementById('searchOmniUnitKeywords').onchange = (e) => {\n    var opts = [], opt, optValue;\n\n    for (let i = 0; i < e.target.options.length; i++) {\n      opt = e.target.options[i];\n      optValue = opt.value;\n      if (opt.selected) {\n        opts.push(optValue);\n      }\n    }\n\n    if (Array.isArray(opts) && opts.length > 0) {\n      if (formData.has('keywords')) {\n        formData.delete('keywords');\n      }\n      formData.append('keywords', encodeURIComponent(opts.join(\",\")));\n    } else {\n      formData.delete('keywords');\n    }\n\n    e.preventDefault();\n    showSearchResult(formData);\n  }\n}\n\nfunction showSearchResult(formData) {\n  const queryString = new URLSearchParams(formData).toString();\n  if (queryString) {\n    page.show(`${window.location.pathname}?${queryString}`);\n  } else {\n    page.show(`${window.location.pathname}`);\n  }\n  // Set previous page position Y to 0 when searching\n  if (window.previousOmniUnitsPage) {\n    window.previousOmniUnitsPage = 0;\n  }\n}","export function getOmniUnitKeywords() {\n    const omniUnitKeywords = [\"extra action\", \"evasion\", \"activates BB/SBB/UBB twice\",\n        \"DoT mitigation\", \"negate all status ailments\",\n        \"negates all status ailments\",\n        \"negates all status ailments for all allies\",\n        \"Stealth\", \"normal attacks may hit all foes\",\n        \"raises normal hit amount\", \"status ailment removal\",\n        \"def ignoring effect\",\n        \"reduces BB gauge required\",\n        \"reduction to BB activation cost\",\n        \"fills OD gauge\",\n        \"boosts OD gauge\",\n        \"status ailments infliction\",\n        \"resistance against KO attack\",\n        \"resistance against 1 KO attack\",\n        \"resistance against 2 KO attacks\",\n        \"Adds Doom effect purge from self to BB/UBB\",\n        \"purges Doom\",\n        \"raises allies from KO\",\n        \"purges LS and ES Lock\",\n        \"boost to Summoner Avatar EXP gained\",\n        \"boost to Summoner EXP gained\",\n        \"boost to EXP gained\",\n        \"removes all status ailments\",\n        \"boosts ABP and CBP gain\",\n        \"elemental damage reduction\"\n    ];\n    return omniUnitKeywords.map(keyword => {\n        return {\n            value: keyword,\n            label: keyword,\n            id: keyword\n        }\n    });\n}\n\nexport function getDbbKeywords () {\n    const dbbKeywords = [\n        \"100% evasion\",\n        \"80% evasion\",\n        \"OD gauge\",\n        \"activates BB/SBB/UBB twice\",\n        \"purges LS and ES Lock\",\n        \"100% DoT reduction\",\n        \"raises normal hit amount\",\n        \"adds status ailment infliction to attack\",\n        \"raises allies from KO\",\n        \"KO resistance\",\n        \"perform 1 extra action within the same turn\"\n    ];\n\n    return dbbKeywords.map(keyword => {\n        return {\n            value: keyword,\n            label: keyword,\n            id: keyword\n        }\n    });\n}","import { SearchForm, Search } from \"./components/Search.js\";\nimport Skeleton from \"./components/Skeleton.js\";\nimport { getOmniUnitKeywords } from \"../utils/keywords.js\";\nimport setActiveMenu from \"../utils/setActiveMenu.js\";\nimport trackUrl from \"../utils/trackUrl.js\";\nimport { requestOmniUnits } from \"../utils/request.js\";\n\nlet searchOmniUnitKeywordsEl;\nexport default function (ctx) {\n  trackUrl(ctx);\n  setActiveMenu(ctx.path);\n  document.title = ctx.title = 'Brave Frontier Wiki';\n  document.querySelector('main').textContent = '';\n  document.querySelector('main').appendChild(SearchForm());\n  document.querySelector('main').appendChild(Skeleton());\n  searchOmniUnitKeywordsEl = new Choices(document.getElementById('searchOmniUnitKeywords'), {\n    items: getOmniUnitKeywords(),\n    choices: getOmniUnitKeywords(),\n    removeItemButton: true,\n    maxItemCount: 3,\n    maxItemText: (maxItemCount) => {\n      return `Only ${maxItemCount} values can be added`;\n    }\n  });\n  let filteredOmniUnits;\n  if (ctx.state.omniunits) {\n    filteredOmniUnits = filterOmniUnits(ctx);\n    import(\"./components/Content.js\").then(module => {\n      module.default(filteredOmniUnits);\n      Search();\n    });\n  } else {\n    requestOmniUnits().then(data => {\n      ctx.state.omniunits = data;\n      ctx.save();\n      filteredOmniUnits = filterOmniUnits(ctx);\n      import(\"./components/Content.js\").then(module => {\n        module.default(filteredOmniUnits);\n        Search();\n      });\n    });\n  }\n}\n\nfunction filterOmniUnits(ctx) {\n  let filteredOmniUnits;\n  if (ctx.querystring) {\n    const searchParams = new URLSearchParams(ctx.querystring);\n    const searchName = searchParams.get('name');\n    const searchElement = searchParams.get('element');\n    const searchKeywords = searchParams.get('keywords');\n    const selectedKeywords = (searchKeywords) ? searchKeywords.split(\",\") : [];\n    if (searchName && searchElement && searchKeywords) {\n      document.getElementById('searchOmniUnitName').value = searchName;\n      document.getElementById('searchOmniUnitElement').value = searchElement;\n      searchOmniUnitKeywordsEl.setChoiceByValue(selectedKeywords);\n      filteredOmniUnits = ctx.state.omniunits.filter(omniunit => {\n        let unitName = omniunit.name.toLowerCase();\n        let unitElement = omniunit.element;\n        if (unitName.includes(searchName.toLowerCase()) && unitElement === searchElement) {\n          for (let keyword of omniunit.keywords) {\n            if (selectedKeywords.includes(keyword)) {\n              return omniunit;\n            }\n          }\n        }\n      });\n    } else if (searchName && searchKeywords) {\n      document.getElementById('searchOmniUnitName').value = searchName;\n      searchOmniUnitKeywordsEl.setChoiceByValue(selectedKeywords);\n      filteredOmniUnits = ctx.state.omniunits.filter(omniunit => {\n        let unitName = omniunit.name.toLowerCase();\n        if (unitName.includes(searchName.toLowerCase())) {\n          for (let keyword of omniunit.keywords) {\n            if (selectedKeywords.includes(keyword)) {\n              return omniunit;\n            }\n          }\n        }\n      });\n    } else if (searchElement && searchKeywords) {\n      document.getElementById('searchOmniUnitElement').value = searchElement;\n      searchOmniUnitKeywordsEl.setChoiceByValue(selectedKeywords);\n      filteredOmniUnits = ctx.state.omniunits.filter(omniunit => {\n        let unitElement = omniunit.element;\n        if (unitElement === searchElement) {\n          for (let keyword of omniunit.keywords) {\n            if (selectedKeywords.includes(keyword)) {\n              return omniunit;\n            }\n          }\n        }\n      });\n    } else if (searchName) {\n      document.getElementById('searchOmniUnitName').value = searchName;\n      filteredOmniUnits = ctx.state.omniunits.filter(omniunit => {\n        if (omniunit.name.toLowerCase().includes(searchName.toLowerCase())) {\n          return omniunit;\n        }\n      });\n    } else if (searchElement) {\n      document.getElementById('searchOmniUnitElement').value = searchElement;\n      filteredOmniUnits = ctx.state.omniunits.filter(omniunit => {\n        if (omniunit.element === searchElement) {\n          return omniunit;\n        }\n      });\n    } else if (searchKeywords) {\n      searchOmniUnitKeywordsEl.setChoiceByValue(selectedKeywords);\n      filteredOmniUnits = ctx.state.omniunits.filter(omniunit => {\n        for (let keyword of omniunit.keywords) {\n          if (selectedKeywords.includes(keyword)) {\n            return omniunit;\n          }\n        }\n      });\n    }\n  } else {\n    filteredOmniUnits = ctx.state.omniunits;\n  }\n\n  window.omniunits = filteredOmniUnits;\n  let end = 99;\n  if (window.selectedOmniUnitIndex && window.selectedOmniUnitIndex > end) {\n    end = window.selectedOmniUnitIndex + 5;\n  }\n\n  return (filteredOmniUnits) ? filteredOmniUnits.slice(0, end) : [].slice(0, end);\n}","import page from \"page\";\n\nexport function SearchForm() {\n  return document.createRange().createContextualFragment(`\n    <form method=\"GET\" class=\"form\">\n    <div class=\"relative mb-4\">\n      <select id=\"searchElementalSynergy\" class=\"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline\">\n        <option value=\"\">Elemental Synergy</option>\n        <option value=\"Abyss\">Abyss</option>\n        <option value=\"Aurora\">Aurora</option>\n        <option value=\"Blast\">Blast</option>\n        <option value=\"Blaze\">Blaze</option>\n        <option value=\"Cyclone\">Cyclone</option>\n        <option value=\"Eruption\">Eruption</option>\n        <option value=\"Magma\">Magma</option>\n        <option value=\"Miasma\">Miasma</option>\n        <option value=\"Mist\">Mist</option>\n        <option value=\"Obsidian\">Obsidian</option>\n        <option value=\"Nova\">Nova</option>\n        <option value=\"Plasma\">Plasma</option>\n        <option value=\"Prism\">Prism</option>\n        <option value=\"Pyre\">Pyre</option>\n        <option value=\"Quagmire\">Quagmire</option>\n        <option value=\"Radiance\">Radiance</option>\n        <option value=\"Steam\">Steam</option>\n        <option value=\"Tempest\">Tempest</option>\n        <option value=\"Tremor\">Tremor</option>\n        <option value=\"Tsunami\">Tsunami</option>\n        <option value=\"Twilight\">Twilight</option>\n      </select>\n      <div class=\"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700\">\n        <svg class=\"fill-current h-4 w-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z\"/></svg>\n      </div>\n    </div>\n    <div class=\"mb-4\">\n      <select multiple id=\"searchDbbKeywords\" class=\"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 rounded shadow leading-tight focus:outline-none focus:shadow-outline\">\n        <option value=\"\">Keywords</option>\n      </select>\n    </div>\n    <div class=\"relative mb-4\">\n      <span>\n        <input class=\"focus:outline-0 bg-transparent border-b border-gray-500 focus:border-green-500 placeholder-gray-600 py-2 pr-4 pl-10 w-full appearance-none leading-normal\" type=\"text\" placeholder=\"Omni unit name\" id=\"searchOmniUnitName\">\n      </span>\n      <div class=\"pointer-events-none absolute inset-y-0 left-0 pl-4 flex items-center\">\n        <svg class=\"fill-current pointer-events-none text-gray-600 w-4 h-4\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z\"></path></svg>\n      </div>\n    </div>\n  </form>\n    `);\n}\n\nconst formData = new FormData();\nexport function Search () {\n  document.getElementById('searchOmniUnitName').addEventListener('keydown', (e) => {\n    if (e.key === 'Enter') {\n      if (e.target.value !== \"\") {\n        if (formData.has('name')) {\n          formData.delete('name');\n        }\n        formData.append('name', e.target.value);\n      } else {\n        formData.delete('name');\n      }\n      e.preventDefault();\n      showSearchResult(formData);\n    }\n  });\n\n  document.getElementById('searchElementalSynergy').onchange = (e) => {\n    if (e.target.value !== \"\") {\n      if (formData.has('esname')) {\n        formData.delete('esname');\n      }\n      formData.append('esname', e.target.value);\n    } else {\n      formData.delete('esname');\n    }\n    e.preventDefault();\n    showSearchResult(formData);\n  }\n\n  document.getElementById('searchDbbKeywords').onchange = (e) => {\n    var opts = [], opt, optValue;\n\n    for (let i = 0; i < e.target.options.length; i++) {\n      opt = e.target.options[i];\n      optValue = opt.value;\n      if (opt.selected) {\n        opts.push(optValue);\n      }\n    }\n\n    if (Array.isArray(opts) && opts.length > 0) {\n      if (formData.has('keywords')) {\n        formData.delete('keywords');\n      }\n      formData.append('keywords', encodeURIComponent(opts.join(\",\")));\n    } else {\n      formData.delete('keywords');\n    }\n\n    e.preventDefault();\n    showSearchResult(formData);\n  }\n}\n\nfunction showSearchResult(formData) {\n  const queryString = new URLSearchParams(formData).toString();\n  if (queryString) {\n    page.show(`${window.location.pathname}?${queryString}`);\n  } else {\n    page.show(`${window.location.pathname}`);\n  }\n  // Set previous page position Y to 0 when searching\n  if (window.previousOmniUnitsPage) {\n    window.previousOmniUnitsPage = 0;\n  }\n}","import Skeleton from \"./components/Skeleton.js\";\nimport { SearchForm, Search } from \"./components/Search.js\";\nimport setActiveMenu from \"../utils/setActiveMenu.js\";\nimport trackUrl from \"../utils/trackUrl.js\";\nimport { requestDbbs } from \"../utils/request.js\";\nimport { getDbbKeywords } from \"../utils/keywords.js\";\n\nlet searchDbbKeywordsEl;\n\nexport default function (ctx) {\n    trackUrl(ctx);\n    setActiveMenu(ctx.path);\n    document.title = ctx.title = 'Brave Frontier Wiki';\n    document.querySelector('main').textContent = '';\n    document.querySelector('main').appendChild(SearchForm());\n    document.querySelector('main').appendChild(Skeleton());\n    searchDbbKeywordsEl = new Choices(document.getElementById('searchDbbKeywords'), {\n        items: getDbbKeywords(),\n        choices: getDbbKeywords(),\n        removeItemButton: true,\n        maxItemCount: 3,\n        maxItemText: (maxItemCount) => {\n            return `Only ${maxItemCount} values can be added`;\n        }\n    });\n    let filteredDbbs;\n    requestDbbs().then(data => {\n        ctx.state.dbbs = data;\n        ctx.save();\n        filteredDbbs = filterDbbs(ctx);\n        import(\"./components/Content.js\").then(module => {\n            module.default(filteredDbbs);\n            Search();\n        });\n    });\n    // Scroll to the top page.\n    window.scrollTo(0, 0);\n}\n\nfunction filterDbbs(ctx) {\n    let filteredDbbs;\n    if (ctx.querystring) {\n        const searchParams = new URLSearchParams(ctx.querystring);\n        const searchName = searchParams.get('name');\n        const searchEsName = searchParams.get('esname');\n        const searchKeywords = searchParams.get('keywords');\n        const selectedKeywords = (searchKeywords) ? searchKeywords.split(\",\") : [];\n        if (searchName && searchEsName && searchKeywords) {\n            document.getElementById('searchOmniUnitName').value = searchName;\n            document.getElementById('searchElementalSynergy').value = searchEsName;\n            searchDbbKeywordsEl.setChoiceByValue(selectedKeywords);\n            filteredDbbs = ctx.state.dbbs.filter(dbb => {\n                let firstUnitName = dbb.firstUnitName.toLowerCase();\n                let secondUnitName = dbb.secondUnitName.toLowerCase();\n                let esName = dbb.elementalSynergyName;\n                if (firstUnitName.includes(searchName.toLowerCase()) || secondUnitName.includes(searchName.toLocaleLowerCase())) {\n                    if (esName === searchEsName) {\n                        for (let keyword of dbb.keywords) {\n                            if (selectedKeywords.includes(keyword)) {\n                                return dbb;\n                            }\n                        }\n                    }\n                }\n            });\n        } else if (searchName && searchKeywords) {\n            document.getElementById('searchOmniUnitName').value = searchName;\n            searchDbbKeywordsEl.setChoiceByValue(selectedKeywords);\n            filteredDbbs = ctx.state.dbbs.filter(dbb => {\n                let firstUnitName = dbb.firstUnitName.toLowerCase();\n                let secondUnitName = dbb.secondUnitName.toLowerCase();\n                if (firstUnitName.includes(searchName.toLowerCase()) || secondUnitName.includes(searchName.toLocaleLowerCase())) {\n                    for (let keyword of dbb.keywords) {\n                        if (selectedKeywords.includes(keyword)) {\n                            return dbb;\n                        }\n                    }\n                }\n            });\n        } else if (searchName && searchEsName) {\n            document.getElementById('searchOmniUnitName').value = searchName;\n            document.getElementById('searchElementalSynergy').value = searchEsName;\n            filteredDbbs = ctx.state.dbbs.filter(dbb => {\n                let firstUnitName = dbb.firstUnitName.toLowerCase();\n                let secondUnitName = dbb.secondUnitName.toLowerCase();\n                let esName = dbb.elementalSynergyName;\n                if (firstUnitName.includes(searchName.toLowerCase()) || secondUnitName.includes(searchName.toLocaleLowerCase())) {\n                    if (esName === searchEsName) {\n                        return dbb;\n                    }\n                }\n            });\n        } else if (searchEsName && searchKeywords) {\n            document.getElementById('searchElementalSynergy').value = searchEsName;\n            searchDbbKeywordsEl.setChoiceByValue(selectedKeywords);\n            filteredDbbs = ctx.state.dbbs.filter(dbb => {\n                let esName = dbb.elementalSynergyName;\n                if (esName === searchEsName) {\n                    for (let keyword of dbb.keywords) {\n                        if (selectedKeywords.includes(keyword)) {\n                            return dbb;\n                        }\n                    }\n                }\n            });\n        } else if (searchName) {\n            document.getElementById('searchOmniUnitName').value = searchName;\n            filteredDbbs = ctx.state.dbbs.filter(dbb => {\n                let firstUnitName = dbb.firstUnitName.toLowerCase();\n                let secondUnitName = dbb.secondUnitName.toLowerCase();\n                if (firstUnitName.includes(searchName.toLowerCase()) || secondUnitName.includes(searchName.toLocaleLowerCase())) {\n                    return dbb;\n                }\n            });\n        } else if (searchEsName) {\n            document.getElementById('searchElementalSynergy').value = searchEsName;\n            filteredDbbs = ctx.state.dbbs.filter(dbb => {\n                let esName = dbb.elementalSynergyName;\n                if (esName === searchEsName) {\n                    return dbb;\n                }\n            });\n        } else if (searchKeywords) {\n            searchDbbKeywordsEl.setChoiceByValue(selectedKeywords);\n            filteredDbbs = ctx.state.dbbs.filter(dbb => {\n              for (let keyword of dbb.keywords) {\n                if (selectedKeywords.includes(keyword)) {\n                  return dbb;\n                }\n              }\n            });\n        }\n    } else {\n        filteredDbbs = ctx.state.dbbs;\n    }\n    window.dbbs = filteredDbbs;\n    let end = 49;\n    return (filteredDbbs) ? filteredDbbs.slice(0, end) : [].slice(0, end);\n}","import page from \"page\";\nimport Home from \"./home/index.js\";\nimport OmniUnits from \"./omniunits/index.js\";\nimport { loadOmniUnit, showOmniUnit } from \"./omniunit/index.js\";\nimport Dbbs from \"./dbbs/index.js\";\nimport NotFound from \"./notfound.js\";\n\npage('/', Home);\npage('/omniunits', OmniUnits);\npage('/omniunits/:omniunit', loadOmniUnit, showOmniUnit);\npage('/dbbs', Dbbs);\npage('*', NotFound);\n// Call it!\npage();\n\nwindow.prerenderReady = true;","import trackUrl from \"../utils/trackUrl.js\";\nimport setActiveMenu from \"../utils/setActiveMenu.js\";\n\nexport default function (ctx) {\n  if (document.body.classList.contains('bg-gray-300')) {\n    document.body.classList.remove('bg-gray-300');\n    document.body.classList.add('bg-white');\n  }\n  trackUrl(ctx);\n  setActiveMenu(ctx.path);\n  document.title = ctx.title = `Brave Frontier Wiki | Unofficial`;\n  import('./components/Home.js').then(module => {\n    document.querySelector('main').textContent = '';\n    document.querySelector('main').appendChild(module.default());\n    document.querySelector('button').addEventListener('click', () => {\n      document.getElementById('banner').style.display = \"none\";\n    });\n  });\n}","export default function () {\n    const fragement = document.createDocumentFragment();\n    const $ul = document.createElement('ul');\n    $ul.setAttribute('id', 'omniunit-list');\n    for (let index = 0; index < 100; index++) {\n        fragement.appendChild(document.createRange().createContextualFragment(`\n        <li class=\"omniunit-card\"></li>\n        `));\n    }\n    $ul.appendChild(fragement);\n    return $ul;\n}","export const requestOmniUnits = async (querystring = '') => {\n  const URL = '/api/v1/omniunits';\n  const response = await fetch(`${URL}${querystring ? `?${querystring}` : ''}`);\n  const json = await response.json();\n  return json;\n}\n\nexport const requestOmniUnit = async (name) => {\n  const URL = `/api/v1/omniunits/${name}`;\n  const response = await fetch(URL);\n  const json = await response.json();\n  return json;\n}\n\nexport const requestDbbs = async (querystring = '') => {\n  const URL = '/api/v1/dbbs';\n  const response = await fetch(`${URL}${querystring ? `?${querystring}` : ''}`);\n  const json = await response.json();\n  return json;\n}","import { requestOmniUnit } from \"../utils/request.js\";\nimport trackUrl from \"../utils/trackUrl.js\";\nimport setOgMeta from \"../utils/setOgMeta.js\";\n\nexport function loadOmniUnit(ctx, next) {\n  // check if we have .state.omniunit already available\n  // this could for example be a cached html fragment.\n  if (ctx.state.omniunit) {\n    ctx.omniunit = ctx.state.omniunit;\n    next();\n    return;\n  }\n  NProgress.start();\n  requestOmniUnit(encodeURIComponent(ctx.params.omniunit)).then(data => {\n    ctx.state.omniunit = data;\n    ctx.save();\n    next();\n  })\n  .catch(error => {\n    console.log(error);\n    const $p = document.createElement('p');\n    $p.setAttribute('class', 'text-center m-auto font-bold');\n    $p.textContent = 'Opps, failed to get detail of unit. Please try again in 3 minutes...';\n    document.querySelector('main').appendChild($p);\n  });\n}\n\nexport function showOmniUnit(ctx) {\n  window.previousOmniUnitsPage = window.scrollY;\n  trackUrl(ctx);\n  document.title = ctx.title = `${ctx.state.omniunit.name} - Brave Frontier Wiki`;\n  setOgMeta({\n    title: ctx.state.omniunit.name,\n    description: `${ctx.state.omniunit.name}'s Profile`,\n    image: `${ctx.state.omniunit.artwork}`,\n    url: window.location.href\n  });\n  if (window.omniunits) {\n    window.selectedOmniUnitIndex = window.omniunits.findIndex((unit) => {\n      return unit.name === ctx.state.omniunit.name;\n    });\n  }\n  import(\"./components/Profile.js\").then(({ default: OmniUnitProfile }) => {\n    document.querySelector('main').textContent = '';\n    document.querySelector('main').appendChild(OmniUnitProfile(ctx.state.omniunit));\n    document.getElementById('shareBtn').addEventListener('click', async (e) => {\n      e.preventDefault();\n      try {\n        const module = await import(\"./components/Share.js\");\n        module.default(ctx.state.omniunit);\n      } catch (error) {\n        console.log(error);\n      }\n    });\n    // Scroll to the top page.\n    window.scrollTo(0, 0);\n    NProgress.done();\n  })\n  .catch(error => console.log(error));\n}","export default function (params) {\n    document.querySelector('meta[property=\"og:title\"]').setAttribute('content', params.title);\n    document.querySelector('meta[property=\"og:description\"]').setAttribute('content', params.description);\n    document.querySelector('meta[property=\"og:image\"]').setAttribute('content', params.image);\n    document.querySelector('meta[property=\"og:url\"]').setAttribute('content', params.url);\n}","export default function () {\n    const fragement = document.createDocumentFragment();\n    const $ul = document.createElement('ul');\n    $ul.setAttribute('id', 'dbb-list');\n    for (let index = 0; index < 100; index++) {\n        fragement.appendChild(document.createRange().createContextualFragment(`\n        <li class=\"dbb-card\"></li>\n        `));\n    }\n    $ul.appendChild(fragement);\n    return $ul;\n}","export default function () {\n  document.querySelector('main').textContent = 'Not found';\n}","export default function () {\n    return document.createRange().createContextualFragment(`\n    <div class=\"flex flex-col justify-center items-center m-auto\">\n      <div id=\"banner\" class=\"bg-indigo-600 w-full\" style=\"margin-top: 80px;\">\n        <div class=\"max-w-7xl mx-auto py-3 px-3 sm:px-6 lg:px-8\">\n          <div class=\"flex items-center justify-between flex-wrap\">\n            <div class=\"w-0 flex-1 flex items-center\">\n              <span class=\"flex p-2 rounded-lg bg-indigo-800\">\n                <!-- Heroicon name: speakerphone -->\n                <svg class=\"h-6 w-6 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z\" />\n                </svg>\n              </span>\n              <p class=\"ml-3 font-medium text-white truncate\">\n                <span class=\"md:hidden\">\n                  BNC last episode!\n                </span>\n                <span class=\"hidden md:inline\">\n                  I will not update the content of site regarding of Brave News Channel last episode.\n                </span>\n              </p>\n            </div>\n            <div class=\"order-3 mt-2 flex-shrink-0 w-full sm:order-2 sm:mt-0 sm:w-auto\">\n              <a href=\"https://www.youtube.com/watch?v=cMKAlUoSswE\" target=\"_blank\" rel=\"noopener\" rel=\"noreferrer\" class=\"flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-indigo-600 bg-white hover:bg-indigo-50\">\n                Learn more\n              </a>\n            </div>\n            <div class=\"order-2 flex-shrink-0 sm:order-3 sm:ml-3\">\n              <button type=\"button\" class=\"-mr-1 flex p-2 rounded-md hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-white sm:-mr-2\">\n                <span class=\"sr-only\">Dismiss</span>\n                <!-- Heroicon name: x -->\n                <svg class=\"h-6 w-6 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\">\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <article class=\"p-4 mt-16\">\n        <h1 class=\"text-3xl my-4\"><strong>Brave Frontier Wiki (Unofficial)</strong></h1>\n        <div class=\"leading-loose\">\n          <p>This website provides list of omni units and Dual Brave Burst (DBB) from Brave Frontier Global.</p>\n          <p>The data take from <a href=\"https://github.com/satyakresna/bravefrontier\" target=\"_blank\" rel=\"noopener\" class=\"underline text-blue-700\">unofficial Brave Frontier API that created by myself</a>.</p>\n          <p>The source code of this website is available by visit to <a href=\"https://github.com/satyakresna/bfwiki\" target=\"_blank\" rel=\"noopener\" class=\"underline text-blue-700\">github.com/satyakresna/bfwiki</a>.</p>\n        </div>\n        <h2 class=\"text-2xl my-4\"><strong>Feedback</strong></h2>\n        <div class=\"leading-loose\">\n          <p>If you have any feedback about feature(s) on this website please submit form in <a href=\"https://github.com/satyakresna/bfwiki/issues\" target=\"_blank\" rel=\"noopener\" class=\"underline text-blue-700\">github.com/satyakresna/bfwiki/issues</a></p>\n        </div>\n        <h2 class=\"text-2xl my-4\"><strong>Join me</strong></h2>\n        <div class=\"leading-loose\">\n          <p>Join me on Brave Frontier game. My player ID is 5420823754.</p>\n          <img src=\"../../assets/images/kresna-player-id.jpg\" alt=\"Kresna player ID\" />\n        </div>\n        <h2 class=\"text-2xl my-4\"><strong>Courtesy</strong></h2>\n        <ul class=\"leading-loose\">\n          <li>Brave Frontier</li>\n          <li><a href=\"https://bravefrontierglobal.fandom.com/wiki/Brave_Frontier_Wiki\" target=\"_blank\" rel=\"noopener\" class=\"underline text-blue-700\">Brave Frontier Global Fandom</a></li>\n        </ul>\n      </article>\n    </div>\n  `);\n}","export default function (omniunit) {\n  return document.createRange().createContextualFragment(`\n  <li class=\"omniunit-card\">\n    <div class=\"omniunit-card-container\">\n      <img data-src=\"https://res.cloudinary.com/satyakresna/image/upload/bravefrontier/omniunits/thumbnails/${omniunit.id}\" width=\"50\" height=\"50\" alt=\"${omniunit.name}'s thumbnail\" />\n      <p class=\"omniunit-card-name font-semibold tracking-wide\"><a href=\"omniunits/${omniunit.name.split(' ').join('_')}\">${omniunit.name}</a></p>\n    </div>\n  </li>\n  `);\n}","import OmniUnitCard from \"./Card.js\";\n\nexport default function (omniunits) {\n  if (Array.isArray(omniunits) && omniunits.length > 0) {\n    const fragement = document.createDocumentFragment();\n    const $omniUnitList = document.getElementById('omniunit-list');\n    $omniUnitList.textContent = '';\n    for (const omniunit of omniunits) {\n      fragement.appendChild(OmniUnitCard(omniunit));\n    }\n    $omniUnitList.appendChild(fragement);\n    document.querySelector('main').appendChild($omniUnitList);\n    if (window.previousOmniUnitsPage) {\n      window.scrollTo(0, window.previousOmniUnitsPage);\n    }\n    if (window.omniunits) {\n      observeContent(window.omniunits);\n    } else {\n      observeContent(omniunits);\n    }\n  } else {\n    document.querySelector('main #omniunit-list').remove();\n    document.querySelector('main').appendChild(document.createRange().createContextualFragment(`\n      <p class=\"text-center mt-4\">\n        <strong>Opps.. Not found. :(</strong>\n      </p>\n    `));\n  }\n}\n\nfunction observeContent(omniunits) {\n  if (Array.isArray(omniunits) && omniunits.length > 0) {\n    const lastElementChild = document.querySelector('ul#omniunit-list').lastElementChild;\n    const childrenElement = document.querySelector('ul#omniunit-list').children;\n    // Observe and do infinite scroll\n    let contentObserver = new IntersectionObserver(function (entries, self) {\n      if (entries[0].isIntersecting) {\n        const begin = (childrenElement.length - 1) + 1;\n        const end = childrenElement.length + 100;\n        if (childrenElement.length < omniunits.length) {\n          const nextOmniUnits = omniunits.slice(begin, end);\n          const fragement = document.createDocumentFragment();\n          for (const omniunit of nextOmniUnits) {\n            fragement.appendChild(OmniUnitCard(omniunit));\n          }\n          document.querySelector('ul#omniunit-list').appendChild(fragement);\n          observeContent(omniunits);\n        }\n        self.unobserve(entries[0].target);\n      }\n    }, {\n      root: null, // page as root\n      rootMargin: '0px',\n      threshold: 1.0\n    });\n\n    contentObserver.observe(lastElementChild);\n\n    observeThumbnail();\n  }\n}\n\nfunction observeThumbnail () {\n  const $images = document.querySelectorAll('[data-src]');\n  const config = {\n    rootMargin: '0px 0px 50px 0px',\n    threshold: 0\n  };\n\n  let imageObserver = new IntersectionObserver(function (entries, self) {\n    entries.forEach(entry => {\n      if (entry.isIntersecting) {\n        const src = entry.target.getAttribute('data-src');\n        if (!src) { return; }\n        entry.target.src = src;\n        self.unobserve(entry.target);\n      }\n    });\n  }, config);\n\n  $images.forEach(image => {\n    imageObserver.observe(image);\n  });\n}","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar NotyfNotification = /** @class */ (function () {\r\n    function NotyfNotification(options) {\r\n        this.options = options;\r\n        this.listeners = {};\r\n    }\r\n    NotyfNotification.prototype.on = function (eventType, cb) {\r\n        var callbacks = this.listeners[eventType] || [];\r\n        this.listeners[eventType] = callbacks.concat([cb]);\r\n    };\r\n    NotyfNotification.prototype.triggerEvent = function (eventType, event) {\r\n        var _this = this;\r\n        var callbacks = this.listeners[eventType] || [];\r\n        callbacks.forEach(function (cb) { return cb({ target: _this, event: event }); });\r\n    };\r\n    return NotyfNotification;\r\n}());\r\nvar NotyfArrayEvent;\r\n(function (NotyfArrayEvent) {\r\n    NotyfArrayEvent[NotyfArrayEvent[\"Add\"] = 0] = \"Add\";\r\n    NotyfArrayEvent[NotyfArrayEvent[\"Remove\"] = 1] = \"Remove\";\r\n})(NotyfArrayEvent || (NotyfArrayEvent = {}));\r\nvar NotyfArray = /** @class */ (function () {\r\n    function NotyfArray() {\r\n        this.notifications = [];\r\n    }\r\n    NotyfArray.prototype.push = function (elem) {\r\n        this.notifications.push(elem);\r\n        this.updateFn(elem, NotyfArrayEvent.Add, this.notifications);\r\n    };\r\n    NotyfArray.prototype.splice = function (index, num) {\r\n        var elem = this.notifications.splice(index, num)[0];\r\n        this.updateFn(elem, NotyfArrayEvent.Remove, this.notifications);\r\n        return elem;\r\n    };\r\n    NotyfArray.prototype.indexOf = function (elem) {\r\n        return this.notifications.indexOf(elem);\r\n    };\r\n    NotyfArray.prototype.onUpdate = function (fn) {\r\n        this.updateFn = fn;\r\n    };\r\n    return NotyfArray;\r\n}());\n\nvar NotyfEvent;\r\n(function (NotyfEvent) {\r\n    NotyfEvent[\"Dismiss\"] = \"dismiss\";\r\n    NotyfEvent[\"Click\"] = \"click\";\r\n})(NotyfEvent || (NotyfEvent = {}));\r\nvar DEFAULT_OPTIONS = {\r\n    types: [\r\n        {\r\n            type: 'success',\r\n            className: 'notyf__toast--success',\r\n            backgroundColor: '#3dc763',\r\n            icon: {\r\n                className: 'notyf__icon--success',\r\n                tagName: 'i',\r\n            },\r\n        },\r\n        {\r\n            type: 'error',\r\n            className: 'notyf__toast--error',\r\n            backgroundColor: '#ed3d3d',\r\n            icon: {\r\n                className: 'notyf__icon--error',\r\n                tagName: 'i',\r\n            },\r\n        },\r\n    ],\r\n    duration: 2000,\r\n    ripple: true,\r\n    position: {\r\n        x: 'right',\r\n        y: 'bottom',\r\n    },\r\n    dismissible: false,\r\n};\n\nvar NotyfView = /** @class */ (function () {\r\n    function NotyfView() {\r\n        this.notifications = [];\r\n        this.events = {};\r\n        this.X_POSITION_FLEX_MAP = {\r\n            left: 'flex-start',\r\n            center: 'center',\r\n            right: 'flex-end',\r\n        };\r\n        this.Y_POSITION_FLEX_MAP = {\r\n            top: 'flex-start',\r\n            center: 'center',\r\n            bottom: 'flex-end',\r\n        };\r\n        // Creates the main notifications container\r\n        var docFrag = document.createDocumentFragment();\r\n        var notyfContainer = this._createHTLMElement({ tagName: 'div', className: 'notyf' });\r\n        docFrag.appendChild(notyfContainer);\r\n        document.body.appendChild(docFrag);\r\n        this.container = notyfContainer;\r\n        // Identifies the main animation end event\r\n        this.animationEndEventName = this._getAnimationEndEventName();\r\n        this._createA11yContainer();\r\n    }\r\n    NotyfView.prototype.on = function (event, cb) {\r\n        var _a;\r\n        this.events = __assign(__assign({}, this.events), (_a = {}, _a[event] = cb, _a));\r\n    };\r\n    NotyfView.prototype.update = function (notification, type) {\r\n        if (type === NotyfArrayEvent.Add) {\r\n            this.addNotification(notification);\r\n        }\r\n        else if (type === NotyfArrayEvent.Remove) {\r\n            this.removeNotification(notification);\r\n        }\r\n    };\r\n    NotyfView.prototype.removeNotification = function (notification) {\r\n        var _this = this;\r\n        var renderedNotification = this._popRenderedNotification(notification);\r\n        var node;\r\n        if (!renderedNotification) {\r\n            return;\r\n        }\r\n        node = renderedNotification.node;\r\n        node.classList.add('notyf__toast--disappear');\r\n        var handleEvent;\r\n        node.addEventListener(this.animationEndEventName, (handleEvent = function (event) {\r\n            if (event.target === node) {\r\n                node.removeEventListener(_this.animationEndEventName, handleEvent);\r\n                _this.container.removeChild(node);\r\n            }\r\n        }));\r\n    };\r\n    NotyfView.prototype.addNotification = function (notification) {\r\n        var node = this._renderNotification(notification);\r\n        this.notifications.push({ notification: notification, node: node });\r\n        // For a11y purposes, we still want to announce that there's a notification in the screen\r\n        // even if it comes with no message.\r\n        this._announce(notification.options.message || 'Notification');\r\n    };\r\n    NotyfView.prototype._renderNotification = function (notification) {\r\n        var _a;\r\n        var card = this._buildNotificationCard(notification);\r\n        var className = notification.options.className;\r\n        if (className) {\r\n            (_a = card.classList).add.apply(_a, className.split(' '));\r\n        }\r\n        this.container.appendChild(card);\r\n        return card;\r\n    };\r\n    NotyfView.prototype._popRenderedNotification = function (notification) {\r\n        var idx = -1;\r\n        for (var i = 0; i < this.notifications.length && idx < 0; i++) {\r\n            if (this.notifications[i].notification === notification) {\r\n                idx = i;\r\n            }\r\n        }\r\n        if (idx !== -1) {\r\n            return this.notifications.splice(idx, 1)[0];\r\n        }\r\n        return;\r\n    };\r\n    NotyfView.prototype.getXPosition = function (options) {\r\n        var _a;\r\n        return ((_a = options === null || options === void 0 ? void 0 : options.position) === null || _a === void 0 ? void 0 : _a.x) || 'right';\r\n    };\r\n    NotyfView.prototype.getYPosition = function (options) {\r\n        var _a;\r\n        return ((_a = options === null || options === void 0 ? void 0 : options.position) === null || _a === void 0 ? void 0 : _a.y) || 'bottom';\r\n    };\r\n    NotyfView.prototype.adjustContainerAlignment = function (options) {\r\n        var align = this.X_POSITION_FLEX_MAP[this.getXPosition(options)];\r\n        var justify = this.Y_POSITION_FLEX_MAP[this.getYPosition(options)];\r\n        var style = this.container.style;\r\n        style.setProperty('justify-content', justify);\r\n        style.setProperty('align-items', align);\r\n    };\r\n    NotyfView.prototype._buildNotificationCard = function (notification) {\r\n        var _this = this;\r\n        var _a;\r\n        var options = notification.options;\r\n        var iconOpts = options.icon;\r\n        // Adjust container according to position (e.g. top-left, bottom-center, etc)\r\n        this.adjustContainerAlignment(options);\r\n        // Create elements\r\n        var notificationElem = this._createHTLMElement({ tagName: 'div', className: 'notyf__toast' });\r\n        var ripple = this._createHTLMElement({ tagName: 'div', className: 'notyf__ripple' });\r\n        var wrapper = this._createHTLMElement({ tagName: 'div', className: 'notyf__wrapper' });\r\n        var message = this._createHTLMElement({ tagName: 'div', className: 'notyf__message' });\r\n        message.innerHTML = options.message || '';\r\n        var color = options.background || options.backgroundColor;\r\n        // Build the icon and append it to the card\r\n        if (iconOpts && typeof iconOpts === 'object') {\r\n            var iconContainer = this._createHTLMElement({ tagName: 'div', className: 'notyf__icon' });\r\n            var icon = this._createHTLMElement({\r\n                tagName: iconOpts.tagName || 'i',\r\n                className: iconOpts.className,\r\n                text: iconOpts.text,\r\n            });\r\n            var iconColor = (_a = iconOpts.color) !== null && _a !== void 0 ? _a : color;\r\n            if (iconColor) {\r\n                icon.style.color = iconColor;\r\n            }\r\n            iconContainer.appendChild(icon);\r\n            wrapper.appendChild(iconContainer);\r\n        }\r\n        wrapper.appendChild(message);\r\n        notificationElem.appendChild(wrapper);\r\n        // Add ripple if applicable, else just paint the full toast\r\n        if (color) {\r\n            if (options.ripple) {\r\n                ripple.style.background = color;\r\n                notificationElem.appendChild(ripple);\r\n            }\r\n            else {\r\n                notificationElem.style.background = color;\r\n            }\r\n        }\r\n        // Add dismiss button\r\n        if (options.dismissible) {\r\n            var dismissWrapper = this._createHTLMElement({ tagName: 'div', className: 'notyf__dismiss' });\r\n            var dismissButton = this._createHTLMElement({\r\n                tagName: 'button',\r\n                className: 'notyf__dismiss-btn',\r\n            });\r\n            dismissWrapper.appendChild(dismissButton);\r\n            wrapper.appendChild(dismissWrapper);\r\n            notificationElem.classList.add(\"notyf__toast--dismissible\");\r\n            dismissButton.addEventListener('click', function (event) {\r\n                var _a, _b;\r\n                (_b = (_a = _this.events)[NotyfEvent.Dismiss]) === null || _b === void 0 ? void 0 : _b.call(_a, { target: notification, event: event });\r\n                event.stopPropagation();\r\n            });\r\n        }\r\n        notificationElem.addEventListener('click', function (event) { var _a, _b; return (_b = (_a = _this.events)[NotyfEvent.Click]) === null || _b === void 0 ? void 0 : _b.call(_a, { target: notification, event: event }); });\r\n        // Adjust margins depending on whether its an upper or lower notification\r\n        var className = this.getYPosition(options) === 'top' ? 'upper' : 'lower';\r\n        notificationElem.classList.add(\"notyf__toast--\" + className);\r\n        return notificationElem;\r\n    };\r\n    NotyfView.prototype._createHTLMElement = function (_a) {\r\n        var tagName = _a.tagName, className = _a.className, text = _a.text;\r\n        var elem = document.createElement(tagName);\r\n        if (className) {\r\n            elem.className = className;\r\n        }\r\n        elem.textContent = text || null;\r\n        return elem;\r\n    };\r\n    /**\r\n     * Creates an invisible container which will announce the notyfs to\r\n     * screen readers\r\n     */\r\n    NotyfView.prototype._createA11yContainer = function () {\r\n        var a11yContainer = this._createHTLMElement({ tagName: 'div', className: 'notyf-announcer' });\r\n        a11yContainer.setAttribute('aria-atomic', 'true');\r\n        a11yContainer.setAttribute('aria-live', 'polite');\r\n        // Set the a11y container to be visible hidden. Can't use display: none as\r\n        // screen readers won't read it.\r\n        a11yContainer.style.border = '0';\r\n        a11yContainer.style.clip = 'rect(0 0 0 0)';\r\n        a11yContainer.style.height = '1px';\r\n        a11yContainer.style.margin = '-1px';\r\n        a11yContainer.style.overflow = 'hidden';\r\n        a11yContainer.style.padding = '0';\r\n        a11yContainer.style.position = 'absolute';\r\n        a11yContainer.style.width = '1px';\r\n        a11yContainer.style.outline = '0';\r\n        document.body.appendChild(a11yContainer);\r\n        this.a11yContainer = a11yContainer;\r\n    };\r\n    /**\r\n     * Announces a message to screenreaders.\r\n     */\r\n    NotyfView.prototype._announce = function (message) {\r\n        var _this = this;\r\n        this.a11yContainer.textContent = '';\r\n        // This 100ms timeout is necessary for some browser + screen-reader combinations:\r\n        // - Both JAWS and NVDA over IE11 will not announce anything without a non-zero timeout.\r\n        // - With Chrome and IE11 with NVDA or JAWS, a repeated (identical) message won't be read a\r\n        //   second time without clearing and then using a non-zero delay.\r\n        // (using JAWS 17 at time of this writing).\r\n        // https://github.com/angular/material2/blob/master/src/cdk/a11y/live-announcer/live-announcer.ts\r\n        setTimeout(function () {\r\n            _this.a11yContainer.textContent = message;\r\n        }, 100);\r\n    };\r\n    /**\r\n     * Determine which animationend event is supported\r\n     */\r\n    NotyfView.prototype._getAnimationEndEventName = function () {\r\n        var el = document.createElement('_fake');\r\n        var transitions = {\r\n            MozTransition: 'animationend',\r\n            OTransition: 'oAnimationEnd',\r\n            WebkitTransition: 'webkitAnimationEnd',\r\n            transition: 'animationend',\r\n        };\r\n        var t;\r\n        for (t in transitions) {\r\n            if (el.style[t] !== undefined) {\r\n                return transitions[t];\r\n            }\r\n        }\r\n        // No supported animation end event. Using \"animationend\" as a fallback\r\n        return 'animationend';\r\n    };\r\n    return NotyfView;\r\n}());\n\n/**\r\n * Main controller class. Defines the main Notyf API.\r\n */\r\nvar Notyf = /** @class */ (function () {\r\n    function Notyf(opts) {\r\n        var _this = this;\r\n        this.dismiss = this._removeNotification;\r\n        this.notifications = new NotyfArray();\r\n        this.view = new NotyfView();\r\n        var types = this.registerTypes(opts);\r\n        this.options = __assign(__assign({}, DEFAULT_OPTIONS), opts);\r\n        this.options.types = types;\r\n        this.notifications.onUpdate(function (elem, type) { return _this.view.update(elem, type); });\r\n        this.view.on(NotyfEvent.Dismiss, function (_a) {\r\n            var target = _a.target, event = _a.event;\r\n            _this._removeNotification(target);\r\n            // tslint:disable-next-line: no-string-literal\r\n            target['triggerEvent'](NotyfEvent.Dismiss, event);\r\n        });\r\n        // tslint:disable-next-line: no-string-literal\r\n        this.view.on(NotyfEvent.Click, function (_a) {\r\n            var target = _a.target, event = _a.event;\r\n            return target['triggerEvent'](NotyfEvent.Click, event);\r\n        });\r\n    }\r\n    Notyf.prototype.error = function (payload) {\r\n        var options = this.normalizeOptions('error', payload);\r\n        return this.open(options);\r\n    };\r\n    Notyf.prototype.success = function (payload) {\r\n        var options = this.normalizeOptions('success', payload);\r\n        return this.open(options);\r\n    };\r\n    Notyf.prototype.open = function (options) {\r\n        var defaultOpts = this.options.types.find(function (_a) {\r\n            var type = _a.type;\r\n            return type === options.type;\r\n        }) || {};\r\n        var config = __assign(__assign({}, defaultOpts), options);\r\n        this.assignProps(['ripple', 'position', 'dismissible'], config);\r\n        var notification = new NotyfNotification(config);\r\n        this._pushNotification(notification);\r\n        return notification;\r\n    };\r\n    Notyf.prototype.dismissAll = function () {\r\n        while (this.notifications.splice(0, 1))\r\n            ;\r\n    };\r\n    /**\r\n     * Assigns properties to a config object based on two rules:\r\n     * 1. If the config object already sets that prop, leave it as so\r\n     * 2. Otherwise, use the default prop from the global options\r\n     *\r\n     * It's intended to build the final config object to open a notification. e.g. if\r\n     * 'dismissible' is not set, then use the value from the global config.\r\n     *\r\n     * @param props - properties to be assigned to the config object\r\n     * @param config - object whose properties need to be set\r\n     */\r\n    Notyf.prototype.assignProps = function (props, config) {\r\n        var _this = this;\r\n        props.forEach(function (prop) {\r\n            // intentional double equality to check for both null and undefined\r\n            config[prop] = config[prop] == null ? _this.options[prop] : config[prop];\r\n        });\r\n    };\r\n    Notyf.prototype._pushNotification = function (notification) {\r\n        var _this = this;\r\n        this.notifications.push(notification);\r\n        var duration = notification.options.duration !== undefined ? notification.options.duration : this.options.duration;\r\n        if (duration) {\r\n            setTimeout(function () { return _this._removeNotification(notification); }, duration);\r\n        }\r\n    };\r\n    Notyf.prototype._removeNotification = function (notification) {\r\n        var index = this.notifications.indexOf(notification);\r\n        if (index !== -1) {\r\n            this.notifications.splice(index, 1);\r\n        }\r\n    };\r\n    Notyf.prototype.normalizeOptions = function (type, payload) {\r\n        var options = { type: type };\r\n        if (typeof payload === 'string') {\r\n            options.message = payload;\r\n        }\r\n        else if (typeof payload === 'object') {\r\n            options = __assign(__assign({}, options), payload);\r\n        }\r\n        return options;\r\n    };\r\n    Notyf.prototype.registerTypes = function (opts) {\r\n        var incomingTypes = ((opts && opts.types) || []).slice();\r\n        var finalDefaultTypes = DEFAULT_OPTIONS.types.map(function (defaultType) {\r\n            // find if there's a default type within the user input's types, if so, it means the user\r\n            // wants to change some of the default settings\r\n            var userTypeIdx = -1;\r\n            incomingTypes.forEach(function (t, idx) {\r\n                if (t.type === defaultType.type)\r\n                    userTypeIdx = idx;\r\n            });\r\n            var userType = userTypeIdx !== -1 ? incomingTypes.splice(userTypeIdx, 1)[0] : {};\r\n            return __assign(__assign({}, defaultType), userType);\r\n        });\r\n        return finalDefaultTypes.concat(incomingTypes);\r\n    };\r\n    return Notyf;\r\n}());\n\nexport { DEFAULT_OPTIONS, Notyf, NotyfArray, NotyfArrayEvent, NotyfEvent, NotyfNotification, NotyfView };\n","import SPRecommendation from \"./SPRecommendation.js\";\nimport Enhancements from \"./Enhancements.js\";\n\nexport default function (omniunit) {\n  return document.createRange().createContextualFragment(`\n  <article class=\"omniunit-profile\">\n    <img src=\"https://res.cloudinary.com/satyakresna/image/upload/bravefrontier/omniunits/artworks/${omniunit.id}\" alt=\"${omniunit.name}'s artwork\" width=\"300\" height=\"300\" />    \n    <div class=\"text-left\">\n      <h1 class=\"text-3xl\"><strong>${omniunit.name}</strong></h1>\n      <p class=\"text-sm\">${omniunit.element}</p>\n    </div>\n    <section class=\"w-full my-8 border-solid border-4 border-yellow-500 p-4\">\n      <h2 class=\"text-lg -mt-8 bg-gray-200 uppercase text-yellow-500\" style=\"width: 150px;\"><strong><em>Leader Skill</em></strong></h2>\n      <h3 class=\"text-2xl mt-2 font-bold\">${omniunit.skills[0].lsName}</h3>\n      <p class=\"mt-2 leading-loose\">${omniunit.skills[0].lsDesc}</p>\n    </section>\n    <section class=\"w-full my-8 border-solid border-4 border-yellow-500 p-4\">\n      <h2 class=\"text-lg -mt-8 bg-gray-200 uppercase text-pink-500\" style=\"width: 150px;\"><strong><em>Extra Skill</em></strong></h2>\n      <h3 class=\"text-2xl mt-2 font-bold\">${omniunit.skills[1].esName}</h3>\n      <p class=\"mt-2 leading-loose\">${omniunit.skills[1].esDesc}</p>\n    </section>\n    <section class=\"w-full my-8 border-solid border-4 border-yellow-500 p-4\">\n      <h2 class=\"text-lg -mt-8 bg-gray-200 uppercase text-blue-500\" style=\"width: 150px;\"><strong><em>Brave Burst</em></strong></h2>\n      <h3 class=\"text-2xl mt-2 font-bold\">${omniunit.skills[2].bbName}</h3>\n      <p class=\"mt-2 leading-loose\">${omniunit.skills[2].bbDesc}</p>\n    </section>\n    <section class=\"w-full my-8 border-solid border-4 border-yellow-500 p-4\">\n      <h2 class=\"text-lg -mt-8 bg-gray-200 uppercase text-yellow-500\" style=\"width: 250px;\"><strong><em>Super Brave Burst</em></strong></h2>\n      <h3 class=\"text-2xl mt-2 font-bold\">${omniunit.skills[3].sbbName}</h3>\n      <p class=\"mt-2 leading-loose\">${omniunit.skills[3].sbbDesc}</p>\n    </section>\n    <section class=\"w-full my-8 border-solid border-4 border-yellow-500 p-4\">\n      <h2 class=\"text-lg -mt-8 bg-gray-200 uppercase text-red-500\" style=\"width: 250px;\"><strong><em>Ultimate Brave Burst</em></strong></h2>\n      <h3 class=\"text-2xl mt-2 font-bold\">${omniunit.skills[4].ubbName}</h3>\n      <p class=\"mt-2 leading-loose\">${omniunit.skills[4].ubbDesc}</p>\n    </section>\n    ${omniunit.hasOwnProperty('enhancements') \n    ? `<section class=\"w-full my-8 border-solid border-4 border-yellow-500 p-4\">\n        <h2 class=\"text-lg -mt-8 bg-gray-200 uppercase text-green-600\" style=\"width: 180px;\"><strong><em>Enhancements</em></strong></h2>\n        ${ Enhancements(omniunit.enhancements) }\n      </section>`\n    : ''}\n    ${omniunit.hasOwnProperty('spRecommendation') \n    ? `<section class=\"w-full my-8 border-solid border-4 border-yellow-500 p-4\">\n        <h2 class=\"text-lg -mt-8 bg-gray-200 uppercase text-blue-600\" style=\"width: 180px;\"><strong><em>Enhancements Recommendation</em></strong></h2>\n        ${ SPRecommendation(omniunit.spRecommendation) }\n      </section>`\n    : ''}\n  </article>\n  <div class=\"flex flex-col items-end fixed z-1000\" style=\"bottom: 24px; right: 24px;\">\n    <button type=\"button\" id=\"shareBtn\" class=\"relative rounded-full shadow border bg-white hover:bg-white text-gray-800 border-gray-400 p-4 mt-4\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\" class=\"fill-current w-5 h-5\">\n        <path d=\"M352 320c-22.608 0-43.387 7.819-59.79 20.895l-102.486-64.054a96.551 96.551 0 0 0 0-41.683l102.486-64.054C308.613 184.181 329.392 192 352 192c53.019 0 96-42.981 96-96S405.019 0 352 0s-96 42.981-96 96c0 7.158.79 14.13 2.276 20.841L155.79 180.895C139.387 167.819 118.608 160 96 160c-53.019 0-96 42.981-96 96s42.981 96 96 96c22.608 0 43.387-7.819 59.79-20.895l102.486 64.054A96.301 96.301 0 0 0 256 416c0 53.019 42.981 96 96 96s96-42.981 96-96-42.981-96-96-96z\"></path>\n      </svg>\n    </button>\n  </div>`);\n}","export default function (enhancements) {\n  const $ul = document.createElement('ul');\n  const fragment = document.createDocumentFragment();\n  for (const enhancement of enhancements) {\n    fragment.appendChild(document.createRange().createContextualFragment(\n      `<li class=\"my-4 py-2 border-b\">\n        <div class=\"flex justify-between items-center\">\n          <span class=\"w-9/12 inline-block leading-loose\">${enhancement.option}</span> <button class=\"border rounded-full border-yellow-600 bg-blue-600 text-white w-10 h-10\">${enhancement.cost}</button>\n        </div>\n        ${ enhancement.detail_option !== \"\" ? `<span class=\"text-sm italic\">${enhancement.detail_option}</span>` : ''}\n      </li>`\n    ));\n  }\n  $ul.appendChild(fragment);\n  return $ul.outerHTML;\n}","export default function (spRecommendation) {\n  const $section = document.createElement('section');\n  $section.setAttribute('class', 'w-full');\n  const parentFragment = document.createDocumentFragment();\n  for (const sp of spRecommendation) {\n    const fragment = document.createDocumentFragment();\n    const $ul = document.createElement('ul');\n    for (const item of sp.list) {\n      fragment.appendChild(document.createRange().createContextualFragment(\n        `<li class=\"flex justify-between items-center my-4 py-4 border-b\">\n          <span class=\"w-9/12 inline-block\">${item.option}</span> <button class=\"border rounded-full border-yellow-600 bg-blue-600 text-white w-10 h-10\">${item.cost}</button>\n        </li>`\n      ));\n    }\n    $ul.appendChild(fragment);\n    parentFragment.appendChild(document.createRange().createContextualFragment(`\n    <div class=\"my-8\">\n      <div class=\"flex justify-between my-4 py-4\">\n      <h3 class=\"text-xl\"><strong>${sp.title}</strong></h2>\n      <button class=\"border rounded-full border-yellow-600 bg-blue-600 text-white w-10 h-10 text-center\"><strong>${sp.total}</strong></button>\n      </div>\n      ${$ul.outerHTML}\n      ${sp.hasOwnProperty('analysis') \n        ? `<h3 class=\"mt-4 text-lg leading-loose\"><strong>Analysis</strong></h3>\n        <p class=\"mt-4 leading-loose\">${sp.analysis}</p>` \n        : ''}\n    </div>\n  `));\n  }\n  $section.appendChild(parentFragment);\n  return $section.outerHTML;\n}","import { Notyf } from 'notyf';\n\nexport default function (unit) {\n  const title = document.title;\n  const text = unit.name;\n  const url = document.querySelector('link[rel=canonical]') && document.querySelector('link[rel=canonical]').href || window.location.href;\n  if (navigator.share) {\n    navigator.share({\n      title,\n      text,\n      url\n    })\n      .then(() => {\n        const notyf = new Notyf({\n          position: {\n            x: 'center',\n            y: 'bottom'\n          }\n        });\n        notyf.success('Share url success');\n      })\n      .catch(error => {\n        const notyf = new Notyf({\n          position: {\n            x: 'center',\n            y: 'bottom'\n          }\n        });\n        notyf.error('Share url failed');\n      })\n  } else {\n    navigator.clipboard.writeText(`${title} ${url}`)\n      .then(() => {\n        const notyf = new Notyf({\n          position: {\n            x: 'center',\n            y: 'bottom'\n          }\n        });\n        notyf.success('Copy url success');\n      })\n      .catch(err => {\n        const notyf = new Notyf({\n          position: {\n            x: 'center',\n            y: 'bottom'\n          }\n        });\n        notyf.error('Copy url failed');\n      })\n  }\n}","export default function (dbb) {\n    return document.createRange().createContextualFragment(`\n    <li class=\"dbb-card\">\n        <div class=\"dbb-card-container\">\n            <p class=\"dbb-elemental-synergy\">${dbb.elementalSynergyName}</p>\n            <div class=\"flex m-4\">\n                <a href=\"/omniunits/${dbb.firstUnitName.split(' ').join('_')}\">\n                    <img class=\"mx-4\" data-src=\"https://res.cloudinary.com/satyakresna/image/upload/bravefrontier/omniunits/thumbnails/${dbb.firstUnitId}\" width=\"50\" height=\"50\" alt=\"${dbb.firstUnitName}'s thumbnail\" />\n                </a>\n                <a href=\"/omniunits/${dbb.secondUnitName.split(' ').join('_')}\">\n                    <img class=\"mx-4\" data-src=\"https://res.cloudinary.com/satyakresna/image/upload/bravefrontier/omniunits/thumbnails/${dbb.secondUnitId}\" width=\"50\" height=\"50\" alt=\"${dbb.secondUnitName}'s thumbnail\" />\n                </a>\n            </div>\n            <p class=\"dbb-card-name\">${dbb.dbbName}</p>\n        </div>\n        <div class=\"dbb-card-desc-wrapper\">\n            <p class=\"dbb-card-desc\">${dbb.dbbDesc}</p>\n        </div>\n    </li>\n    `);\n}","import DbbCard from \"./Card.js\";\n\nexport default function (dbbs) {\n  if (Array.isArray(dbbs) && dbbs.length > 0) {\n    const fragement = document.createDocumentFragment();\n    const $dbbList = document.getElementById('dbb-list');\n    $dbbList.textContent = '';\n    for (const dbb of dbbs) {\n      fragement.appendChild(DbbCard(dbb));\n    }\n    $dbbList.appendChild(fragement);\n    document.querySelector('main').appendChild($dbbList);\n    // if (window.previousOmniUnitsPage) {\n    //   window.scrollTo(0, window.previousOmniUnitsPage);\n    // }\n    if (window.dbbs) {\n      observeContent(window.dbbs);\n    } else {\n      observeContent(dbbs);\n    }\n  } else {\n    document.querySelector('main #dbb-list').remove();\n    document.querySelector('main').appendChild(document.createRange().createContextualFragment(`\n      <p class=\"text-center mt-4\">\n        <strong>Opps.. Not found. :(</strong>\n      </p>\n    `));\n  }\n}\n\nfunction observeContent (dbbs) {\n  if (Array.isArray(dbbs) && dbbs.length > 0) {\n    const lastElementChild = document.querySelector('ul#dbb-list').lastElementChild;\n    const childrenElement = document.querySelector('ul#dbb-list').children;\n    // Observe and do infinite scroll\n    let contentObserver = new IntersectionObserver(function (entries, self) {\n      if (entries[0].isIntersecting) {\n        const begin = (childrenElement.length - 1) + 1;\n        const end = childrenElement.length + 50;\n        if (childrenElement.length < dbbs.length) {\n          const nextDbbs = dbbs.slice(begin, end);\n          const fragement = document.createDocumentFragment();\n          for (const dbb of nextDbbs) {\n            fragement.appendChild(DbbCard(dbb));\n          }\n          document.querySelector('ul#dbb-list').appendChild(fragement);\n          observeContent(dbbs);\n        }\n        self.unobserve(entries[0].target);\n      }\n    }, {\n      root: null, // page as root\n      rootMargin: '0px',\n      threshold: 1.0\n    });\n\n    contentObserver.observe(lastElementChild);\n\n    observeThumbnails();\n  }\n}\n\nfunction observeThumbnails () {\n  const $images = document.querySelectorAll('[data-src]');\n  const config = {\n      rootMargin: '0px 0px 50px 0px',\n      threshold: 0\n  };\n\n  let imageObserver = new IntersectionObserver(function (entries, self) {\n      entries.forEach(entry => {\n          if (entry.isIntersecting) {\n              const src = entry.target.getAttribute('data-src');\n              if (!src) { return; }\n              entry.target.src = src;\n              self.unobserve(entry.target);\n          }\n      });\n  }, config);\n\n  $images.forEach(image => {\n      imageObserver.observe(image);\n  });\n}"],"names":["isarray","Array","isArray","arr","Object","prototype","toString","call","pathToRegexp_1","pathToRegexp","parse_1","parse","compile_1","str","tokensToFunction","tokensToFunction_1","tokensToRegExp_1","tokensToRegExp","PATH_REGEXP","RegExp","join","res","tokens","key","index","path","exec","m","escaped","offset","slice","length","push","prefix","name","capture","group","suffix","asterisk","repeat","optional","delimiter","pattern","escapeGroup","substr","matches","i","obj","data","token","segment","value","TypeError","j","encodeURIComponent","test","escapeString","replace","attachKeys","re","keys","flags","options","sensitive","strict","end","route","lastToken","endsWithSlash","groups","source","match","regexpToRegexp","parts","arrayToRegexp","stringToRegexp","compile","loaded","hasDocument","document","hasWindow","window","hasHistory","history","hasProcess","process","clickEvent","ontouchstart","isLocation","location","Page","this","callbacks","exits","current","len","_decodeURLComponents","_base","_strict","_running","_hashbang","clickHandler","bind","_onpopstate","page","fn","Route","arguments","middleware","start","unhandled","ctx","handled","_window","_getBase","hash","pathname","search","canonicalPath","stop","href","Context","state","pageInstance","_page","hashbang","pageBase","indexOf","title","querystring","_decodeURLEncodedURIComponent","params","split","globalPage","opts","method","regexp","configure","decodeURLComponents","_popstate","popstate","_click","click","addEventListener","removeEventListener","base","loc","protocol","enable","dispatch","url","show","prev","prevContext","pushState","back","setTimeout","redirect","from","to","inst","e","init","save","nextEnter","nextExit","exit","_which","metaKey","ctrlKey","shiftKey","defaultPrevented","el","target","eventPath","composedPath","nodeName","toUpperCase","parentNode","svg","constructor","hasAttribute","getAttribute","link","_samePath","baseVal","sameOrigin","orig","preventDefault","readyState","undefined","event","which","button","_toURL","URL","anc","createElement","hostname","port","val","decodeURIComponent","replaceState","self","next","routePath","qsIndex","hasOwnProperty","createPage","pageFn","apply","create","defineProperty","get","set","page_js","default_1","ga","querySelectorAll","forEach","classList","add","remove","default","formData","FormData","Search","getElementById","has","delete","append","showSearchResult","onchange","opt","optValue","selected","queryString","URLSearchParams","previousOmniUnitsPage","getOmniUnitKeywords","map","keyword","label","id","getDbbKeywords","searchOmniUnitKeywordsEl","filterOmniUnits","filteredOmniUnits","searchParams","searchName","searchElement","searchKeywords","selectedKeywords","setChoiceByValue","omniunits","filter","omniunit","unitName","toLowerCase","unitElement","element","includes","keywords","selectedOmniUnitIndex","searchDbbKeywordsEl","body","contains","trackUrl","setActiveMenu","Promise","then","module","querySelector","textContent","appendChild","style","display","createRange","createContextualFragment","fragement","createDocumentFragment","$ul","setAttribute","Skeleton","Choices","items","choices","removeItemButton","maxItemCount","maxItemText","async","response","fetch","json","requestOmniUnits","NProgress","requestOmniUnit","catch","error","console","log","$p","scrollY","description","image","artwork","findIndex","unit","OmniUnitProfile","scrollTo","done","filteredDbbs","requestDbbs","dbbs","searchEsName","dbb","firstUnitName","secondUnitName","esName","elementalSynergyName","toLocaleLowerCase","filterDbbs","prerenderReady","observeContent","lastElementChild","childrenElement","children","IntersectionObserver","entries","isIntersecting","begin","nextOmniUnits","OmniUnitCard","unobserve","root","rootMargin","threshold","observe","$images","imageObserver","entry","src","observeThumbnail","$omniUnitList","NotyfArrayEvent","skills","lsName","lsDesc","esDesc","bbName","bbDesc","sbbName","sbbDesc","ubbName","ubbDesc","enhancements","fragment","enhancement","option","cost","detail_option","outerHTML","Enhancements","spRecommendation","$section","parentFragment","sp","item","list","total","analysis","SPRecommendation","__assign","assign","t","s","n","p","NotyfNotification","listeners","on","eventType","cb","concat","triggerEvent","_this","NotyfEvent","NotyfArray","notifications","elem","updateFn","Add","splice","num","Remove","onUpdate","DEFAULT_OPTIONS","types","type","className","backgroundColor","icon","tagName","duration","ripple","position","x","y","dismissible","NotyfView","events","X_POSITION_FLEX_MAP","left","center","right","Y_POSITION_FLEX_MAP","top","bottom","docFrag","notyfContainer","_createHTLMElement","container","animationEndEventName","_getAnimationEndEventName","_createA11yContainer","_a","update","notification","addNotification","removeNotification","node","handleEvent","renderedNotification","_popRenderedNotification","removeChild","_renderNotification","_announce","message","card","_buildNotificationCard","idx","getXPosition","getYPosition","adjustContainerAlignment","align","justify","setProperty","iconOpts","notificationElem","wrapper","innerHTML","color","background","iconContainer","text","iconColor","dismissWrapper","dismissButton","_b","Dismiss","stopPropagation","Click","a11yContainer","border","clip","height","margin","overflow","padding","width","outline","transitions","MozTransition","OTransition","WebkitTransition","transition","Notyf","dismiss","_removeNotification","view","registerTypes","payload","normalizeOptions","open","success","defaultOpts","find","config","assignProps","_pushNotification","dismissAll","props","prop","incomingTypes","defaultType","userTypeIdx","userType","navigator","share","clipboard","writeText","err","firstUnitId","secondUnitId","dbbName","dbbDesc","nextDbbs","DbbCard","observeThumbnails","$dbbList"],"mappings":"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"}