{"version":3,"file":"Content-cf6ad67f.js","sources":["../js/dbbs/components/Card.js","../js/dbbs/components/Content.js"],"sourcesContent":["export default function (dbb) {\n    return document.createRange().createContextualFragment(`\n    <li class=\"dbb-card\">\n        <div class=\"dbb-card-container\">\n            <p class=\"dbb-elemental-synergy\">${dbb.elementalSynergyName}</p>\n            <div class=\"flex m-4\">\n                <a href=\"/omniunits/${dbb.firstUnitName.split(' ').join('_')}\">\n                    <img class=\"mx-4\" data-src=\"https://res.cloudinary.com/satyakresna/image/upload/bravefrontier/omniunits/thumbnails/${dbb.firstUnitId}\" width=\"50\" height=\"50\" alt=\"${dbb.firstUnitName}'s thumbnail\" />\n                </a>\n                <a href=\"/omniunits/${dbb.secondUnitName.split(' ').join('_')}\">\n                    <img class=\"mx-4\" data-src=\"https://res.cloudinary.com/satyakresna/image/upload/bravefrontier/omniunits/thumbnails/${dbb.secondUnitId}\" width=\"50\" height=\"50\" alt=\"${dbb.secondUnitName}'s thumbnail\" />\n                </a>\n            </div>\n            <p class=\"dbb-card-name\">${dbb.dbbName}</p>\n        </div>\n        <div class=\"dbb-card-desc-wrapper\">\n            <p class=\"dbb-card-desc\">${dbb.dbbDesc}</p>\n        </div>\n    </li>\n    `);\n}","import DbbCard from \"./Card.js\";\n\nexport default function (dbbs) {\n  if (Array.isArray(dbbs) && dbbs.length > 0) {\n    const fragement = document.createDocumentFragment();\n    const $dbbList = document.getElementById('dbb-list');\n    $dbbList.textContent = '';\n    for (const dbb of dbbs) {\n      fragement.appendChild(DbbCard(dbb));\n    }\n    $dbbList.appendChild(fragement);\n    document.querySelector('main').appendChild($dbbList);\n    // if (window.previousOmniUnitsPage) {\n    //   window.scrollTo(0, window.previousOmniUnitsPage);\n    // }\n    if (window.dbbs) {\n      observeContent(window.dbbs);\n    } else {\n      observeContent(dbbs);\n    }\n  } else {\n    document.querySelector('main #dbb-list').remove();\n    document.querySelector('main').appendChild(document.createRange().createContextualFragment(`\n      <p class=\"text-center mt-4\">\n        <strong>Opps.. Not found. :(</strong>\n      </p>\n    `));\n  }\n}\n\nfunction observeContent (dbbs) {\n  if (Array.isArray(dbbs) && dbbs.length > 0) {\n    const lastElementChild = document.querySelector('ul#dbb-list').lastElementChild;\n    const childrenElement = document.querySelector('ul#dbb-list').children;\n    // Observe and do infinite scroll\n    let contentObserver = new IntersectionObserver(function (entries, self) {\n      if (entries[0].isIntersecting) {\n        const begin = (childrenElement.length - 1) + 1;\n        const end = childrenElement.length + 50;\n        if (childrenElement.length < dbbs.length) {\n          const nextDbbs = dbbs.slice(begin, end);\n          const fragement = document.createDocumentFragment();\n          for (const dbb of nextDbbs) {\n            fragement.appendChild(DbbCard(dbb));\n          }\n          document.querySelector('ul#dbb-list').appendChild(fragement);\n          observeContent(dbbs);\n        }\n        self.unobserve(entries[0].target);\n      }\n    }, {\n      root: null, // page as root\n      rootMargin: '0px',\n      threshold: 1.0\n    });\n\n    contentObserver.observe(lastElementChild);\n\n    observeThumbnails();\n  }\n}\n\nfunction observeThumbnails () {\n  const $images = document.querySelectorAll('[data-src]');\n  const config = {\n      rootMargin: '0px 0px 50px 0px',\n      threshold: 0\n  };\n\n  let imageObserver = new IntersectionObserver(function (entries, self) {\n      entries.forEach(entry => {\n          if (entry.isIntersecting) {\n              const src = entry.target.getAttribute('data-src');\n              if (!src) { return; }\n              entry.target.src = src;\n              self.unobserve(entry.target);\n          }\n      });\n  }, config);\n\n  $images.forEach(image => {\n      imageObserver.observe(image);\n  });\n}"],"names":["dbb","document","createRange","createContextualFragment","elementalSynergyName","firstUnitName","split","join","firstUnitId","secondUnitName","secondUnitId","dbbName","dbbDesc","dbbs","Array","isArray","length","fragement","createDocumentFragment","$dbbList","getElementById","textContent","appendChild","DbbCard","querySelector","window","observeContent","remove","lastElementChild","childrenElement","children","IntersectionObserver","entries","self","isIntersecting","begin","end","nextDbbs","slice","unobserve","target","root","rootMargin","threshold","observe","$images","querySelectorAll","imageObserver","forEach","entry","src","getAttribute","image","observeThumbnails"],"mappings":"AAAe,WAAUA,GACrB,OAAOC,SAASC,cAAcC,yBAAyB,uHAGZH,EAAII,qGAEbJ,EAAIK,cAAcC,MAAM,KAAKC,KAAK,kJACiEP,EAAIQ,4CAA4CR,EAAIK,4FAEvJL,EAAIS,eAAeH,MAAM,KAAKC,KAAK,kJACgEP,EAAIU,6CAA6CV,EAAIS,kHAGvJT,EAAIW,kHAGJX,EAAIY,gDCd5B,WAAUC,GACvB,GAAIC,MAAMC,QAAQF,IAASA,EAAKG,OAAS,EAAG,CAC1C,MAAMC,EAAYhB,SAASiB,yBACrBC,EAAWlB,SAASmB,eAAe,YACzCD,EAASE,YAAc,GACvB,IAAK,MAAMrB,KAAOa,EAChBI,EAAUK,YAAYC,EAAQvB,IAEhCmB,EAASG,YAAYL,GACrBhB,SAASuB,cAAc,QAAQF,YAAYH,GAIvCM,OAAOZ,KACTa,EAAeD,OAAOZ,MAEtBa,EAAeb,QAGjBZ,SAASuB,cAAc,kBAAkBG,SACzC1B,SAASuB,cAAc,QAAQF,YAAYrB,SAASC,cAAcC,yBAAyB,0GAQ/F,SAASuB,EAAgBb,GACvB,GAAIC,MAAMC,QAAQF,IAASA,EAAKG,OAAS,EAAG,CAC1C,MAAMY,EAAmB3B,SAASuB,cAAc,eAAeI,iBACzDC,EAAkB5B,SAASuB,cAAc,eAAeM,SAExC,IAAIC,sBAAqB,SAAUC,EAASC,GAChE,GAAID,EAAQ,GAAGE,eAAgB,CAC7B,MAAMC,EAASN,EAAgBb,OAAS,EAAK,EACvCoB,EAAMP,EAAgBb,OAAS,GACrC,GAAIa,EAAgBb,OAASH,EAAKG,OAAQ,CACxC,MAAMqB,EAAWxB,EAAKyB,MAAMH,EAAOC,GAC7BnB,EAAYhB,SAASiB,yBAC3B,IAAK,MAAMlB,KAAOqC,EAChBpB,EAAUK,YAAYC,EAAQvB,IAEhCC,SAASuB,cAAc,eAAeF,YAAYL,GAClDS,EAAeb,GAEjBoB,EAAKM,UAAUP,EAAQ,GAAGQ,WAE3B,CACDC,KAAM,KACNC,WAAY,MACZC,UAAW,IAGGC,QAAQhB,GAM5B,WACE,MAAMiB,EAAU5C,SAAS6C,iBAAiB,cAM1C,IAAIC,EAAgB,IAAIhB,sBAAqB,SAAUC,EAASC,GAC5DD,EAAQgB,SAAQC,IACZ,GAAIA,EAAMf,eAAgB,CACtB,MAAMgB,EAAMD,EAAMT,OAAOW,aAAa,YACtC,IAAKD,EAAO,OACZD,EAAMT,OAAOU,IAAMA,EACnBjB,EAAKM,UAAUU,EAAMT,cAXlB,CACXE,WAAY,mBACZC,UAAW,IAcfE,EAAQG,SAAQI,IACZL,EAAcH,QAAQQ,MAvBxBC"}